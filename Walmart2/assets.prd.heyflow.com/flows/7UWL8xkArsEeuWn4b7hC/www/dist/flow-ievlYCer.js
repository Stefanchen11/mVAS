var lo=Object.defineProperty,co=Object.defineProperties;var uo=Object.getOwnPropertyDescriptors;var dn=Object.getOwnPropertySymbols;var sa=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable;var ra=e=>{throw TypeError(e)};var Zn=(e,t,n)=>t in e?lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))sa.call(t,n)&&Zn(e,n,t[n]);if(dn)for(var n of dn(t))aa.call(t,n)&&Zn(e,n,t[n]);return e},E=(e,t)=>co(e,uo(t));var un=(e,t)=>{var n={};for(var s in e)sa.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&dn)for(var s of dn(e))t.indexOf(s)<0&&aa.call(e,s)&&(n[s]=e[s]);return n};var U=(e,t,n)=>Zn(e,typeof t!="symbol"?t+"":t,n),ia=(e,t,n)=>t.has(e)||ra("Cannot "+n);var Xn=(e,t,n)=>(ia(e,t,"read from private field"),n?n.call(e):t.get(e)),oa=(e,t,n)=>t.has(e)?ra("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Qn=(e,t,n,s)=>(ia(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);import{r as y,j as l,z as H,p as mo,a as Ln,c as D,o as ho,b as rr,u as Ot,d as ms,e as de,f as Vn,g as ir,h as fo,R as po,i as go,l as or,A as On,L as vo,w as lr,k as cr,S as yo,m as bo,n as _s,q as wo,s as Ut,t as So,_ as j,v as ge,x as Te,y as Dt,F as It,B as dr,C as ko,D as Eo,E as la,G as es}from"./vendor.chunk-DwRjKKZr.js";const xo=window.currentlyMounting,As=()=>xo,x=()=>window.heyflow[As()],_e=()=>{var e;return(e=document.querySelector(`[index="${As()}"]`))==null?void 0:e.shadowRoot},Io=!!_e(),F=e=>{var t;try{const n=_e();return(t=n==null?void 0:n.querySelector(e))!=null?t:document.querySelector(e)}catch(n){return console.error("failed to execute flowQuery() :",n),null}},be=e=>{var t;try{const n=_e();return(t=n==null?void 0:n.querySelectorAll(e))!=null?t:document.querySelectorAll(e)}catch(n){return console.error("failed to execute flowQuerAll() :",n),[]}},ht=e=>console.warn(`no element found for query: ${e}`),Zt=()=>{var t;const e=_e();return(t=e==null?void 0:e.activeElement)!=null?t:document.activeElement},Ue=e=>{var n,s;const t=_e();return(s=(n=t==null?void 0:t.querySelector(e))!=null?n:document[e])!=null?s:document.querySelector(e)},Ct=()=>{var t,n;const e=_e();return(n=(t=e==null?void 0:e.querySelector("article"))==null?void 0:t.offsetWidth)!=null?n:window.innerWidth},ur=()=>{var t,n;const e=_e();return(n=(t=e==null?void 0:e.querySelector("article"))==null?void 0:t.offsetHeight)!=null?n:window.innerHeight},Fn=()=>F("div[data-id=heyflow-main]"),We=()=>F("form[data-id=heyflow-form]"),mr=()=>be("section[name]"),Ts=()=>{var t,n;const e=(t=Fn())==null?void 0:t.closest(".heyflow-widget-root");return(n=e==null?void 0:e.parentNode)==null?void 0:n.host.getAttribute("index")},hr=()=>_e()?F("article"):F("html"),Ye=(e,t)=>{let n=null;return(...a)=>{n!==null&&(clearTimeout(n),n=null),n=setTimeout(()=>e(...a),t)}},Co=()=>/(android)/i.test(navigator.userAgent),hs=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),Me=e=>Array.from(e).filter(hs),Lo=e=>window.getComputedStyle(e).display=="block",No=e=>{const t=s=>s.classList.contains("flatpickr-mobile"),n=s=>{var r,i;return Array.from((i=(r=s.parentElement)==null?void 0:r.children)!=null?i:[]).some(o=>hs(o)&&t(o))};return e.filter(s=>{const a=s.dataset.blocktype==="date-picker";return hs(s)&&!t(s)||a&&n(s)})},_o=e=>e.filter(t=>{const n=t.closest('div[data-blocktype="signature"]');return n&&Lo(n)}),He=e=>Array.from(e).filter(t=>!t.closest(".hide_desktop")&&!t.closest(".hide_mobile")&&!t.closest(".hide")),St=()=>{const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},Rs=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ao=()=>/Safari/.test(navigator.userAgent)&&!/Chrome|Chromium/.test(navigator.userAgent),Nn=async e=>new Promise(t=>setTimeout(t,e)),To=e=>{if(typeof e!="string")return!1;try{if(e=JSON.parse(e),typeof e=="object"&&e!==null)return!0}catch(t){return!1}return!1},fs=(e,t=2)=>{if(e===0)return{value:0,suffix:"Bytes"};const n=1e3,s=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return{value:parseFloat((e/Math.pow(n,r)).toFixed(s)),suffix:a[r]}},Un=()=>window.crypto.randomUUID().replace(/-/g,""),fr=e=>{var t,n;return(n=(t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`))==null?void 0:t.pop())!=null?n:""};function Ce(){var t;const e=x();return(t=Ue("body"))!=null&&t.classList.contains("app-preview")?!0:e.constants.ENV==="PREVIEW"}function ft(){var e;return!!((e=Fn())!=null&&e.classList.contains("screen-thumbnail"))}function nt(){return!!Ts()}function pr(e,t){return e.classList.contains(t)?e:e.parentElement===null?null:pr(e.parentElement,t)}const wt=()=>null,Lt=e=>{if(!(!e||e===null))if(typeof e!="string"){console.warn("Unsupported attr type",typeof e);return}else return e===""?void 0:e},Tn=e=>{if(e!==null){{if(typeof e=="boolean")return e;if(typeof e!="string"){console.warn("Unsupported attr type",typeof e);return}else if(e==="")return}return e==="true"?!0:e==="false"?!1:void 0}},Ro=e=>{if(typeof e=="string")return e.replace(/\s/g,"_").replace(/[^-a-zA-Z0-9]/g,"_")},gr=(e,t)=>!e.length||e.indexOf(t)===-1?"forward":"back",$o=(e,t)=>{if(e[e.length-1]===t)return console.warn("No screen removed, target screen is the current screen."),[...e];const s=e.lastIndexOf(t),a=e.length-1;return s!==-1&&s<a?[...e.slice(0,s+1)]:[...e]},Rn=e=>{var t,n;return Array.from((n=(t=e.parentElement)==null?void 0:t.children)!=null?n:[]).indexOf(e)},Ve=e=>Tn(e.getAttribute("data-initialized"))?!0:(e.setAttribute("data-initialized","true"),!1);function vr(e){if(Ve(e))return;const t=e.getAttribute("data-allow-multiple")==="true",n=e.getAttribute("data-animation-duration"),s=Number(n),a=n&&!isNaN(s)?s:200;e.style.setProperty("--animation-duration",a+"ms");for(const r of e.children){const i=r.getAttribute("data-default-open")==="true",o=r.children[0],c=r.children[1],[d,u]=o.children,m=c.children[0];let h=null;const p=f=>{if(f.type==="keydown"){const g=f;if(g.code!=="Enter"&&g.code!=="Space")return;g.code==="Space"&&f.preventDefault(),f.stopPropagation()}if(r.classList.toggle("open"),h&&clearTimeout(h),r.classList.contains("open")){if(localStorage.setItem(r.id,"open"),c.style.maxHeight="0px",setTimeout(()=>{c.style.maxHeight=m.offsetHeight+"px"}),h=setTimeout(()=>{c.style.maxHeight="none",h=null},a),!t)for(const g of e.children)g!==r&&g.classList.contains("open")&&g.children[0].click()}else localStorage.removeItem(r.id),c.style.maxHeight=m.offsetHeight+"px",setTimeout(()=>{c.style.maxHeight="0px"})};o.removeEventListener("click",o.toggle),r.removeEventListener("keydown",o.toggle),o.toggle=p,o.addEventListener("click",p),r.addEventListener("keydown",p),(localStorage.getItem(r.id)||i)&&(r.classList.add("open"),c.style.maxHeight="none",u.style.transition="none",setTimeout(()=>{u.style.transition=""}))}}const yr=e=>{const t=F(`#${e}`);if(!t)return console.warn("Failed to init accordion by id: element is undefined");vr(t)},jo=e=>{for(const t of e.getElementsByClassName("accordion"))vr(t)},br=()=>{const e=be(".header-avatar");e==null||e.forEach(t=>new Po(t))};class Po{constructor(t){U(this,"el");U(this,"img");U(this,"initialHeight");U(this,"padding");var a;this.el=t,this.img=t.getElementsByTagName("img")[0],this.padding=0,this.initialHeight=0,this.setInitialSize(),(a=_e()?F("article"):document)==null||a.addEventListener("scroll",this.position.bind(this)),window.addEventListener("resize",()=>{this.setInitialSize(),this.position()});const s=setInterval(()=>{var o;const r=((o=F("#template-header"))==null?void 0:o.style.display)==="block",i=this.position();(!r||i)&&clearInterval(s)},100)}setInitialSize(){const t=x(),n=t==null?void 0:t.constants.STYLES,s=parseInt(n["width-mobile"].toString())+20;this.initialHeight=Ct()<=s?parseInt(n["header-avatar-size-mobile"].toString()):parseInt(n["header-avatar-size"].toString()),this.padding=Ct()<=s?4:10}position(){var h,p,f;const t=(p=(h=hr())==null?void 0:h.scrollTop)!=null?p:0,n=(f=F("header"))==null?void 0:f.offsetHeight;if(!n)return!1;const s=5,a=.5,r=1,i=this.initialHeight,o=Math.min(n-2*s,i*.75)-r,c=n-t*a,d=n-o/2-s,u=1-(c-d)/(n-d),m=i-u*(i-o);return this.img.style.height=Math.max(o,m)+"px",this.img.style.width=Math.max(o,m)+"px",this.el.style.top=Math.max(d,c)+"px",this.el.style.height="auto",this.el.style.opacity="1",!0}}const wr="heyflow_cookie-consent-",mn=`${wr}${x().constants.FLOW_ID}`,Sr={check:function(){const e=be(".cookie-consent"),t=x();St()===!0&&!window.localStorage[wr+t.constants.FLOW_ID]&&(e==null||e.forEach(function(n){n.classList.remove("hide"),n.classList.add("show")}))},agree:function(){St()===!0&&(window.localStorage[mn]=!0,window.localStorage[mn+"_ts"]=new Date().getTime());const e=be(".cookie-consent");e==null||e.forEach(function(t){t.classList.remove("show"),t.classList.add("hide")})},reset:function(){St()===!0&&(delete localStorage[mn],delete localStorage[mn+"_ts"]);const e=be(".cookie-consent");e==null||e.forEach(function(t){t.classList.remove("hide"),t.classList.add("show")})}},Bo="2.75.0",Mo={constants:{ASSETS_URL:"",FLOWS_ASSETS_BUCKET_BASEURL:"",FLOW_ID:"",MODULES_ENDPOINT:"",API_ENDPOINT:"",STRIPE_PUBLIC_KEY:"",STATIC_URL:"",LEGACY_BUILDER_PREVIEW:!1,STYLES:{}}},kr=y.createContext(Mo),fe=()=>{const e=y.useContext(kr);if(!e)throw new Error("useBlocksContext must be used within a BlockContext provider");return e},Do=({children:e,value:t})=>l.jsx(kr.Provider,{value:t,children:e}),Vo=({blockContext:e,blockID:t})=>{var s;const n=(s=e.client)==null?void 0:s.visibility(t);return{show:()=>{n==null||n.show()},hide:()=>{n==null||n.hide()},get:()=>n==null?void 0:n.get(),clear:()=>{n==null||n.clear()}}},ae=()=>({getResponseData:()=>({}),getSubmittableResponseData:()=>[],getValidationSchema:()=>H.never(),onValidate:()=>{},reset:()=>{},Container:()=>null,Wrapper:({children:e})=>e,getCustomMethods:()=>({}),getInitialState:()=>({}),getVisibilityMethods:Vo});function P(e){if(e===void 0)return;const t=mo(e);if(t)return Object.entries(t).reduce((n,[s,a])=>{if(s.startsWith("-"))return n[s]=a,n;const r=s.replace(/-([a-z])/g,(i,o)=>o.toUpperCase());return n[r]=a,n},{})}function st(e){if(typeof window=="undefined")return e;Ln.addHook("afterSanitizeAttributes",n=>{var s;if(n.tagName==="A")if(n.getAttribute("target")==="_blank"){const r=((s=n.getAttribute("rel"))!=null?s:"").split(/\s+/).filter(Boolean);r.includes("noopener")||(r.push("noopener"),n.setAttribute("rel",r.join(" ")));const i=Array.from(n.attributes).map(o=>({name:o.name,value:o.value}));i.sort((o,c)=>o.name.localeCompare(c.name)),i.forEach(o=>n.removeAttribute(o.name)),i.forEach(o=>n.setAttribute(o.name,o.value))}else n.removeAttribute("target")});const t=Ln.sanitize(e,{ADD_ATTR:["target"]});return Ln.removeAllHooks(),t}const Oo=()=>l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Fo=()=>l.jsxs("svg",{className:"plus",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M12 5V19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Uo=({option:e,isOpen:t,isInitiallyOpen:n,onToggle:s,icon:a,wrapperRef:r})=>{const i=`content-${e.id}`;return l.jsxs("div",{"aria-expanded":t,tabIndex:0,id:e.id,className:D("accordion-option",{open:t}),onClick:()=>s(e.id),onKeyDown:o=>s(e.id,o),role:"button","aria-controls":i,children:[l.jsxs("div",{className:"accordion-option-header",children:[l.jsx("div",{className:"accordion-option-label",role:"heading",dangerouslySetInnerHTML:{__html:st(e.label)}}),l.jsxs("div",{className:"accordion-option-toggler","aria-hidden":"true",children:[a==="chevron"&&l.jsx(Oo,{}),a==="plus"&&l.jsx(Fo,{})]})]}),l.jsx("div",{id:i,"aria-labelledby":e.id,className:"accordion-option-content-wrapper",ref:r,role:"region",style:n?{maxHeight:"none"}:void 0,children:!!e.content&&l.jsx("div",{className:"accordion-option-content rich-text",dangerouslySetInnerHTML:{__html:st(e.content)}})})]},e.id)},Wo=e=>{const t=y.useRef({});return{handleAnimation:(s,a,r)=>{var c;t.current[s]&&clearTimeout(t.current[s]);const i=r.children[0],o=(c=i==null?void 0:i.offsetHeight)!=null?c:0;a?(r.style.maxHeight="0px",setTimeout(()=>{r.style.maxHeight=o+"px"}),t.current[s]=setTimeout(()=>{r.style.maxHeight="none",delete t.current[s]},e)):(r.style.maxHeight=o+"px",setTimeout(()=>{r.style.maxHeight="0px"}))}}};function Ho({wrapperStyle:e,className:t,options:n,allowMultiple:s,animationDuration:a=200,setDefaultOpen:r,icon:i}){const o=y.useMemo(()=>n.filter(p=>r&&p.defaultOpen).map(p=>p.id),[n,r]),[c,d]=y.useState(new Set(o)),u=y.useRef({}),{handleAnimation:m}=Wo(a),h=(p,f)=>{if((f==null?void 0:f.type)==="keydown"){if(f.code!=="Enter"&&f.code!=="Space")return;f.code==="Space"&&f.preventDefault(),f.stopPropagation()}const g=!c.has(p),b=new Set(c);g?(s||[...b].forEach(w=>{b.delete(w);const k=u.current[w];k&&m(w,!1,k)}),b.add(p)):b.delete(p);const S=u.current[p];S&&m(p,g,S),d(b)};return l.jsx("div",{style:e,children:l.jsx("div",{className:D("accordion",t),style:{"--animation-duration":`${a}ms`},children:n.map(p=>l.jsx(Uo,{option:p,isOpen:c.has(p.id),isInitiallyOpen:o.includes(p.id),onToggle:h,icon:i,wrapperRef:f=>{f&&(u.current[p.id]=f)}},p.id))})})}const qo=({config:e})=>l.jsx(Ho,{wrapperStyle:P(e.legacySpacingStyle),className:e.class,options:e.options,allowMultiple:e.allowMultiple,animationDuration:e.animationDuration,setDefaultOpen:e.setDefaultOpen,icon:e.icon}),re=e=>({blockId:e.id,blockClass:e.blockClass,blockStyle:e.blockStyle,containerStyle:e.containerStyle,blockType:e.type,highlight:e.highlight,hasParent:e.hasParent}),ce=e=>{const t=["margin","padding"],n=["top","right","bottom","left"],s={};t.forEach(r=>n.forEach(i=>{const o=r+i.slice(0,1).toUpperCase()+i.slice(1),c=`${r}-${i}`;e!=null&&e[o]&&(s[c]=String(e[o]))}));let a="";return Object.keys(s).length&&Object.keys(s).forEach(r=>a+=`${r}:${s[r]}${s[r]==="auto"?"":"px"}; `),a},Wn=e=>{const t=ho(e,["layout","FLOW_BUCKET_BASEURL","API_ENDPOINT","_locals","cache","svg","image","style","containerStyle","settings","prefixSvg","suffixSvg"]);return JSON.stringify(t)},ts=(e,t)=>typeof e=="number"?e+t:e,zo=e=>{var n;const t=[(n=e.style)!=null?n:""];return e.size?(t.push(`height: ${ts(e.size,"%")};`),t.push(`width: ${ts(e.size,"%")};`)):(e.height&&t.push(`height: ${e.height};`),e.width&&t.push(`width: ${e.width};`)),e.borderRadius&&t.push(`border-radius: ${ts(e.borderRadius,"px")};`),t.join("")},Ko=e=>{if(e.length===0)return"*";const t={"text-documents/*":"text/csv, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/ms-excel, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/pdf, application/zip"};return e.map(s=>{var a;return(a=t[s])!=null?a:s}).join(", ")},Go=(e,t,{draftToHTML:n,purifyXML:s})=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),options:e.options.map(a=>{var r,i,o,c;return E(v({},a),{content:s(n((r=a.content)!=null?r:"")),label:s(!a.label||typeof a.label=="string"?(i=a.label)!=null?i:"":n((c=(o=a.label)==null?void 0:o.content)!=null?c:""))})}),outerClassName:e.containerClass,outerStyle:P(e.style)}),Yo=({children:e,config:t})=>{var n;return l.jsx("div",{className:`block-content accordion-block ${(n=t.outerClassName)!=null?n:""}`,style:t.outerStyle,id:`accordion-block-${t.blockId}`,children:e})},Jo=E(v({},ae()),{getConfig:Go,Container:qo,Wrapper:Yo}),Zo=function(){const t=typeof document!="undefined"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Xo=function(e){return"/"+e},ca={},te=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let i=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(n.map(d=>{if(d=Xo(d),d in ca)return;ca[d]=!0;const u=d.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Zo,u||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},Wt=(e,t)=>(e==null?void 0:e.blockName)===t,Pe=rr(e=>({blocks:{},reset:()=>e({blocks:{}}),setInitialBlockState:(t,n,s,a,r)=>{e(i=>({blocks:E(v({},i.blocks),{[n]:{blockName:t,config:s,state:a,restoredState:r}})}))},setBlockState:(t,n,s)=>{e(a=>{const r=a.blocks[n];if(!r||!Wt(r,t))throw new Error(`Block state of ${t} with id ${n} has not been initialized`);const i=typeof s=="function"?s(r.state):s;return{blocks:E(v({},a.blocks),{[n]:E(v({},r),{blockName:t,state:v(v({},r.state),i),restoredState:void 0})})}})},setBlockConfig:(t,n,s)=>{e(a=>{const r=a.blocks[n];if(!r||!Wt(r,t))throw new Error(`Block state of ${t} with id ${n} has not been initialized`);const i=typeof s=="function"?s(r.config):s;return{blocks:E(v({},a.blocks),{[n]:E(v({},r),{blockName:t,config:v(v({},r.config),i)})})}})}}));function ps(e,t,n){var a;const s=(a=e[t])!=null?a:Pe.getState().blocks[t];if(!s||!Wt(s,n))throw new Error(`Block state of ${n} with id ${t} has not been initialized`);return s}function Oe(e,t,n){const s=rp(),a=s==null?void 0:s.blocks,r=Ot(Pe,ms(d=>ps(a!=null?a:d.blocks,t,e).state)),i=Ot(Pe,ms(d=>ps(a!=null?a:d.blocks,t,e).restoredState)),o=Ot(Pe,d=>d.setBlockState),c=y.useCallback(d=>{o(e,t,d),n==null||n()},[t,e,o,n]);return y.useEffect(()=>{i&&c(i)},[c,i]),{state:r,setState:c}}const Qo=({isInline:e,floatingLabelRef:t,shouldOffsetLabel:n})=>{var r,i;if(e||!t)return;const a=Array.from((i=(r=t.parentElement)==null?void 0:r.querySelectorAll(".input-prefix"))!=null?i:[]).reduce((o,c)=>o+c.getBoundingClientRect().width,0);t.style.left=n?`-${a}px`:""};function $s({id:e,label:t,labelType:n,isOffset:s}){const a=y.useRef(null);return y.useEffect(()=>{Qo({floatingLabelRef:a.current,shouldOffsetLabel:s,isInline:n==="floating-inline"})},[s,n]),l.jsx("div",{ref:a,className:D("input-floating-label",{"is-offset":s}),children:t?l.jsx("label",{htmlFor:e,children:t}):null})}const Xt=()=>l.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Fe=e=>{var t;return(t=e.find(Boolean))!=null?t:""},el={country:"country",state:"administrative_area_level_1",city:"locality",zip:"postal_code",street:"route",house:"street_number",state_code:"administrative_area_level_1"};function Er(e){return Fe([e.systemLabel,e.label,e.placeholder,e.blockId])}function da(e){return e.replace(/>\s+</g,"><")}const tl=async(e,t)=>{var n,s,a;return await de.post("https://places.googleapis.com/v1/places:autocomplete",{input:e.value,languageCode:(n=e.getAttribute("data-autocomplete-language"))!=null?n:"en",includedRegionCodes:(a=(s=e.getAttribute("data-allowed-countries"))==null?void 0:s.split(","))!=null?a:void 0},{headers:{"Content-Type":"application/json","X-Goog-Api-Key":t}})},xr=(e,t)=>{var s,a;const n=e.find(r=>r.types.includes(el[t]));return t==="state_code"?(s=n==null?void 0:n.shortText)!=null?s:"":(a=n==null?void 0:n.longText)!=null?a:""},nl=async(e,t)=>{const{data:n}=await de.get(`https://places.googleapis.com/v1/places/${e}`,{headers:{"Content-Type":"application/json","X-Goog-Api-Key":t,"X-Goog-FieldMask":"location,types,addressComponents"}});return n};function sl(e){return e.includes("building")||e.includes("establishment")?18:e.includes("premise")?17:e.includes("street_address")?16:e.includes("route")?15:e.includes("postal_code")||e.includes("neighborhood")?14:e.includes("sublocality")?13:e.includes("locality")?11:e.includes("administrative_area_level_2")?9:e.includes("administrative_area_level_1")?7:e.includes("country")?4:16}const al=(e,t,n)=>{var a,r;let s;switch(e){case"latitude":s=(a=t==null?void 0:t.markerPosition.lat.toString())!=null?a:n.latitude;break;case"longitude":s=(r=t==null?void 0:t.markerPosition.lng.toString())!=null?r:n.longitude;break;default:s=t?xr(t.addressComponents,e):n[e]}return s},rl=({googleMapsApiKey:e,zoom:t,markerPosition:n,mapTypeId:s,blockId:a,googleMaps:r})=>!e||!n.lat?null:l.jsx(r.APIProvider,{apiKey:e,children:l.jsx(r.Map,{mapId:`Map-${a}`,center:n,zoom:t!=null?t:16,gestureHandling:"none",disableDefaultUI:!0,keyboardShortcuts:!1,mapTypeId:s,children:l.jsx(r.AdvancedMarker,{position:n})})});function il({id:e,name:t,type:n,dataLabel:s,dataVariable:a,dataSensitive:r,value:i}){return l.jsx("input",{type:"hidden","data-type":"input",id:`${e}-${n}`,name:`${e}-${n}`,"data-label":`${s!=null?s:t} [${n}]`,"data-variable":`${a!=null?a:t}_${n}`,"data-sensitive":r,"data-tf-sensitive":r,value:i})}const ol=300;function ll({enabled:e,showMap:t,handlePlaceSelect:n,inputRef:s,googleMapsApiKey:a,isInPreviewMode:r,messageParent:i,handleChange:o}){const c=y.useRef(null),d=y.useRef(null),u=s.current,m=y.useCallback(async(f,g)=>{try{if(!(u!=null&&u.value.length)||!a)return;const{data:b}=await tl(u,a);if(!b.suggestions)return;const S=b.suggestions.map(({placePrediction:w})=>({label:w.text.text,value:w.placeId}));g(S)}catch(b){throw r&&i&&i({event:"preview.googlePlacesAPIBlocked"}),console.error("Error while getting autocomplete succestions from Google Places API: ",b),new Error(b)}},[a,u,r,i]),h=y.useCallback(async f=>{if(!a||!u)return;const g=f.value;o(f.label);try{const{location:b,types:S,addressComponents:w}=await nl(g,a),k={lat:b.latitude,lng:b.longitude},C=sl(S);n({markerPosition:k,zoom:C,addressComponents:w})}catch(b){throw console.error("Error while displaying the map: ",b),new Error(b)}},[a,o,n,u]),p=y.useCallback(()=>{n(null)},[n]);return y.useEffect(()=>{if(!e)return;const f=()=>{!u||!d.current||(c.current=Vn({input:u,fetch:m,onSelect:h,click:g=>g.fetch(),keyup:p,className:`autocomplete-list ${!t&&"powered-by-google"}`,debounceWaitMs:ol,disableAutoSelect:!0,container:d.current,customize:(g,b,S,w)=>{S.style.top="",S.style.left="",S.style.visibility="initial"}}))};c.current||f()},[e,m,h,p,u,t]),y.useEffect(()=>()=>{var f;(f=c.current)==null||f.destroy(),c.current=null},[]),d}const Ir=["country","state","city","zip","street","house","state_code","latitude","longitude"];function cl({googleMapsApiKey:e,required:t,autoComplete:n,isAutocompleteActive:s,dataInitialRequired:a,dataLabel:r,dataSensitive:i,dataTfSensitive:o,dataVariable:c,dataMapType:d,dataAutocompleteLanguage:u,dataAllowedCountries:m,dataShowMap:h,dataAutocomplete:p,dataFullAddressRequired:f,id:g,label:b,labelType:S,name:w,placeholder:k,wrapperStyle:C,prefix:T,prefixIcon:V,prefixSvg:M,suffix:_,suffixIcon:N,suffixSvg:$,errorMessage:W,withInfo:ee,info:A,handleChange:ie,value:ne,hiddenFieldsValues:I,autoFocus:X,isInPreviewMode:B,messageParent:he,googleMaps:se,selectedPlace:Q,onChangeSelectedPlace:oe}){const[L,R]=y.useState(!1),O=y.useRef(null),le=!!ne,Y=ll({enabled:s,showMap:h,handlePlaceSelect:oe,inputRef:O,googleMapsApiKey:e,isInPreviewMode:B,messageParent:he,handleChange:ie}),$e=y.useMemo(()=>{var pe,we,Le;return(Le=Q==null?void 0:Q.markerPosition)!=null?Le:{lat:(pe=parseFloat(I.latitude))!=null?pe:void 0,lng:(we=parseFloat(I.longitude))!=null?we:void 0}},[I.latitude,I.longitude,Q==null?void 0:Q.markerPosition]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:C,className:D(le?"has-value":"",L?"has-focus":""),children:[se&&h&&l.jsx("div",{className:`address-input-map ${$e.lat?"address-input-map--show":""}`,children:l.jsx(rl,{googleMapsApiKey:e,zoom:Q==null?void 0:Q.zoom,markerPosition:$e,mapTypeId:d,blockId:g,googleMaps:se})}),S!=="floating"&&S!=="floating-inline"&&l.jsx("label",{htmlFor:`${g}`,children:b}),l.jsxs("div",{className:D("input",{"has-prefix":!!T||!!V||!!M,"has-suffix":!!_||!!N||!!$}),children:[l.jsxs("div",{className:"input-inner",children:[M&&l.jsx("div",{className:"input-decorator input-prefix input-prefix-svg",dangerouslySetInnerHTML:{__html:da(M)}}),T&&l.jsx("div",{className:"input-decorator input-prefix",children:l.jsx("span",{children:T})}),l.jsxs("div",{className:"input-wrapper",children:[l.jsx("input",{ref:O,className:"address-input",type:"text",id:g,name:w,value:ne,placeholder:k,required:t,autoFocus:X,autoComplete:n,"data-type":"input","data-label":r,"data-sensitive":i,"data-tf-sensitive":o,"data-map-type":d,"data-variable":c,"data-autocomplete-language":u,"data-allowed-countries":m,"data-initial-required":a,"data-show-map":h,"data-autocomplete":p,"data-full-address-required":f,onChange:pe=>ie(pe.target.value),onFocus:()=>R(!0),onBlur:()=>R(!1),"data-selector":"input"}),(S==="floating"||S==="floating-inline")&&l.jsx($s,{id:g,label:b,labelType:S,isOffset:le||L}),s&&l.jsx("div",{id:`${g}-autocomplete-list`,ref:Y})]}),_&&l.jsx("div",{className:"input-decorator input-suffix",children:l.jsx("span",{children:_})}),$&&l.jsx("div",{className:"input-decorator input-suffix input-suffix-svg",dangerouslySetInnerHTML:{__html:da($)}})]}),l.jsxs("div",{className:"error-box",children:[l.jsx(Xt,{}),l.jsx("span",{className:"text",children:W})]}),ee&&A&&l.jsx("label",{className:"info-label",children:A})]})]}),Ir.map(pe=>{const we=al(pe,Q,I);return l.jsx(il,{id:g,name:w,type:pe,value:we,dataLabel:r,dataVariable:c,dataSensitive:i},pe)})]})}const dl=({config:e,handleValidation:t})=>{var h,p;const{state:n,setState:s}=Oe("address",e.blockId),{client:a}=fe(),[r,i]=y.useState(null),[o,c]=y.useState();y.useEffect(()=>{te(async()=>{const{AdvancedMarker:f,APIProvider:g,Map:b}=await import("./google-maps.chunk-CB_Msxog.js");return{AdvancedMarker:f,APIProvider:g,Map:b}},[]).then(({AdvancedMarker:f,APIProvider:g,Map:b})=>{c({AdvancedMarker:f,APIProvider:g,Map:b})})},[]);const d=f=>{s({value:f}),t()},u=y.useCallback(f=>{i(f),f&&Ir.forEach(g=>{const b=(()=>{switch(g){case"latitude":return f==null?void 0:f.markerPosition.lat.toString();case"longitude":return f==null?void 0:f.markerPosition.lng.toString();default:return xr(f.addressComponents,g)}})();s({[g]:b})})},[s]),m=y.useMemo(()=>{var f,g,b,S,w,k,C,T,V;return{country:(f=n.country)!=null?f:"",state:(g=n.state)!=null?g:"",city:(b=n.city)!=null?b:"",zip:(S=n.zip)!=null?S:"",street:(w=n.street)!=null?w:"",house:(k=n.house)!=null?k:"",latitude:(C=n.latitude)!=null?C:"",longitude:(T=n.longitude)!=null?T:"",state_code:(V=n.state_code)!=null?V:""}},[n]);return l.jsx(cl,{dataInitialRequired:e.isRequired?"true":void 0,dataLabel:Er(e),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataMapType:e.mapType,dataAutocompleteLanguage:e.autocompleteLanguage,dataAllowedCountries:e.allowedCountries,dataShowMap:e.showMap,dataAutocomplete:e.isAutocompleteActive?"true":void 0,dataFullAddressRequired:e.isFullAddressRequired?"true":void 0,dataVariable:(h=e.variableName)!=null?h:"",autoComplete:e.isAutocompleteActive?"off":void 0,handleChange:d,id:e.blockId,label:e.label,name:e.blockId,placeholder:e.placeholder,required:e.isRequired?!0:void 0,value:(p=n.value)!=null?p:"",hiddenFieldsValues:m,wrapperStyle:P(e.legacySpacingStyle),prefix:e.prefix,prefixIcon:e.prefixIcon,prefixSvg:e.prefixSvg,suffix:e.suffix,suffixIcon:e.suffixIcon,suffixSvg:e.suffixSvg,errorMessage:e.errorMessage,withInfo:e.withInfo,info:e.info,autoFocus:a!=null&&a.isInPreviewMode?void 0:e.autoFocus,isAutocompleteActive:e.isAutocompleteActive,labelType:e.labelType,googleMapsApiKey:a==null?void 0:a.googleMapsApiKey,isInPreviewMode:a==null?void 0:a.isInPreviewMode,messageParent:a==null?void 0:a.messageParent,googleMaps:o,selectedPlace:r,onChangeSelectedPlace:u})},ul=(e,t)=>{var n,s,a,r,i,o,c,d,u,m;return{name:Er(e),value:(n=t.state.value)!=null?n:"",country:(s=t.state.country)!=null?s:"",state:(a=t.state.state)!=null?a:"",state_code:(r=t.state.state_code)!=null?r:"",city:(i=t.state.city)!=null?i:"",zip:(o=t.state.zip)!=null?o:"",street:(c=t.state.street)!=null?c:"",house:(d=t.state.house)!=null?d:"",latitude:(u=t.state.latitude)!=null?u:"",longitude:(m=t.state.longitude)!=null?m:"",isSensitive:e.isSensitive}},ml=(e,t)=>{if(!t.value)return[];function n(s){var a,r,i;return{id:s?`${e.blockId}-${s}`:e.blockId,label:s?`${t.name} [${s}]`:t.name,name:s?`${e.blockId}-${s}`:e.blockId,sensitive:e.isSensitive,type:"input",values:[{answer:(a=t[s!=null?s:"value"])!=null?a:"",name:(r=t[s!=null?s:"value"])!=null?r:""}],variable:s?`_${s}`:(i=e.variableName)!=null?i:e.blockId}}return[n(),n("country"),n("state"),n("city"),n("zip"),n("street"),n("latitude"),n("longitude")]},hl=e=>{const t=e.isFullAddressRequired?"Full address needed only":"Invalid address value";return H.object({value:H.string().min(e.isRequired?1:0,{message:t}),country:H.string().min(e.isFullAddressRequired?1:0,{message:t}),state:H.string().min(e.isFullAddressRequired?1:0,{message:t}),city:H.string().min(e.isFullAddressRequired?1:0,{message:t}),zip:H.string().min(e.isFullAddressRequired?1:0,{message:t}),street:H.string().min(e.isFullAddressRequired?1:0,{message:t}),house:H.string().min(e.isFullAddressRequired?1:0,{message:t}),latitude:H.string().min(e.isFullAddressRequired?1:0,{message:t}),longitude:H.string().min(e.isFullAddressRequired?1:0,{message:t})})},fl=({result:e,element:t})=>{const n=t.querySelector('[data-selector="input"]');if(!n)throw new Error("Elements not defined");n.setCustomValidity(e.success?"":e.error.message)},gs={value:"",country:"",state:"",city:"",zip:"",street:"",house:"",latitude:"",longitude:""},pl=(e,t)=>{t.setState(v({},gs))},gl=({config:e,params:t,restoredData:n})=>{var r,i,o,c,d,u,m,h,p;const s=e.variableName&&(r=t.get(e.variableName))!=null?r:"",a={value:s||(n==null?void 0:n.value),country:s?"":(i=n==null?void 0:n.country)!=null?i:"",state:s?"":(o=n==null?void 0:n.state)!=null?o:"",city:s?"":(c=n==null?void 0:n.city)!=null?c:"",zip:s?"":(d=n==null?void 0:n.zip)!=null?d:"",street:s?"":(u=n==null?void 0:n.street)!=null?u:"",house:s?"":(m=n==null?void 0:n.house)!=null?m:"",latitude:s?"":(h=n==null?void 0:n.latitude)!=null?h:"",longitude:s?"":(p=n==null?void 0:n.longitude)!=null?p:""};return Object.values(a).some(Boolean)?[v({},gs),a]:v({},gs)},vl=(e,t,{purifyXML:n})=>{var s;return E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),isSensitive:(s=e.sensitive)!=null?s:!1,variableName:e.variable,isRequired:e.required,autoFocus:e.autofocus,outerClassName:e.class,outerStyle:P(e.style),prefixSvg:e.prefixSvg?n(e.prefixSvg):void 0,suffixSvg:e.suffixSvg?n(e.suffixSvg):void 0})},yl=(e,t)=>{var n;if(t.variableName)return{[t.variableName]:(n=e.value)!=null?n:null}},bl=({children:e,config:t})=>l.jsx("div",{className:D("block-content input-box address-block",t.outerClassName,{"with-floating-label":t.labelType==="floating","with-floating-label floating-label-inline":t.labelType==="floating-inline"}),style:t.outerStyle,id:`${t.blockId}-container`,children:e}),wl=E(v({},ae()),{getResponseData:ul,getSubmittableResponseData:ml,getValidationSchema:hl,onValidate:fl,reset:pl,getInitialState:gl,getConfig:vl,Container:dl,getVariableState:yl,Wrapper:bl}),ua={},Sl=(e,t)=>{e.addEventListener("load",()=>{t()})},kl=async(e,{createResolveCallback:t=Sl,async:n=!0,type:s="text/javascript",root:a=document.body,id:r}={})=>{var i;return(i=ua[e])!=null?i:ua[e]=new Promise((o,c)=>{try{const d=Object.assign(document.createElement("script"),{src:e,async:n,type:s});r&&(d.id=r),t(d,o),d.addEventListener("error",()=>{c({message:`Failed to load the script ${e}`})}),a.appendChild(d)}catch(d){c(d)}})},El="https://assets.calendly.com/assets/external/widget.js",xl=({wrapperStyle:e,url:t,prefill:n,utmParams:s,resize:a})=>{const r=y.useRef(null);return y.useEffect(()=>{var i;a&&((i=r.current)==null||i.classList.add("calendly--resize"))},[a,r]),y.useEffect(()=>{(async()=>{var o;if(!(!r.current||r.current.querySelector("iframe")!==null)){try{await kl(El)}catch(c){console.error("Error while injecting calendly script",c);return}(o=window.Calendly)==null||o.initInlineWidget({url:t,parentElement:r.current,prefill:n,utm:s,resize:a})}})()},[s,a,n,t,r]),l.jsx("div",{ref:r,className:"calendly",style:e,"data-testid":"calendly-wrapper"})},Il=e=>["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].reduce((s,a)=>{const r=e.get(a);return r?E(v({},s),{[a]:r}):s},{}),ma="https://calendly.com/",Cl=e=>e.includes(ma)?e:`${ma}${e}`,Ll=({config:e,params:t})=>{const{client:n}=fe(),{prefillMapping:s}=e;return y.useEffect(()=>{const a=r=>{var i;r.data.event==="calendly.event_scheduled"&&(n==null||n.requestNavigation({mode:"sync",action:(i=e.navigationAction)!=null?i:"next",destination:e.destination,options:{redirectURL:e.redirectURL,target:e.target}}))};return e.triggerRouting&&window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[e,n]),l.jsx(xl,{wrapperStyle:P(e.legacySpacingStyle),url:Cl(e.calendarName||""),utmParams:Il(t),prefill:s?n==null?void 0:n.getPrefillValues(s):void 0,resize:!1})},Nl=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),outerClassName:e.containerClass}),_l=({children:e,config:t})=>{var n;return l.jsx("div",{className:`block-content calendly-block ${(n=t.outerClassName)!=null?n:""}`,id:`calendly-block-${t.blockId}`,children:e})},Al=E(v({},ae()),{Container:Ll,getConfig:Nl,Wrapper:_l}),js=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:24,d:"M216 72.005 104 184l-56-55.995"})]});function Tl({spacing:e,id:t,isRequired:n,dataSensitive:s,dataTfSensitive:a,content:r,dataLabel:i,dataAnswer:o,handleChange:c,systemAnswer:d}){return l.jsx("div",{style:e,className:"simple-checkbox",children:l.jsxs("label",{htmlFor:t,children:[l.jsx("input",{type:"checkbox","data-type":"simple-checkbox",id:t,name:t,"data-label":i,"data-answer":o?d:void 0,value:o?d:void 0,checked:o,required:n,"data-initial-required":n,"data-sensitive":s,"data-tf-sensitive":a,onChange:c}),l.jsxs("div",{className:"simple-checkbox-content",style:{display:"flex"},children:[l.jsx("span",{className:"checkbox",children:l.jsx(js,{})}),l.jsx("div",{className:"label-container",children:l.jsx("span",{className:"simple-checkbox-text rich-text",dangerouslySetInnerHTML:{__html:st(r)}})})]})]})})}function Cr(e){return Fe([e.systemLabel,e.text,e.blockId])}const Rl=({config:e,handleValidation:t})=>{var r;const{state:n,setState:s}=Oe("checkbox",e.blockId,t),a=i=>{s({isChecked:i.currentTarget.checked})};return l.jsx(Tl,{handleChange:a,spacing:P(e.legacySpacingStyle),id:e.blockId,isRequired:e.isRequired,dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataLabel:Cr(e),dataAnswer:n.isChecked,systemAnswer:(r=e.systemAnswer)!=null?r:e.answer,content:e.content})},$l=(e,t)=>({name:Cr(e),isChecked:t.state.isChecked,isSensitive:e.isSensitive}),jl=(e,t)=>{var n;return t.isChecked?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:e.isSensitive,type:"simple-checkbox",values:t.isChecked?[{answer:e.systemAnswer,name:e.systemAnswer}]:[],variable:(n=e.variableName)!=null?n:e.blockId}]:[]},Pl=e=>H.object({isChecked:H.boolean().refine(t=>!e.isRequired||t===!0,{message:"The checkbox must be checked."})}),Bl=({result:e,element:t})=>{const n=t.querySelector('[data-type="simple-checkbox"]');if(!n)throw new Error("Elements not defined");e.success?n.setCustomValidity(""):n.setCustomValidity(e.error.message)},Ml=(e,t)=>{t.setState({isChecked:!1})},Dl=({restoredData:e})=>{var t;return{isChecked:(t=e==null?void 0:e.isChecked)!=null?t:!1}},Vl=(e,t,{draftToHTML:n,purifyXML:s})=>{var a,r,i,o,c;return E(v({},re(e)),{legacySpacingStyle:ce(e),isRequired:(a=e.required)!=null?a:!1,isSensitive:(r=e.sensitive)!=null?r:!1,systemLabel:(i=e.systemLabel)!=null?i:"",systemAnswer:(o=e.systemAnswer)!=null?o:"",content:s(n((c=e.content)!=null?c:"")),text:e.text,answer:e.answer,outerClassName:e.class,outerStyle:P(e.style)})},Ol=(e,t)=>{if(t.variableName)return{[t.variableName]:e.isChecked}},Fl=({blockState:e})=>e.state.isChecked,Ul=({blockState:e,value:t})=>{e.setState({isChecked:t})},Wl=({configState:e})=>({setLabel:t=>{e.setConfig({content:t})}}),Hl=({children:e,config:t})=>{var n;return l.jsx("div",{className:`block-content simple-checkbox simple-checkbox-block ${(n=t.outerClassName)!=null?n:""}`,style:t.outerStyle,id:`simple-checkbox-block-${t.blockId}`,children:e})},ql=E(v({},ae()),{getResponseData:$l,getSubmittableResponseData:jl,getValidationSchema:Pl,onValidate:Bl,reset:Ml,getConfig:Vl,Container:Rl,getInitialState:Dl,getVariableState:Ol,Wrapper:Hl,getValue:Fl,setValue:Ul,getCustomMethods:Wl});function zl({blockId:e,children:t,className:n,innerClassName:s,innerStyle:a,outerClassName:r,style:i}){return l.jsx("div",{className:D("block-content elements-container elements-v2-container",r),"data-type":"nested-blocks","data-blockid":e,children:l.jsx("div",{className:n,style:i,children:l.jsx("div",{className:D("elements-container-inner",s),style:a,children:t})})})}const Kl=({config:e,params:t,Wrapper:n})=>{const{constants:s,isInlineBuildingMode:a}=fe();return l.jsx(zl,{blockId:e.blockId,className:e.className,innerClassName:e.innerClassName,innerStyle:e.innerStyle,outerClassName:e.outerClassName,style:e.style,children:e.elements.map(r=>a?l.jsx(op,{blockName:r.blockName,config:r,params:t,Wrapper:n},r.blockId):l.jsx(ip,{blockName:r.blockName,config:r,isUsingLegacyBuilderPreview:s.LEGACY_BUILDER_PREVIEW},r.blockId))})};function Lr(e){switch(e){case"multiple-choice":return"multipleChoice";case"simple-checkbox-v2":return"checkbox";case"icon-rating":return"scale";case"range-slider":return"rangeSlider";case"date-picker":return"datePicker";case"generic-button":return"genericButton";case"link-list":return"links";case"logo-bar":return"logoBar";case"photo-carousel":return"photoCarousel";case"progress-dots":return"progress";case"rich-list-v2":return"richList";case"rich-text":return"richText";case"stripe-payment":return"stripePayment";case"text-image-content":return"textImage";case"elements-v2":return"container";case"progress-bar":return"screenProgress";case"rich-list":case"simple-checkbox":case"button":case"comment":case"cookie-consent":case"elements":throw new Error(`Unexpected legacy block found: ${e}`);default:return e}}const Gl=(e,t,n)=>{var s,a,r;return E(v({},re(e)),{blockName:"container",blockId:e.id,className:e.class,elements:(a=(s=e.elements)==null?void 0:s.map(i=>{const o=Lr(i.type),c=at()[o];return E(v({},c.getConfig(i,t,n)),{blockName:o})}))!=null?a:[],innerClassName:e.innerClass,innerStyle:E(v({},(r=P(e.style))!=null?r:{}),{marginLeft:e.innerMarginLeft,marginRight:e.innerMarginRight}),outerClassName:e.containerClass,style:P(ce(e))})},Yl=E(v({},ae()),{getConfig:Gl,Container:Kl});function Nr(e){return Fe([e.systemLabel,e.label,e.placeholder,e.blockId])}function ha(e){return e.replace(/>\s+</g,"><")}function Jl({flatpickr:e,value:t,config:n}){let s;try{s=e.parseDate(t)}catch(a){s=void 0}return{blockID:n.blockId,data:{hasData:!!t,isValidDate:s!==void 0,isRequired:n.isRequired}}}const hn={};async function Zl({root:e,url:t}){const n=e instanceof ShadowRoot?e:e.head;return t in hn?hn[t]:n.querySelector(`link[href="${t}"]`)?Promise.resolve():(hn[t]=new Promise((a,r)=>{try{const i=document.createElement("link");i.href=t,i.rel="stylesheet",i.addEventListener("load",()=>{a()}),i.addEventListener("error",()=>{r(new Error(`Failed to load the stylesheet ${t}`))}),n==null||n.appendChild(i)}catch(i){r(i)}}),hn[t])}const Xl="https://libs.heyflow.cloud/flatpickr.min.css",Ql=async()=>(await te(async()=>{const{default:e}=await import("./flatpickr.chunk-B5M-wKWU.js").then(t=>t.i);return{default:e}},[])).default;function ec({config:e,onCalendarToggle:t,handleChange:n,initialValue:s,value:a}){const r=y.useRef(null),i=y.useRef(null);return y.useEffect(()=>{const o=async()=>{const{root:c}=e;if(!r.current||c===void 0)return;const d=async()=>{const u=await Ql(),{German:m}=await te(async()=>{const{German:p}=await import("./flatpickr.chunk-B5M-wKWU.js").then(f=>f.d);return{German:p}},[]),h={locale:E(v({},document.documentElement.lang==="de"?m:{}),{firstDayOfWeek:e.startWeekOnMonday?1:0}),mode:e.range?"range":"single",static:c instanceof ShadowRoot,defaultDate:s,dateFormat:e.dateFormat.replace(/YYYY/g,"Y").replace(/MM/g,"m").replace(/DD/g,"d"),onClose:()=>{t(!1)},onOpen:()=>{t(!0)},onChange:(p,f)=>{n(f,u)}};e.workdaysOnly&&(h.enable=[p=>p.getDay()>=1&&p.getDay()<=5]),e.fromToday&&(h.minDate="today"),e.tillToday&&(h.maxDate="today"),r.current&&(i.current=u(r.current,h))};try{await Zl({root:c,url:Xl}),await d()}catch(u){console.error("Failed to load flatpickr stylesheet",u)}};return i.current||o(),()=>{i.current&&(i.current.destroy(),i.current=null)}},[e,t,n,s]),y.useEffect(()=>{var o;(o=i.current)==null||o.setDate(a)},[a]),r}function tc({dataInitialRequired:e,dataLabel:t,dataSensitive:n,dataTfSensitive:s,dataVariable:a,id:r,label:i,name:o,placeholder:c,dataRequired:d,wrapperStyle:u,labelType:m,prefixSvg:h,suffixSvg:p,errorMessage:f,withInfo:g,info:b,flatpickrConfig:S,handleChange:w,value:k,hasError:C,initialValue:T}){const[V,M]=y.useState(!1),[_,N]=y.useState(!1),$=!!k,W=ec({config:S,onCalendarToggle:N,handleChange:w,initialValue:T,value:k});return l.jsxs("div",{style:u,className:"date-picker-block-body",children:[i&&m!=="floating"&&m!=="floating-inline"?l.jsx("label",{htmlFor:r,children:i}):null,l.jsxs("div",{className:"date-picker-block-content",children:[l.jsxs("div",{className:D("input",{"has-prefix":h,"has-suffix":p,error:C}),children:[l.jsxs("div",{className:"decorators-wrapper",children:[h?l.jsx("div",{className:"input-decorator input-prefix input-prefix-svg",dangerouslySetInnerHTML:{__html:ha(h)}}):null,l.jsxs("div",{className:"input-wrapper",children:[l.jsx("input",{ref:W,id:r,className:"date-picker-input",placeholder:c,"data-required":d,"data-initial-required":e,"data-sensitive":n,"data-tf-sensitive":s,"data-type":"input","data-blocktype":"date-picker","data-is-react-input":"true","data-label":t,"data-selector":"input","data-variable":a,"aria-invalid":C?"true":"false",name:o,value:k,onFocus:()=>M(!0),onBlur:()=>M(!1),onChange:()=>{}}),(m==="floating"||m==="floating-inline")&&l.jsx($s,{id:r,label:i,labelType:m,isOffset:$||V||_})]}),p?l.jsx("div",{className:"input-decorator input-suffix input-suffix-svg",dangerouslySetInnerHTML:{__html:ha(p)}}):null]}),l.jsxs("div",{className:"error-box",children:[l.jsx(Xt,{}),l.jsx("span",{className:"text",children:f})]}),g&&l.jsx("label",{className:"label",children:b})]}),l.jsx("input",{id:`${r}-format`,type:"hidden",name:`${o}-format`,"data-type":"input","data-label":`${t} [format]`,"data-sensitive":n,"data-tf-sensitive":s,value:S.dateFormat})]})]})}const nc=({config:e,handleValidation:t})=>{var c;const{client:n}=fe(),{state:s,setState:a}=Oe("datePicker",e.blockId,t),r=y.useRef(s.defaultValue),i=y.useCallback((d,u)=>{a({value:d}),n==null||n.sendLog(v({message:"Date picker changed"},Jl({flatpickr:u,value:d,config:e})))},[a,e,n]),o=y.useMemo(()=>({range:e.range,workdaysOnly:e.workdaysOnly,fromToday:e.fromToday,tillToday:e.tillToday,startWeekOnMonday:e.startWeekOnMonday,dateFormat:e.dateFormat,root:n==null?void 0:n.root}),[e,n]);return l.jsx(tc,{initialValue:r.current,value:s.value,dataInitialRequired:e.isRequired?"true":void 0,dataRequired:e.isRequired?"true":void 0,dataLabel:Nr(e),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataVariable:(c=e.variableName)!=null?c:"",id:`date-picker-input-${e.blockId}`,label:e.label,name:e.blockId,placeholder:e.placeholder,wrapperStyle:P(e.legacySpacingStyle),labelType:e.labelType,suffixSvg:e.suffixSvg,prefixSvg:e.prefixSvg,errorMessage:e.errorMessage,withInfo:e.withInfo,info:e.info,flatpickrConfig:o,handleChange:i,hasError:s.hasError})};ir.extend(fo);const sc=(e,t)=>{var n;return{name:Nr(e),value:t.state.value,isSensitive:(n=e.isSensitive)!=null?n:!1,dateFormat:e.dateFormat}},ac=(e,t)=>{var n,s;return t.value?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"input",values:[{answer:t.value,name:t.value}],variable:(n=e.variableName)!=null?n:e.blockId},{id:`${e.blockId}-format`,label:`${t.name} [format]`,name:`${e.blockId}-format`,sensitive:t.isSensitive,type:"input",values:[{answer:t.dateFormat,name:t.dateFormat}],variable:`${(s=e.variableName)!=null?s:e.blockId}-format`}]:[]},rc=e=>H.object({value:H.string().min(e.isRequired?1:0,{message:"Date value is required"})}),ic=({result:e,element:t,blockState:n})=>{if(!t.querySelector('[data-selector="input"]'))throw new Error("Elements not defined");n.setState({hasError:!e.success})},oc=(e,t)=>{t.setState({value:""})},lc=({config:e,params:t,restoredData:n})=>{const s=e.variableName&&t.get(e.variableName),a=n==null?void 0:n.value,r=s||a,i={value:"",hasError:!1,defaultValue:r!=null?r:""};return r?[i,{value:r}]:i},cc=(e,t,{purifyXML:n})=>{var s,a;return E(v(v({},re(e)),e),{isRequired:e.required,legacySpacingStyle:ce(e),variableName:e.variable,placeholder:(s=e.placeholder)!=null?s:"",isSensitive:e.sensitive,dateFormat:(a=e.dateFormat)!=null?a:"YYYY-MM-DD",outerClassName:e.containerClass,outerStyle:P(e.style),prefixSvg:e.prefixSvg?n(e.prefixSvg):void 0,suffixSvg:e.suffixSvg?n(e.suffixSvg):void 0})},dc=(e,t)=>{if(t.variableName)return{[t.variableName]:e.value,[`${t.variableName}_unix`]:ir(e.value,t.dateFormat).unix()}},uc=({blockState:e})=>e.state.value,mc=({blockState:e,value:t})=>{e.setState({value:t})},hc=({children:e,config:t})=>l.jsx("div",{className:D("block-content date-picker-block",t.outerClassName,{"with-floating-label":t.labelType==="floating","with-floating-label floating-label-inline":t.labelType==="floating-inline"}),style:t.outerStyle,id:`date-picker-${t.blockId}`,children:e}),fc=E(v({},ae()),{getResponseData:sc,getSubmittableResponseData:ac,getValidationSchema:rc,onValidate:ic,reset:oc,getConfig:cc,Container:nc,getInitialState:lc,getVariableState:dc,Wrapper:hc,getValue:uc,setValue:mc}),pc=({images:e,rootStorageUrl:t})=>{const n=Math.max(...e.map(s=>s.size));return l.jsx(l.Fragment,{children:e.map(s=>l.jsx("source",{srcSet:`${t}/${s.dest} ${s.size}w`,type:`image/${s.extension}`,media:s.size!==n?`(max-width: ${s.size}px)`:void 0},s.dest))})},Ke=y.forwardRef(({images:e,svg:t,filename:n,alt:s,style:a,className:r,id:i},o)=>{const{constants:c}=fe(),[d,u]=y.useState(0),m=y.useMemo(()=>t?`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`:(n==null?void 0:n.match(/^https?:\/\//))!==null?n:`${c.ASSETS_URL}/assets/${n}`,[c.ASSETS_URL,n,t]),h=y.useMemo(()=>!r||r.includes("needs-eager")?"eager":"lazy",[r]),p=()=>{u(d+1)},f=e==null?void 0:e.slice(d);return l.jsxs("picture",{children:[f!=null&&f.length?l.jsx(pc,{images:f,rootStorageUrl:c.FLOWS_ASSETS_BUCKET_BASEURL}):void 0,l.jsx("img",{onError:p,loading:h,src:m,alt:s!=null?s:"",style:a,className:r,id:i,ref:o})]})}),Ps=()=>l.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M12 2V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"1s",repeatCount:"indefinite"})}),l.jsx("path",{d:"M12 18V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M4.93 4.93L7.76 7.76",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M16.24 16.24L19.07 19.07",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M2 12H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M18 12H22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M4.93 19.07L7.76 16.24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M16.24 7.76L19.07 4.93",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"})]});function gc(e){var C;const{blockID:t,action:n,destination:s,noValidate:a,className:r,buttonStyle:i,label:o,labelClass:c,showLine2:d,line2:u,contentClass:m,labelStyle:h,svg:p,emoji:f,image:g,images:b,wrapperStyle:S,dataAttributes:w}=e,k=T=>T?T.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+</g,"><").trim():"";return l.jsx("div",{style:S,children:l.jsxs("button",E(v({id:t,style:i,className:`generic-button ${r}`,"data-type":"generic-button","data-attr":w,"data-action":n,"data-destination":s},a?{"data-no-validate":!0}:{}),{children:[l.jsxs("div",{className:"status-indicator",children:[l.jsx("div",{className:"icon-check-mark",children:l.jsx(js,{})}),l.jsx("div",{className:"icon-x-mark",children:l.jsx(Xt,{})}),l.jsx("div",{className:"icon-spinner",children:l.jsx(Ps,{})})]}),l.jsxs("div",{className:`content ${m}`,style:h,children:[(o!=null?o:d&&u)&&l.jsxs("div",{className:`label-container ${c}`,children:[o&&l.jsx("span",{className:"label",children:o}),d&&u&&l.jsx("span",{className:"line2",children:u})]}),((C=p!=null?p:f)!=null?C:g)&&l.jsx("span",{className:"graphic",children:p?l.jsx("span",{style:{width:"inherit",height:"inherit"},dangerouslySetInnerHTML:{__html:k(p)}}):f?l.jsx("div",{className:"emoji",children:f}):l.jsx(Ke,{images:b,filename:g,alt:"generic button image"})})]})]}))})}const vc=({config:e})=>{const t=String.fromCharCode(parseInt("00A0",16)),n=e.attributesString.replaceAll("&nbsp;",t);return l.jsx(gc,{blockID:e.blockId,wrapperStyle:P(e.legacySpacingStyle),buttonStyle:P(e.legacyStyle),className:e.class,action:e.action,destination:e.destination,noValidate:e.noValidate,contentClass:e.contentClass,labelStyle:P(e.legacyLabelStyle),label:e.label,showLine2:e.showLine2,line2:e.line2,labelClass:e.labelClass,svg:e.svg,image:e.image,images:e.images,emoji:e.emoji,dataAttributes:n})},fa=e=>e?e.replace(/[\n\r\t]/g," ").trim():"",yc=(e,t,{purifyXML:n})=>E(v(v({},re(e)),e),{label:fa(e.label),line2:fa(e.line2),legacySpacingStyle:ce(e),legacyStyle:e.style,class:e.class,legacyLabelStyle:e.labelStyle,svg:e.svg?n(e.svg):void 0,attributesString:Wn(e),outerClassName:e.containerClass}),bc=({children:e,config:t})=>l.jsx("div",{className:D("block-content generic-button-block",t.outerClassName),id:`generic-button-block-${t.blockId}`,children:e}),wc=E(v({},ae()),{Container:vc,getConfig:yc,Wrapper:bc});function Sc(e){if(typeof window!="undefined"&&typeof TextEncoder!="undefined"){const t=new TextEncoder().encode(e),n=String.fromCharCode(...t);return btoa(n)}else return Buffer.from(e,"utf-8").toString("base64")}function kc(e){if(typeof window!="undefined"&&typeof TextDecoder!="undefined"){const t=atob(e),n=Uint8Array.from(t,s=>s.charCodeAt(0));return new TextDecoder().decode(n)}else return Buffer.from(e,"base64").toString("utf-8")}const Ec=po.memo(({config:e})=>l.jsx("div",{dangerouslySetInnerHTML:{__html:kc(e.content)}}),()=>!0),xc=e=>E(v({},re(e)),{content:Sc(e.content)}),Ic=({children:e,config:t})=>l.jsx("div",{className:"block-content html-block",id:`html-block-block-${t.blockId}`,children:e}),Cc=E(v({},ae()),{getConfig:xc,Container:Ec,Wrapper:Ic}),Lc=y.forwardRef(({alt:e,filename:t,href:n,images:s,isLink:a,styles:r,svg:i,target:o,wrapperStyles:c},d)=>{const u=l.jsx(Ke,{alt:e,filename:t,images:s,style:r,svg:i,ref:d});return l.jsx("div",{className:"image-wrapper",style:c,children:a?l.jsx("a",{href:n,target:o,children:u}):u})});function Nc(e){var o;const t=(o=e.outerClassName)==null?void 0:o.includes("header-avatar"),{constants:n,client:s}=fe(),a=y.useRef(0),r=y.useRef(null),i=y.useRef(null);return y.useEffect(()=>{if(!t)return;i.current&&(r.current=i.current.closest(".header-avatar"));function c(){const p=parseInt(n.STYLES["width-mobile"].toString())+20;s&&(a.current=s.rootElementWidth<=p?parseInt(n.STYLES["header-avatar-size-mobile"].toString()):parseInt(n.STYLES["header-avatar-size"].toString()))}function d(){var _,N;const p=s==null?void 0:s.getHeaderOffsetHeight();if(!p)return!1;const f=(N=(_=s==null?void 0:s.getScrollableContentWrapper())==null?void 0:_.scrollTop)!=null?N:0,g=5,b=.5,S=1,w=a.current,k=Math.min(p-2*g,w*.75)-S,C=p-f*b,T=p-k/2-g,V=1-(C-T)/(p-T),M=w-V*(w-k);return i.current&&(i.current.style.height=Math.max(k,M)+"px",i.current.style.width=Math.max(k,M)+"px"),r.current&&(r.current.style.top=Math.max(T,C)+"px",r.current.style.height="auto",r.current.style.opacity="1"),!0}c();function u(){c(),d()}const m=s==null?void 0:s.getScrollableContent();m==null||m.addEventListener("scroll",d),s==null||s.addEventListener("resize",u);const h=setInterval(()=>{const p=d();(s&&!s.hasHeader()||p)&&clearInterval(h)},100);return()=>{clearInterval(h),s==null||s.removeEventListener("resize",u),m==null||m.removeEventListener("scroll",d)}},[s,n.STYLES,t]),i}const _c=({config:e})=>{var n,s,a,r,i;const t=Nc(e);return l.jsx(Lc,{alt:(n=e.alt)!=null?n:"",filename:e.filename,href:e.href,images:(s=e.images)!=null?s:[],isLink:(a=e.isLink)!=null?a:!1,styles:(r=P(e.styles))!=null?r:{},svg:e.svg,target:e.target,wrapperStyles:(i=P(e.wrapperStyles))!=null?i:{},ref:t})},Ac=e=>{var n,s,a,r,i;const t=(n=e.wrapperStyle)!=null?n:"";return E(v(v({},re(e)),e),{href:e.linkHref,isLink:e.asLink,styles:zo(e),wrapperStyles:t+ce(e),target:(s=e.linkTarget)!=null?s:"_blank",svg:(a=e.svg)!=null?a:void 0,outerClassName:e.containerClass,width:(r=e.width)==null?void 0:r.toString(),height:(i=e.height)==null?void 0:i.toString()})},Tc=({children:e,config:t})=>l.jsx("div",{className:D("block-content image-block",t.outerClassName),id:`image-block-${t.blockId}`,style:{width:t.width,height:t.height},children:e}),Rc=E(v({},ae()),{getConfig:Ac,Container:_c,Wrapper:Tc}),$c=()=>l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"})}),_r=({width:e="20",height:t="20",style:n})=>l.jsx("svg",{width:e,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,children:l.jsx("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM14.7 13.3L13.3 14.7L10 11.4L6.7 14.7L5.3 13.3L8.6 10L5.3 6.7L6.7 5.3L10 8.6L13.3 5.3L14.7 6.7L11.4 10L14.7 13.3Z",fill:"currentColor"})});function jc({enabled:e,options:t=[],onSelect:n,customFetchFn:s,inputRef:a}){const r=y.useRef(null),i=y.useRef(null),o=y.useRef(null),c=y.useMemo(()=>t.map(u=>({label:u})),[t]),d=y.useCallback(u=>async(m,h)=>{if(!u){const f=m.toLowerCase(),g=c.filter(b=>{var S;return(S=b.label)==null?void 0:S.toLowerCase().startsWith(f)});h(g);return}const p=await u(m);h(p)},[c]);return y.useEffect(()=>{o.current=d(s)},[d,s]),y.useEffect(()=>{if(!e)return;const u=()=>{const m=a.current;!m||!i.current||(r.current=Vn({input:m,fetch:(h,p,...f)=>{if(o.current)return o.current(h,p,...f)},onSelect:h=>{var p;n==null||n((p=h.label)!=null?p:"")},click:h=>h.fetch(),className:"autocomplete-list",debounceWaitMs:200,disableAutoSelect:!0,container:i.current,customize:(h,p,f,g)=>{f.style.visibility="initial",f.style.top="initial",f.style.left="0",f.style.maxHeight="300px"}}))};r.current||u()},[a,n,e]),y.useEffect(()=>()=>{var u;(u=r.current)==null||u.destroy(),r.current=null},[]),i}function Ar(e){const[t,n]=y.useState(void 0);return y.useEffect(()=>{e==="cleave"&&te(()=>import("./cleave.chunk-DBIF9Tac.js").then(s=>s.c),[]).then(n)},[e]),t}const pa=["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop","focusout"];function Pc(e,t){y.useEffect(()=>{const n=e.current;if(!n||!t)return;const s=a=>{const r=a.target;t.test(r.value)?(r.oldValue=r.value,r.oldSelectionStart=r.selectionStart,r.oldSelectionEnd=r.selectionEnd):Object.prototype.hasOwnProperty.call(r,"oldValue")?(r.value=r.oldValue,r.oldSelectionStart!==null&&r.oldSelectionEnd!==null&&r.setSelectionRange(r.oldSelectionStart,r.oldSelectionEnd)):r.value=""};return pa.forEach(a=>{n.addEventListener(a,s)}),()=>{pa.forEach(a=>{n.removeEventListener(a,s)})}},[e,t])}const Tr={"phone-number-de":{type:"libphonenumber",options:{phoneRegionCode:"DE"}},"phone-number-us":{type:"libphonenumber",options:{phoneRegionCode:"US"}},creditCard:{type:"cleave",formatter:"creditCard"},date:{type:"cleave",formatter:"date",options:{delimiter:".",datePattern:["d","m","Y"]}},"date-slash":{type:"cleave",formatter:"date",options:{delimiter:"/",datePattern:["d","m","Y"]}},"date-slash-reverse":{type:"cleave",formatter:"date",options:{delimiter:"/",datePattern:["Y","m","d"]}},"date-us-slash":{type:"cleave",formatter:"date",options:{delimiter:"/",datePattern:["m","d","Y"]}},"date-us-dot":{type:"cleave",formatter:"date",options:{delimiter:".",datePattern:["m","d","Y"]}},"date-us-dash":{type:"cleave",formatter:"date",options:{delimiter:"-",datePattern:["m","d","Y"]}},dateReverse:{type:"cleave",formatter:"date",options:{delimiter:"-",datePattern:["Y","m","d"]}},months:{type:"cleave",formatter:"date",options:{delimiter:"/",datePattern:["m","y"]}},"months-year":{type:"cleave",formatter:"date",options:{delimiter:"/",datePattern:["m","Y"]}},time:{type:"cleave",formatter:"time",options:{timePattern:["h","m"]}},numeral:{type:"cleave",formatter:"numeral"},numeralDot:{type:"cleave",formatter:"numeral",options:{numeralDecimalMark:",",delimiter:"."}},"only-numbers":{type:"inputFilter",regExp:/^\d*$/},"only-letters":{type:"inputFilter",regExp:/^[\p{Letter}\p{Mark}]*$/u},"letters-and-numbers":{type:"inputFilter",regExp:/^[\p{Letter}\p{Mark}\p{Number}]*$/u},"zip-code-de":{type:"inputFilter",regExp:/^\d{0,5}$/,pattern:"^\\d{5,5}$"}};function Bc(e){const[t,n]=y.useState(void 0);return y.useEffect(()=>{e==="libphonenumber"&&te(()=>import("./libphone.chunk-CVLhGutd.js").then(s=>s.i),[]).then(n)},[e]),t}function Mc(e,t){const n=e?Tr[e]:void 0,s=Ar(n==null?void 0:n.type),a=Bc(n==null?void 0:n.type);s&&(n==null?void 0:n.type)==="cleave"&&e==="numeral"&&(n.options={numeralThousandsGroupStyle:s.NumeralThousandGroupStyles.THOUSAND});const r=y.useRef(null);return y.useEffect(()=>{if(t!=null&&t.current)return s==null?void 0:s.registerCursorTracker({input:t.current,delimiter:""})},[s,t]),{formatValue:y.useCallback(o=>{var c;if(!n)return o;if(a&&n.type==="libphonenumber"){(c=r.current)!=null||(r.current=new a.AsYouType(n.options.phoneRegionCode));try{return r.current.reset(),r.current.input(o)}catch(d){return o}}if(s&&n.type==="cleave"){if(n.formatter==="creditCard")return s.formatCreditCard(o);if(n.formatter==="date")return s.formatDate(o,n.options);if(n.formatter==="time")return s.formatTime(o,n.options);if(n.formatter==="numeral")return s.formatNumeral(o,n.options)}return o},[s,a,n])}}function Rr(e){return Fe([e.systemLabel,e.label,e.placeholder,e.blockId])}function ga(e){return e.replace(/>\s+</g,"><")}function Dc({required:e,dataInitialRequired:t,dataLabel:n,dataSensitive:s,dataTfSensitive:a,dataVariable:r,id:i,label:o,labelType:c,name:d,placeholder:u,wrapperStyle:m,prefix:h,prefixIcon:p,prefixSvg:f,suffix:g,suffixIcon:b,suffixSvg:S,errorMessage:w,withInfo:k,info:C,handleChange:T,handleBlur:V,value:M,disabled:_,type:N,pattern:$,maxLength:W,dataTrim:ee,autoFocus:A,nativeAutocomplete:ie,autocomplete:ne,autocompleteOptions:I,inputClassName:X,mask:B,autocompleteOptionsFn:he}){const[se,Q]=y.useState(!1),oe=!!M,L=y.useRef(null),{formatValue:R}=Mc(B,L),O=y.useCallback(we=>{const Le=R(we);T(Le)},[T,R]),le=jc({enabled:!!ne,options:I,onSelect:O,customFetchFn:he,inputRef:L}),Y=B?Tr[B]:void 0,$e=Ar(Y==null?void 0:Y.type);$e&&(Y==null?void 0:Y.type)==="cleave"&&B==="numeral"&&(Y.options={numeralThousandsGroupStyle:$e.NumeralThousandGroupStyles.THOUSAND});const pe=(Y==null?void 0:Y.type)==="inputFilter"?{pattern:Y.pattern,regExp:Y.regExp}:{};return Pc(L,pe.regExp),l.jsxs("div",{style:m,children:[o?l.jsx("label",{htmlFor:i,children:o}):null,l.jsxs("div",{className:D("input",{"has-value":oe,"has-prefix":!!h||!!p||!!f,"has-suffix":!!g||!!b||!!S}),children:[l.jsxs("div",{className:"input-inner",children:[f?l.jsx("div",{className:"input-decorator input-prefix input-prefix-svg",dangerouslySetInnerHTML:{__html:ga(f)}}):p?l.jsx("div",{className:"input-decorator input-prefix input-prefix-icon",children:l.jsx("i",{className:"material-icons",children:p})}):null,h?l.jsx("div",{className:"input-decorator input-prefix",children:l.jsx("span",{children:h})}):null,l.jsxs("div",{className:"input-wrapper",children:[l.jsx("input",{ref:L,type:N,id:i,"data-type":"input","data-label":n,required:e,"data-initial-required":t,"data-sensitive":s,"data-tf-sensitive":a,"data-variable":r,"data-is-react-input":"true",name:d,placeholder:u,pattern:$!=null?$:pe.pattern,maxLength:W,value:M,disabled:_,onChange:we=>O(we.target.value),onFocus:()=>Q(!0),onBlur:we=>{Q(!1),V==null||V(we)},autoFocus:A,"native-autocomplete":ie,"data-trim":ee,"data-autocomplete":ne,"data-selector":"input",className:X}),(c==="floating"||c==="floating-inline")&&l.jsx($s,{id:i,label:o,labelType:c,isOffset:oe||se}),ne?l.jsx("div",{id:`${i}-autocomplete-list`,ref:le}):null]}),g?l.jsx("div",{className:"input-decorator input-suffix",children:l.jsx("span",{children:g})}):null,S?l.jsx("div",{className:"input-decorator input-suffix input-suffix-svg",dangerouslySetInnerHTML:{__html:ga(S)}}):b?l.jsx("div",{className:"input-decorator input-prefix input-suffix-icon",children:l.jsx("i",{className:"material-icons",children:b})}):null,l.jsxs("div",{className:"status-indicator",children:[l.jsx("div",{className:"icon-check-mark",children:l.jsx($c,{})}),l.jsx("div",{className:"icon-x-mark",children:l.jsx(_r,{})}),l.jsx("div",{className:"icon-spinner",children:l.jsx(Ps,{})})]})]}),l.jsxs("div",{className:"error-box",children:[l.jsx(Xt,{}),l.jsx("span",{className:"text",children:w})]}),k&&l.jsx("label",{className:"info-label",children:C})]})]})}const Vc=({config:e,handleValidation:t})=>{var u;const{state:n,setState:s}=Oe("input",e.blockId),a=n.value,{client:r}=fe(),{outerClassName:i}=e,o=y.useMemo(()=>{if(i!=null&&i.includes("floating-label-inline"))return"floating-inline";if(i!=null&&i.includes("with-floating-label"))return"floating"},[i]),c=m=>{s({value:m}),t()},d=y.useCallback(()=>{e.trim&&s({value:a==null?void 0:a.trim()}),r==null||r.sendLog({message:"Input blurred",blockID:e.blockId,data:{hasData:!!a,isEmptyString:!(a!=null&&a.trim()),isRequired:e.isRequired}})},[e,a,r,s]);return l.jsx(Dc,{inputClassName:e.legacyClass,dataInitialRequired:e.isRequired?"true":void 0,dataLabel:Rr(e),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataVariable:(u=e.variableName)!=null?u:"",handleChange:c,id:e.blockId,label:e.label,name:e.blockId,placeholder:e.placeholder,required:e.isRequired?!0:void 0,value:a!=null?a:"",wrapperStyle:P(e.legacySpacingStyle),prefix:e.prefix,prefixIcon:e.prefixIcon,prefixSvg:e.prefixSvg,suffix:e.suffix,suffixIcon:e.suffixIcon,suffixSvg:e.suffixSvg,errorMessage:e.errorMessage,withInfo:e.withInfo,info:e.info,disabled:e.disabled,type:e.inputType,pattern:e.pattern,maxLength:e.maxLength,mask:e.mask,dataTrim:e.trim,autoFocus:r!=null&&r.isInPreviewMode?void 0:e.autoFocus,nativeAutocomplete:e.nativeAutocomplete,autocomplete:e.autocomplete,autocompleteOptions:e.autocompleteOptions,labelType:o,handleBlur:d,autocompleteOptionsFn:e.autocompleteOptionsFn})},Oc=(e,t)=>{var n;return{name:Rr(e),value:(n=t.state.value)!=null?n:"",isSensitive:e.isSensitive}},Fc=(e,t)=>{var n;return t.value?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"input",values:[{answer:t.value,name:t.value}],variable:(n=e.variableName)!=null?n:e.blockId}]:[]},Uc=e=>H.object({value:H.string().trim().refine(t=>{var i;const{pattern:n,isRequired:s}=e,a=!!(t.length&&n&&!((i=new RegExp(n))!=null&&i.test(t))),r=!!s&&!t.length;return!a&&!r},{message:"Invalid input value"})}),Wc=({result:e,element:t})=>{const n=t.querySelector('[data-selector="input"]');if(!n)throw new Error("Elements not defined");n.setCustomValidity(e.success?"":e.error.message)},Hc=(e,t)=>{t.setState({value:""})},qc=({config:e,params:t,restoredData:n})=>{var o;const s=e.variableName&&t.get(e.variableName),a=n==null?void 0:n.value,r=(o=e.defaultValue)!=null?o:"",i=s||a;return i?[{value:r},{value:i}]:{value:r}},zc=(e,t,{purifyXML:n})=>{var s,a;return E(v(v({},re(e)),e),{maxLength:isNaN(Number(e.maxlength))?void 0:Number(e.maxlength),legacySpacingStyle:ce(e),blockClass:e.blockClass,isRequired:e.required,placeholder:(s=e.placeholder)!=null?s:"",isSensitive:(a=e.sensitive)!=null?a:!1,variableName:e.variable,legacyClass:e.inputClass,autocompleteOptions:e.datalist,defaultValue:e.value,outerClassName:e.class,outerStyle:P(e.style),prefixSvg:e.prefixSvg?n(e.prefixSvg):void 0,suffixSvg:e.suffixSvg?n(e.suffixSvg):void 0})},Kc=(e,t)=>{if(t.variableName)return{[t.variableName]:t.inputType==="number"?Number(e.value):e.value}},Gc=({blockState:e})=>e.state.value,Yc=({blockState:e,value:t})=>{e.setState({value:t})},Jc=({configState:e})=>({setAutocompleteOptionsFn:t=>{e.setConfig({autocompleteOptionsFn:t})}}),Zc=({children:e,config:t})=>l.jsx("div",{className:D("block-content input-box input-block",t.outerClassName),id:`${t.blockId}-container`,style:t.outerStyle,children:e}),Xc=E(v({},ae()),{getResponseData:Oc,getSubmittableResponseData:Fc,getValidationSchema:Uc,onValidate:Wc,reset:Hc,getConfig:zc,Container:Vc,getInitialState:qc,getVariableState:Kc,Wrapper:Zc,getValue:Gc,setValue:Yc,getCustomMethods:Jc});function Qc({options:e,wrapperStyle:t}){return l.jsx("div",{style:t,children:l.jsx("ul",{className:"link-list",children:e.map(({href:n,label:s,target:a},r)=>l.jsx("li",{children:l.jsx("a",{href:n,target:a,rel:a==="_blank"?"noreferrer":void 0,"aria-label":a==="_blank"?`${s||"Redirect"} (opens in a new tab)`:void 0,children:s})},`${n}-${s}-${r}`))})})}const ed=({config:e})=>l.jsx(Qc,{options:e.options,wrapperStyle:P(e.legacyWrapperStyle)}),td=e=>{var t;return E(v({},re(e)),{legacyWrapperStyle:ce(e),options:(t=e.options)!=null?t:[],outerClassName:e.class})},nd=({children:e,config:t})=>l.jsx("div",{className:D("block-content link-list-block",t.outerClassName),id:`link-list-block-${t.blockId}`,children:e}),sd=E(v({},ae()),{getConfig:td,Container:ed,Wrapper:nd});function ad({options:e,svg:t,icon:n,wrapperStyle:s,listStyle:a,iconClassName:r,iconStyle:i}){return l.jsx("div",{style:s,children:l.jsx("ul",{className:"check-list",style:a,children:e.map(({id:o,label:c})=>l.jsxs("li",{children:[t?l.jsx("div",{className:`check-list-svg-container ${r}`,style:i,dangerouslySetInnerHTML:{__html:t}}):n&&l.jsx("div",{className:`material-icons ${r}`,style:i,dangerouslySetInnerHTML:{__html:n}}),l.jsx("div",{className:"text",dangerouslySetInnerHTML:{__html:st(typeof c=="string"?c:c.content)}})]},o))})})}const rd=({config:e})=>l.jsx(ad,{options:e.options,svg:e.svg,icon:e.icon,wrapperStyle:P(e.legacyWrapperStyle),listStyle:P(e.legacyListStyle),iconClassName:e.legacyIconClass,iconStyle:P([e.legacyIconStyle,!e.legacyIconClass&&e.iconColor?`color: ${e.iconColor};`:""].join(""))}),id=(e,t,{draftToHTML:n,purifyXML:s})=>{var a;return E(v(v({},re(e)),e),{options:((a=e.options)!=null?a:[]).map(r=>{var i,o;return E(v({},r),{label:s(typeof r.label=="string"?r.label:n((o=(i=r.label)==null?void 0:i.content)!=null?o:""))})}),legacyWrapperStyle:ce(e),legacyListStyle:e.style,legacyIconClass:e.iconClass,legacyIconStyle:e.iconStyle,outerClassName:e.class,svg:e.svg?s(e.svg):void 0,icon:typeof e.icon=="string"?s(e.icon):e.icon})},od=({children:e,config:t})=>l.jsx("div",{className:D("block-content check-list-block",t.outerClassName),id:`check-list-block-${t.blockId}`,children:e}),ld=E(v({},ae()),{getConfig:id,Container:rd,Wrapper:od}),Bs=e=>{const{client:t}=fe();y.useEffect(()=>{const n=s=>{e(s.detail)};return t==null||t.addEventListener("navigation",n),()=>{t==null||t.removeEventListener("navigation",n)}},[t,e])},va=go((e,t)=>({timeouts:[],addTimeout:n=>e(s=>({timeouts:[...s.timeouts,n]})),clearTimeouts:()=>{for(const n of t().timeouts)clearTimeout(n);e({timeouts:[]})}})),ya=1e3;function cd(e){const{client:t}=fe(),n=y.useRef(""),[s,a]=y.useState("loading"),r=va(m=>m.addTimeout),i=va(m=>m.clearTimeouts),o=y.useCallback(()=>{t==null||t.requestNavigation({mode:"async",action:"next",duration:ya})},[t]),c=y.useCallback(m=>{t!=null&&t.getCurrentScreenId()&&(a("success"),m?m():o())},[o,t]),d=y.useCallback(()=>{a("error"),o()},[o]),u=y.useCallback(()=>{var h;if(!t)return;a("loading"),n.current||(n.current=t.getCurrentScreenId());const m=setTimeout(()=>{i(),n.current===t.getCurrentScreenId()&&c(()=>{var p;e.disabled!==!0&&t.requestNavigation({mode:"async",action:(p=e.action)!=null?p:"next",destination:e.destination,options:e,duration:ya})})},(h=e.timeout)!=null?h:1e3);r(m)},[e,c,t,r,i]);return Bs(m=>{n.current===m.screenID&&u()}),y.useEffect(u,[u]),{status:s,success:c,error:d}}function $r(e){const[t,n]=y.useState();return y.useEffect(()=>{e&&te(()=>import("./lottie.chunk-ofuysGLL.js").then(s=>s.i),[]).then(n)},[e]),t}const dd=e=>e.endsWith(".json")||e.endsWith(".lottie");function ud({id:e,customLoaderUrl:t,wrapperStyle:n,status:s}){const a=dd(t!=null?t:""),r=$r(a);return l.jsx("div",{style:n,children:l.jsx("div",{id:e,className:D({"circle-loader":!t,"circle-loader-load-success":s==="success","circle-loader-load-error":s==="error"}),children:t?l.jsx(l.Fragment,{children:a&&r?l.jsx(r.DotLottieReact,{src:t,autoplay:!0,loop:!0}):l.jsx("img",{src:t,alt:"Loading"})}):l.jsx("div",{className:"circle-loader-checkmark draw"})})})}const md=({config:e})=>{const{status:t}=cd(e),{constants:n}=fe();return l.jsx(ud,{id:e.blockId,status:t,wrapperStyle:P(e.legacySpacingStyle),customLoaderUrl:e.customFile?`${n.ASSETS_URL}/assets/${e.filename}`:void 0})},hd=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),outerClassName:e.class,outerStyle:P(e.style),options:Wn(e),src:e.src,hide:e.hide}),fd=({children:e,config:t})=>{var n,s;return l.jsx("div",{style:t.outerStyle,className:D("block-content loader-block",t.outerClassName),id:`loader-block-${t.blockId}`,"data-id":t.blockId,"data-timeout":t.timeout,"data-action":t.action,"data-options":t.options,"data-lottie":(n=t.filename)!=null&&n.endsWith(".json")||(s=t.filename)!=null&&s.endsWith(".lottie")?"true":"false","data-src":t.src,children:t.hide?null:e})},pd=E(v({},ae()),{getConfig:hd,Container:md,Wrapper:fd});function gd(e){return/.svg#?/.test(e)?"svg-as-img":""}function vd({columnGap:e,gridTemplateColumns:t,height:n,options:s,spacingStyles:a,styles:r,wrapperClassName:i,wrapperStyles:o,isAnimated:c,speed:d}){return l.jsx("div",{className:c?"animate-scroll":"",style:v(v({},a),c&&d?{animationDuration:`${60-10*d}s`}:{}),children:[...Array(c?2:1)].map((u,m)=>l.jsx("div",{className:`logo-bar ${i}`,style:v(v(v(v({},o),e?{columnGap:`${e}px`}:{}),t?{gridTemplateColumns:`repeat(${t}, 1fr)`}:{}),n?{height:`${n}px`}:{}),children:s.map((h,p)=>{var f;return l.jsxs("div",{className:"logo-bar-image-wrapper",children:[h.image&&l.jsx(Ke,{alt:`Logo ${p+1}`,className:gd((f=h.image)!=null?f:""),filename:h.image,images:h.images,style:r}),h.svg&&l.jsx("img",{alt:`Logo ${p+1}`,src:`data:image/svg+xml;base64,${btoa(h.svg)}`,style:v({height:"100%",width:"100%"},r)})]},p)})},m))})}const yd=({config:e})=>{var t,n,s,a;return l.jsx(vd,{columnGap:e.columnGap,gridTemplateColumns:e.gridTemplateColumns,height:e.height,options:e.options,spacingStyles:(t=P(e.spacingStyles))!=null?t:{},styles:(n=P(e.styles))!=null?n:{},wrapperClassName:e.wrapperClassName,wrapperStyles:(s=P(e.wrapperStyles))!=null?s:{},isAnimated:e.isAnimated,speed:(a=e.speed)!=null?a:1})},bd=e=>{var t,n;return E(v(v({},re(e)),e),{spacingStyles:ce(e),gridTemplateColumns:e.columnsMobile,styles:e.imgStyle,wrapperClassName:e.class,wrapperStyles:e.style,options:(n=(t=e.options)==null?void 0:t.filter(s=>!!s))!=null?n:[],outerClassName:e.containerClass,outerStyle:P(e.containerStyle)})},wd=({children:e,config:t})=>l.jsx("div",{style:t.outerStyle,className:D("block-content logo-bar-block",t.outerClassName),id:`logo-bar-block-${t.blockId}`,children:e}),Sd=E(v({},ae()),{getConfig:bd,Container:yd,Wrapper:wd}),kd=e=>e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+</g,"><").trim(),jr=e=>{if(typeof e=="string")return e.replace(/\s/g,"_").replace(/[^-a-zA-Z0-9]/g,"_")},Ed=e=>or.filterXSS(e.trim(),{whiteList:{}}),xd=(e,t)=>{if(!t)return[];const n=e.get(t);return n===null?[]:n.split(",").map(Ed)},Id=e=>Fe([e.systemLabel,e.label,e.blockId]),ns=e=>Fe([e.systemLabel,e.label]),Cd=({config:e,params:t,restoredData:n})=>{var o;const s=xd(t,e.variableName),a=(o=n==null?void 0:n.values)!=null?o:[];let r=!1,i=!1;return e.options.forEach(c=>{s.includes(ns(c))&&(r=!0),a.find(d=>d.name===c.id)&&(i=!0)}),e.options.reduce((c,d)=>{const u=d.hasInput?"":ns(d);let m=!1;return r?m=s.includes(ns(d)):i?m=!!a.find(h=>h.name===d.id):m=!!(e.withPreselection&&(e.isMultiselect?d.isChecked:d.isSelected)),[...c,{id:d.id,label:u,isSelected:m,hasTextInputError:!1}]},[])},Ld=(e,t)=>{if(!e.match(/picture/))return"100%";const n=4,s=180,a=Math.ceil(t/n),r=Math.ceil(t/a);return`${s*r}px`},Nd=e=>/.svg#?/.test(e)?"svg-as-img":"",_d=(e,t)=>e.map(n=>E(v({},n),{hasInput:n.isInput,isChecked:n.checked,isSelected:n.selected,isImportant:n.important,isAutoRedirect:n.autoRedirect,svg:n.svg?t(n.svg):void 0,icon:n.icon?t(n.icon):void 0})),ba=(e,t)=>{let n="next",s="next";return t!=null&&t.nextScreen?(s=t.nextScreen,n="go"):e!=null&&e.nextScreen&&(s=e.nextScreen,n="go"),{action:n,destination:s}};function Ad({dataLabel:e,dataVariable:t,dataIsRequired:n,dataConditional:s,dataTracking:a,dataSensitive:r,dataTfSensitive:i,id:o,label:c,hideLabel:d,labelClassName:u,labelStyle:m,className:h,contentClassName:p,wrapperStyle:f,innerStyle:g,actions:b,options:S,isMultiselect:w,withText:k,numColumns:C,numColumnsMobile:T,isImageHeightFixed:V,imageObjectFit:M,imageHeight:_,imageMobileHeight:N,hasError:$}){const{constants:W}=fe(),ee=D("multiple-choice",h),A=g?v({},g):{},ie=$r(S.some(I=>!!I.lottie));ee.includes("mc-grid")&&(A.width=Ld(ee,S.length));const ne=$||S.some(I=>I.hasTextInputError);return l.jsxs("div",{style:f,children:[!d&&c!==void 0&&l.jsx("div",{className:D("multiple-choice-label",u),style:m,children:l.jsx("label",{className:"label block-label",children:c})}),b&&l.jsx("div",{className:"flex space-between",children:b.map(({label:I,action:X},B)=>l.jsx("div",{className:"button simple link",onClick:X,children:l.jsx("span",{className:"button-label",children:I})},B))}),l.jsxs("fieldset",{className:ee,children:[l.jsx("legend",{className:"visually-hidden",children:c}),l.jsx("div",{className:D("multiple-choice-inner",{[`multiple-choice-cols-${C}`]:C!==void 0,[`multiple-choice-mobile-cols-${T}`]:T!==void 0}),style:A,"aria-description":"Selecting an option will navigate to a new page",children:S.map((I,X)=>l.jsx("div",{className:"multiple-choice-option-container",children:l.jsx("div",{className:D("multiple-choice-option",{error:ne}),"hey-important":I.isImportant,children:l.jsxs("label",{onClick:I.onClick,children:[l.jsx("div",{className:"option-counter","aria-hidden":!0,children:X+1}),l.jsx("input",{id:I.id,name:o,type:w?"checkbox":"radio",checked:I.isSelected,value:I.id,required:!!n||void 0,"data-type":"multiple-choice","data-label":e,"data-variable":t,"data-is-react-input":"true","data-answer":I.dataAnswer,"data-event-name":I.dataEventName,"data-tracking":a,"data-sensitive":r,"data-tf-sensitive":i,"data-conditional":s,"data-initial-required":n,"data-action":I.dataAction,"data-destination":I.dataDestination,"data-priority":I.dataPriority,onKeyDown:I.onKeyDown,onChange:I.onChange}),l.jsxs("div",{className:D("option-content",p,I.contentClassName),children:[l.jsx("div",{className:D("selector-container",{"checkbox-selector":w,"radio-selector":!w}),children:w?l.jsx("span",{className:D("checkbox",I.iconClassName),children:l.jsx(js,{})}):l.jsx("span",{className:D("radio",I.iconClassName)})}),(I.svg||I.image||I.icon||I.emoji||I.lottie)&&l.jsx("div",{className:`${V?"image-custom-height":""} image-container`,style:{"--image-height":_?`${_}px`:"auto","--image-mobile-height":N?`${N}px`:"auto"},children:(()=>{var B;if(I.svg)return l.jsx("div",{className:"svg-container",role:"img","aria-label":I.label,dangerouslySetInnerHTML:{__html:I.svg}});if(I.image)return l.jsx(Ke,{images:I.images,filename:I.image,alt:I.label,className:`${V?M:""} ${Nd(I.image)}`});if(I.icon)return l.jsx("i",{className:(B=I.fontFamily)!=null?B:"material-icons",style:I.iconStyle,dangerouslySetInnerHTML:{__html:I.icon}});if(I.emoji)return l.jsx("div",{className:"emoji",children:I.emoji});if(I.lottie&&ie)return l.jsx(ie.DotLottieReact,{src:`${W.ASSETS_URL}/assets/${I.lottie}`,autoplay:!0,loop:!0})})()}),I.hasInput&&l.jsxs("div",{className:"input-container",children:[l.jsx("div",{className:"input",children:l.jsx("input",{id:`${I.id}-input`,className:D("multiple-choice-option-input",{error:I.hasTextInputError}),type:"text",name:`${I.id}-input`,placeholder:I.label,value:I.inputValue,onChange:I.handleOptionTextInputChange,onClick:B=>B.stopPropagation(),"data-type":"input","data-label":I.dataInputLabel,"data-related-element":I.dataRelatedElement,"data-sensitive":r,"data-tf-sensitive":r,"aria-label":"Add your own answer"})}),k&&I.text&&l.jsx("div",{className:"text",children:I.text})]}),!I.hasInput&&(I.label||k)&&l.jsxs("div",{className:"label-container",children:[I.label&&l.jsx("div",{className:"label",children:I.label}),k&&I.text&&l.jsx("div",{className:"text",children:I.text})]})]}),I.messageText?l.jsx("div",{className:"message",style:I.messageStyle,children:l.jsx("div",{className:"avatar",children:l.jsx("img",{})})}):l.jsx("div",{})]})})},I.id))})]})]})}const Td=({config:e,handleValidation:t})=>{const{client:n,isInlineBuildingMode:s}=fe(),{state:a,setState:r}=Oe("multipleChoice",e.blockId,()=>{var d;t(),e.enableTracking&&((d=n==null?void 0:n.dispatchHeyflowEvent)==null||d.call(n,{eventName:"heyflow-change"}))}),i=(d,u)=>{var m,h;if(e.enableTracking&&((m=n==null?void 0:n.dispatchHeyflowEvent)==null||m.call(n,{eventName:"heyflow-input-click",payload:{customEventName:jr(d.label),customEventLabel:d.label}})),n==null||n.sendLog({message:"Multiple choice clicked",blockID:d.id}),r(p=>({hasError:!1,values:p==null?void 0:p.values.map(f=>e.isMultiselect?f.id===d.id?E(v({},f),{isSelected:!f.isSelected,hasTextInputError:!1}):E(v({},f),{hasTextInputError:!1}):f.id===d.id?E(v({},f),{isSelected:!0,hasTextInputError:!1}):E(v({},f),{isSelected:!1,hasTextInputError:!1}))})),u&&!e.isMultiselect&&((h=e.isAutoRedirect)!=null?h:d.isAutoRedirect)){const{action:p,destination:f}=ba(e,d);n==null||n.requestNavigation({mode:"sync",action:p,destination:f})}},o=(d,u)=>{r(m=>({values:m==null?void 0:m.values.map(h=>h.id!==d.id?h:E(v({},h),{label:u,hasTextInputError:!1}))}))},c=e.options.map(d=>{var p;const u=a.values.find(f=>f.id===d.id);if(!u){if(!s)throw new Error("Expect a block state entry for every option of the multiple choice block.");return null}const{action:m,destination:h}=ba(e,d);return{dataAnswer:d.systemLabel||d.label,dataEventName:(p=d.eventName)!=null?p:"",dataAction:m,dataDestination:h,dataPriority:d.isImportant?"1":"0",dataInputLabel:`${e.systemLabel||e.label||e.blockId||""} [${d.systemLabel||d.label||e.systemLabel||"input"}]`,dataRelatedElement:d.id,id:d.id,label:d.label,systemLabel:d.systemLabel,isSelected:u.isSelected,handleOptionTextInputChange:f=>{o(d,f.target.value)},svg:d.svg,image:d.image,lottie:d.lottie,images:d.images,icon:d.icon,emoji:d.emoji,text:d.text,hasInput:!!d.hasInput,inputValue:u.label,isImportant:d.isImportant,contentClassName:d.contentClass,fontFamily:d.fontFamily,iconClassName:d.iconClass,iconStyle:P(d.iconStyle),messageText:d.messageText,messageAvatar:d.messageAvatar,messageStyle:P(d.messageStyle),hasTextInputError:u.hasTextInputError,onClick:f=>{i(d,f.nativeEvent.detail>0)},onKeyDown:f=>{e.isMultiselect||i(d,f.key===" ")},onChange:()=>{i(d,!1)}}}).filter(d=>d!==null);return l.jsx(Ad,{dataLabel:e.systemLabel||e.label||e.blockId,dataVariable:e.variableName||"",dataIsRequired:e.isRequired?"true":void 0,dataConditional:e.isSetNavigation?"true":void 0,dataTracking:e.enableTracking,dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,id:e.blockId,label:e.label,hideLabel:e.hideLabel,labelClassName:e.labelClassName,labelStyle:P(e.labelStyle),className:e.className,contentClassName:e.contentClass,wrapperStyle:P(e.legacySpacingStyle),innerStyle:P(e.innerStyle),actions:e.actions,options:c,isMultiselect:e.isMultiselect,withText:e.withText,numColumns:e.columns,numColumnsMobile:e.columnsMobile,isImageHeightFixed:e.imageMode==="fixed",imageObjectFit:e.imageObjectFit,imageHeight:e.imageHeight,imageMobileHeight:e.imageMobileHeight,hasError:a.hasError})},Rd=(e,t)=>{var s;const n=t.state.values.reduce((a,r)=>r.isSelected?[...a!=null?a:[],{name:r.id,answer:r.label}]:a,[]);return{name:Id(e),values:n,isSensitive:(s=e.isSensitive)!=null?s:!1}},$d=(e,t)=>{var n;return t.values.length?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"input",values:t.values,variable:(n=e.variableName)!=null?n:e.blockId}]:[]},jd=e=>{const t=e.isMinEnabled?e.minSelections:void 0,n=e.isMultiselect?e.isMaxEnabled?e.maxSelections:void 0:1;return H.object({name:H.string(),values:H.array(H.object({name:H.string(),answer:H.string()})).min(t!=null?t:e.isRequired?1:0).max(n!=null?n:e.options.length),isSensitive:H.boolean()})},Pd=({result:e,blockState:t})=>{if(e.success)return;t.setState(s=>({hasError:!1,values:s.values.map(a=>E(v({},a),{hasTextInputError:!1}))})),setTimeout(()=>{for(const s of e.error.issues)if(s.path.length===1&&s.path[0]==="values"&&t.setState({hasError:!0}),s.path.length===3&&s.path[0]==="values"&&s.path[2]==="answer"&&typeof s.path[1]=="number"){const r=t.state.values.filter(c=>c.isSelected),i=s.path[1],o=r[i];if(!o)throw new Error("Mismatch between multiple choice block options and result lists.");t.setState(c=>({values:c.values.map(d=>d.id!==o.id?d:E(v({},d),{hasTextInputError:!0}))}))}},1)},Bd=(e,t)=>{t.setState(n=>({values:n.values.map(s=>{var a;return{id:s.id,label:(a=e.options.find(r=>r.id===s.id))!=null&&a.hasInput?"":s.label,isSelected:!1,hasTextInputError:!1}}),hasError:!1}))},Md=({config:e,params:t,restoredData:n})=>({values:Cd({config:e,params:t,restoredData:n}),hasError:!1}),Dd=(e,t,{purifyXML:n})=>{var a,r;const s=(r=(a=e.options)==null?void 0:a.filter(i=>i!==null))!=null?r:[];return E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),labelClassName:e.labelClass,variableName:e.variable,className:e.class,options:_d(s,n),nextScreen:e.nextScreen,imageMode:e.imageMode,imageObjectFit:e.imageObjectFit,isRequired:e.required,isMultiselect:e.multiselect,isAutoRedirect:e.autoRedirect,enableTracking:e.tracking,isSensitive:e.sensitive,isSetNavigation:e.setNavigation,isMinEnabled:e.minimumSelectionsEnabled,minSelections:e.minimumSelectionsNumber,isMaxEnabled:e.maximumSelectionsEnabled,maxSelections:e.maximumSelectionsNumber,columns:e.columns&&Math.min(e.columns,s.length),columnsMobile:e.columnsMobile&&Math.min(e.columnsMobile,s.length),outerClassName:e.containerClass})},Vd=(e,t)=>{if(t.variableName)return{[t.variableName]:e.values.filter(n=>n.isSelected).map(n=>n.label)}},Od=({blockState:e})=>e.state.values.reduce((t,n)=>n.isSelected?[...t,n.label]:t,[]),Fd=({blockState:e,config:t,value:n})=>{if(n.length>1&&!t.isMultiselect)throw new Error("You provided more than 1 option for single multiple choice");e.setState(s=>({values:s.values.map(a=>E(v({},a),{isSelected:n.includes(a.label)}))}))},Ud=({children:e,config:t})=>l.jsx("div",E(v({className:D("block-content multiple-choice-block",t.outerClassName),id:`multiple-choice-block-${t.blockId}`},v(v(v({},t.isMultiselect?{"data-multiselect":!0}:{}),t.isMinEnabled?{"data-minimum-selections":t.minSelections?t.minSelections:0}:{}),t.isMaxEnabled?{"data-maximum-selections":t.maxSelections?t.maxSelections:t.options.length}:{})),{children:e})),Wd=E(v({},ae()),{getResponseData:Rd,getSubmittableResponseData:$d,getValidationSchema:jd,onValidate:Pd,reset:Bd,getConfig:Dd,Container:Td,getInitialState:Md,getVariableState:Vd,Wrapper:Ud,getValue:Od,setValue:Fd});function Pr(e,t){const n=y.useRef(!0);y.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function Hd(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unknown error"}function qd(e){return e instanceof On?`AxiosError: ${e.message}`:Hd(e)}const zd=({width:e="24",height:t="24",style:n})=>l.jsx("svg",{width:e,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",fill:"#00C853"})}),wa=60;function Kd({isRequestingDisabled:e,phoneNumber:t,onOtpStatusChange:n,otpStatus:s,id:a}){const[r,i]=y.useState(""),[o,c]=y.useState(wa),[d,u]=y.useState(!1),m=y.useRef(null),h=y.useRef(null),{client:p}=fe();y.useEffect(()=>{h.current&&o<=0&&clearInterval(h.current)},[o]);const f=y.useCallback(async()=>{if(!p)return;i(""),h.current&&(clearInterval(h.current),c(wa)),n("waiting");const{submitCode:S}=await p.requestSmsValidationCode({phoneNumber:t});h.current=setInterval(()=>{c(w=>w-1)},1e3),m.current=S},[p,n,t]),g=y.useCallback(async()=>{if(!m.current)return;u(!0);const{isValid:S}=await m.current(r);S?n("success"):(i(""),n("error")),u(!1)},[n,m,r]),b=()=>n(void 0);return s===void 0?l.jsxs("div",{className:"otp-container",children:[l.jsx("p",{className:"otp-container__text",id:`${a}-otp-instructions`,children:"Please validate your phone number by requesting a SMS validation code"}),l.jsx(fn,{className:"outline align-center",disabled:e,onClick:f,"aria-describedby":`${a}-otp-instructions`,children:"Request SMS validation code"})]}):s==="success"?l.jsxs("div",{className:"otp-container",children:[l.jsx("p",{className:"otp-container__text","aria-live":"polite",children:"Your phone number was successfully confirmed"}),l.jsx(zd,{width:"40px",height:"40px",style:{margin:"10px 0"},"aria-hidden":"true"}),l.jsx(fn,{className:"link align-center",disabled:e,onClick:b,children:"Change phone number"})]}):l.jsxs("div",{className:"otp-container",children:[!d&&s==="error"?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"otp-container__text","aria-live":"assertive",role:"alert",children:"The code you entered is invalid. Please try again."}),l.jsx(_r,{style:{color:"red"},"aria-hidden":"true"})]}):l.jsx("p",{className:"otp-container__text",id:`${a}-otp-description`,children:"Please enter the SMS validation code to validate your phone number"}),d?l.jsx("div",{className:"icon-spinner",style:{margin:"10px 0"},"aria-label":"Verifying code",role:"status",children:l.jsx(Ps,{"aria-hidden":"true"})}):l.jsx(vo,{autoFocus:!0,value:r,onChange:i,containerClassName:D("otp-input",{"has-error":s==="error"}),maxLength:4,onComplete:g,"aria-label":"SMS verification code input","aria-describedby":s!=="error"?`${a}-otp-description`:void 0,render:({slots:S})=>l.jsx("div",{className:"slots-container",children:S.map((w,k)=>l.jsx(Gd,v({},w),k))})}),l.jsx(fn,{className:"link align-center",disabled:e||d,onClick:b,children:"Change phone number"}),l.jsxs("p",{className:"otp-container__text",children:["Didn't receive the code?"," ",l.jsx(fn,{className:"link inline",disabled:o>0||d,onClick:f,children:"Resend"})," ",o>0?l.jsxs("span",{"aria-live":"polite",children:["in ",o," seconds"]}):""]})]})}function Gd(e){var t;return l.jsx("div",{className:D("slot",{active:e.isActive}),children:l.jsx("div",{className:D("placeholder",{empty:!e.char}),children:(t=e.char)!=null?t:e.placeholderChar})})}function fn(s){var a=s,{children:e,className:t}=a,n=un(a,["children","className"]);return l.jsx("button",E(v({type:"button",className:D("otp-button",t)},n),{children:e}))}let ss=class extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype),this.name="ImpossiblePhoneNumberError"}};const Yd=e=>e.format("INTERNATIONAL",{nationalPrefix:!1}),kt={AC:"AC",AD:"AD",AE:"AE",AF:"AF",AG:"AG",AI:"AI",AL:"AL",AM:"AM",AO:"AO",AR:"AR",AS:"AS",AT:"AT",AU:"AU",AW:"AW",AX:"AX",AZ:"AZ",BA:"BA",BB:"BB",BD:"BD",BE:"BE",BF:"BF",BG:"BG",BH:"BH",BI:"BI",BJ:"BJ",BL:"BL",BM:"BM",BN:"BN",BO:"BO",BQ:"BQ",BR:"BR",BS:"BS",BT:"BT",BW:"BW",BY:"BY",BZ:"BZ",CA:"CA",CC:"CC",CD:"CD",CF:"CF",CG:"CG",CH:"CH",CI:"CI",CK:"CK",CL:"CL",CM:"CM",CN:"CN",CO:"CO",CR:"CR",CU:"CU",CV:"CV",CW:"CW",CX:"CX",CY:"CY",CZ:"CZ",DE:"DE",DJ:"DJ",DK:"DK",DM:"DM",DO:"DO",DZ:"DZ",EC:"EC",EE:"EE",EG:"EG",EH:"EH",ER:"ER",ES:"ES",ET:"ET",FI:"FI",FJ:"FJ",FK:"FK",FM:"FM",FO:"FO",FR:"FR",GA:"GA",GB:"GB",GD:"GD",GE:"GE",GF:"GF",GG:"GG",GH:"GH",GI:"GI",GL:"GL",GM:"GM",GN:"GN",GP:"GP",GQ:"GQ",GR:"GR",GT:"GT",GU:"GU",GW:"GW",GY:"GY",HK:"HK",HN:"HN",HR:"HR",HT:"HT",HU:"HU",ID:"ID",IE:"IE",IL:"IL",IM:"IM",IN:"IN",IO:"IO",IQ:"IQ",IR:"IR",IS:"IS",IT:"IT",JE:"JE",JM:"JM",JO:"JO",JP:"JP",KE:"KE",KG:"KG",KH:"KH",KI:"KI",KM:"KM",KN:"KN",KP:"KP",KR:"KR",KW:"KW",KY:"KY",KZ:"KZ",LA:"LA",LB:"LB",LC:"LC",LI:"LI",LK:"LK",LR:"LR",LS:"LS",LT:"LT",LU:"LU",LV:"LV",LY:"LY",MA:"MA",MC:"MC",MD:"MD",ME:"ME",MF:"MF",MG:"MG",MH:"MH",MK:"MK",ML:"ML",MM:"MM",MN:"MN",MO:"MO",MP:"MP",MQ:"MQ",MR:"MR",MS:"MS",MT:"MT",MU:"MU",MV:"MV",MW:"MW",MX:"MX",MY:"MY",MZ:"MZ",NA:"NA",NC:"NC",NE:"NE",NF:"NF",NG:"NG",NI:"NI",NL:"NL",NO:"NO",NP:"NP",NR:"NR",NU:"NU",NZ:"NZ",OM:"OM",PA:"PA",PE:"PE",PF:"PF",PG:"PG",PH:"PH",PK:"PK",PL:"PL",PM:"PM",PR:"PR",PS:"PS",PT:"PT",PW:"PW",PY:"PY",QA:"QA",RE:"RE",RO:"RO",RS:"RS",RU:"RU",RW:"RW",SA:"SA",SB:"SB",SC:"SC",SD:"SD",SE:"SE",SG:"SG",SH:"SH",SI:"SI",SJ:"SJ",SK:"SK",SL:"SL",SM:"SM",SN:"SN",SO:"SO",SR:"SR",SS:"SS",ST:"ST",SV:"SV",SX:"SX",SY:"SY",SZ:"SZ",TA:"TA",TC:"TC",TD:"TD",TG:"TG",TH:"TH",TJ:"TJ",TK:"TK",TL:"TL",TM:"TM",TN:"TN",TO:"TO",TR:"TR",TT:"TT",TV:"TV",TW:"TW",TZ:"TZ",UA:"UA",UG:"UG",US:"US",UY:"UY",UZ:"UZ",VA:"VA",VC:"VC",VE:"VE",VG:"VG",VI:"VI",VN:"VN",VU:"VU",WF:"WF",WS:"WS",XK:"XK",YE:"YE",YT:"YT",ZA:"ZA",ZM:"ZM",ZW:"ZW"};async function Jd(e){let t,n;try{t=await te(()=>import("./libphone.chunk-CVLhGutd.js").then(s=>s.i),[]),n=(await te(async()=>{const{default:s}=await import("./libphone.chunk-CVLhGutd.js").then(a=>a.e);return{default:s}},[])).default}catch(s){e==null||e.sendLog({message:"Failed to load libphonenumber",data:{error:`${s.name} ${s.message}`}}),console.error(s),t=void 0,n=void 0}return[t,n]}async function Br({config:e,client:t,modulesEndpoint:n,abortController:s}){if(t&&e.isNetworkValidationTurnedOn)if(t.isInPreviewMode)await new Promise(a=>setTimeout(a,2e3));else{let a=!1;try{a=(await de.get(`${n}/phone-number-validation`,{signal:s==null?void 0:s.signal})).data}catch(r){console.error(r)}return a}return e.isNetworkValidationTurnedOn}async function Mr({config:e,client:t,modulesEndpoint:n,abortController:s}){if(t&&e.isOTPTurnedOn)if(t.isInPreviewMode)await new Promise(a=>setTimeout(a,2e3));else{let a=!1;try{a=(await de.get(`${n}/phone-number-otp`,{signal:s==null?void 0:s.signal})).data}catch(r){console.error(r)}return a}return e.isOTPTurnedOn}function Zd(e){return kt[e]!==void 0}function vs({config:e,client:t,restoredData:n}){var i,o,c;const s=(i=n==null?void 0:n.countryCode)!=null?i:e.countryCode,a=(o=e.allowedCountryCodes)!=null?o:kt,r=Ht(a);if(r.length===0)return t==null||t.sendLog({message:"Phone block: empty allowed country code list",data:{countryCode:s,allowedCountryCodes:r}}),s;if(s&&a[s])return s;if(t){const d=(c=t.language.split("-"))!=null?c:"",m=(d.length>1?d[1]:d[0]).toUpperCase();if(a[m])return t.sendLog({message:"Phone block: invalid country code, fallback to browser language",data:{countryCode:s,allowedCountryCodes:r}}),m}return t==null||t.sendLog({message:"Phone block: invalid country code, fallback to first language",data:{countryCode:s,allowedCountryCodes:r}}),r[0]}function Xd(e,t,n){const s=e.parseIncompletePhoneNumber(t).slice(n.length);return s===void 0?!0:s.length===0}function Ht(e){return Object.keys(e)}const Qd=e=>{if(e!==void 0)return Object.fromEntries(e.map(t=>[t,t]))},Sa=(e,t)=>{var n,s;return((s=(n=e==null?void 0:e.modules)==null?void 0:n[t])==null?void 0:s.isActive)===!0},eu=(e,t,n)=>{var s,a;return(a=(s=e==null?void 0:e.modules)==null?void 0:s[t].errorMessages)==null?void 0:a[n]},ys=e=>`+${e}`,as="49",tu=e=>{var s;const t=(s=e==null?void 0:e.split("-"))!=null?s:["en","US"];return(t.length>1?t[1]:t[0]).toUpperCase()},Dr=({code:e,allowedCountryCodes:t,clientConfig:n})=>{const s=Ht(t);if(s.length===0){n==null||n.sendLog({message:"Phone block: empty allowed country code list",data:{countryCode:e,allowedCountryCodes:s}});return}const a=tu(n==null?void 0:n.language);return e&&t[e]?e:t[a]?(n==null||n.sendLog({message:"Phone block: invalid country code, fallback to browser language",data:{countryCode:e,allowedCountryCodes:s}}),a):(n==null||n.sendLog({message:"Phone block: invalid country code, fallback to first language",data:{countryCode:e,allowedCountryCodes:s}}),s[0])},$n=({code:e,libphonenumber:t,allowedCountryCodes:n,clientConfig:s})=>{const a=Dr({code:e,allowedCountryCodes:n,clientConfig:s});if(!t||!a)return as;try{return t.getCountryCallingCode(a)}catch(r){return s==null||s.sendLog({message:"Phone block: invalid country code",data:{countryCode:e}}),as}},nu=({parsedCountryCodes:e,sendLog:t})=>{if(!e)return kt;const n=Ht(e).filter(s=>kt[s]);return n.length===0?(t==null||t({message:"Phone block: empty country code list",data:{countryCodes:Ht(e).join(", ")}}),kt):Object.fromEntries(n.map(s=>[s,s]))};function su(e,t,n,s){if(!n||!s)return"";const a=n.getExampleNumber(e,s);if(!a)return"";const r=a.formatInternational().slice(t.length).replace(/[0-9]/g,"0");return`${t}${r}`}function au(e,t){let n=e;const s=n.substring(0,2);s==="00"&&(n=n.replace(s,"+"));const a=n.lastIndexOf(t);return a===-1?n.trim().length>t.length&&!n.startsWith("+")?`${t}${n}`:n:n.slice(a)}const Vr=(e,t,n)=>{const s=y.useCallback(a=>{const r=a.composedPath()[0];e.current&&!e.current.contains(r)&&t()},[e,t]);y.useEffect(()=>{if(n)return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[n,s])},ru=65,iu=127462,ou=iu-ru;async function lu(){if(typeof Intl.DisplayNames!="function")try{await Promise.all([te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.p),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.a),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.d),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.e),[])])}catch(e){console.log("Something went wrong loading the @formatjs-intl-displaynames polyfill",e)}}function cu(e){return new Intl.DisplayNames([e!=null?e:"en"],{type:"region"})}function du(e,t,n,s){return Ht(t).map(a=>({countryCode:a,countryName:n.of(a),countryCallingCode:$n({code:a,libphonenumber:e,allowedCountryCodes:t,clientConfig:s}),get searchIndex(){return`+${this.countryCallingCode}${this.countryName}`}}))}const uu=({allowedCountryCodes:e,countryCode:t,setErrorType:n,setIsDropdownVisible:s,setIsFocused:a,isDropdownVisible:r,libphonenumber:i,id:o,systemLabel:c,onCountryCodeChange:d,isEmpty:u,clientConfig:m})=>{var Q,oe;const[h,p]=y.useState([]),[f,g]=y.useState(h),b=y.useRef(null),S=y.useRef(null),w=y.useRef(null),[k,C]=y.useState(""),[T,V]=y.useState(0),[M,_]=y.useState(null),N=y.useRef(null),$=y.useRef([]),[W,ee]=y.useState(!1),A=L=>{const R=$.current[L];if(w.current&&R){const O=w.current.clientHeight,le=R.offsetTop;w.current.scrollTop=le-O/2+R.clientHeight/2}};y.useEffect(()=>{i&&lu().then(()=>{const L=cu(m==null?void 0:m.language),R=du(i,e,L,m);_(L),p(R),g(R)}).catch(L=>{console.error("Something went wrong initializing the CountrySelect",L),m==null||m.sendLog({message:"Block crashed",data:{error:`CountrySelect crashed: ${L.name} ${L.message}`}})})},[i,e,m]),Vr(b,()=>{s(!1)},m);const ie=L=>{var le;if(!r)return;const R=f.length-1;let O=T;switch(L.key){case"ArrowDown":L.preventDefault(),O=Math.min(T+1,R),ee(!0);break;case"ArrowUp":L.preventDefault(),O=Math.max(T-1,0),ee(!0);break;case"Home":L.preventDefault(),O=0,ee(!0);break;case"End":L.preventDefault(),O=R,ee(!0);break;case"Enter":case" ":L.preventDefault(),L.stopPropagation(),T>=0&&(d(f[T].countryCode),s(!1),(le=S.current)==null||le.focus());break;case"Escape":L.preventDefault(),s(!1);break}O!==T&&(V(O),A(O))},ne=L=>{const{value:R}=L.target;C(R);const O=h.filter(le=>le.searchIndex.toLowerCase().includes(R.toLowerCase()));g(R.length?O:h),V(0),ee(!1)},I=()=>{n("formattingError");const L=!r;s(L),a(L);const R=f.findIndex(le=>le.countryCode===t),O=R>=0?R:0;V(O),L&&setTimeout(()=>{A(O)},0)},X=L=>{var O;ee(!1);const R=(O=L.target.closest("[data-value]"))==null?void 0:O.getAttribute("data-value");R||console.warn("Country code wasn't selected, using the default value"),d(t&&R),s(!1)};y.useLayoutEffect(()=>{var L;r&&((L=N.current)==null||L.focus())},[r]);const B=L=>{L.relatedTarget!==S.current&&(L.currentTarget.contains(L.relatedTarget)||(s(!1),L.relatedTarget&&T>=0&&f[T]&&d(f[T].countryCode)))};y.useEffect(()=>{$.current=$.current.slice(0,f.length)},[f]);const he=L=>{W||V(L)},se=()=>{W&&ee(!1)};return l.jsxs("div",{ref:b,children:[l.jsxs("div",{className:"select-wrapper",children:[l.jsx("input",{id:"phone-country","data-label":c,type:"hidden",name:`country-select-${o}`,value:t,"data-is-empty":u}),l.jsx("button",{ref:S,className:D("select-custom input-decorator input-prefix",{isActive:r}),"aria-expanded":r,"aria-haspopup":"listbox","aria-controls":`country-select-dropdown-${o}`,"aria-label":`Select country code: ${(Q=M==null?void 0:M.of(t))!=null?Q:""} ${ys($n({code:t,libphonenumber:i,allowedCountryCodes:e,clientConfig:m}))}`,onClick:I,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),L.stopPropagation(),I())},id:`country-select-button-${o}`,children:ka(t)})]}),l.jsxs("div",{ref:w,className:D("select-custom-options",{"select-custom-options_is_visible":r}),onKeyDown:ie,tabIndex:-1,onBlur:B,children:[l.jsx("div",{className:"select-custom-search-box",children:l.jsx("input",{ref:N,role:"combobox",className:"select-custom-search",type:"text",placeholder:"Search",value:k,"data-is-react-input":"true",onChange:ne,"aria-label":"Search country codes","aria-expanded":r,"aria-activedescendant":T>=0&&r?`country-option-${o}-${(oe=f[T])==null?void 0:oe.countryCode}`:void 0,"aria-controls":`country-select-dropdown-${o}`,"aria-autocomplete":"list"})}),l.jsx("div",{id:`country-select-dropdown-${o}`,role:"listbox","aria-label":"Country codes","aria-hidden":!r,onMouseMove:se,children:f.map((L,R)=>{const O=L.countryCode===t,le=`country-option-${o}-${L.countryCode}`;return l.jsxs("div",{id:le,ref:Y=>$.current[R]=Y,className:D("select-custom-option",{"is-current":T===R}),"data-value":L.countryCode,onClick:X,role:"option","aria-selected":O,"aria-label":`${L.countryName} +${L.countryCallingCode}. - Type to filter country codes.`,onMouseEnter:()=>he(R),tabIndex:-1,children:[`${ka(L.countryCode)} ${L.countryName} `,l.jsxs("span",{className:"country-calling-code",children:["+",L.countryCallingCode]})]},L.countryCode)})})]})]})},ka=e=>{const t=e.toUpperCase().split("").map(n=>ou+n.charCodeAt(0));return String.fromCodePoint(...t)};let mu=class extends y.Component{constructor(t){super(t)}componentDidCatch(t){var n,s;(s=(n=this.props).sendLog)==null||s.call(n,{message:"Block crashed",data:{error:`PhoneNumberBlock crashed: ${t.name} ${t.message}`}})}render(){return l.jsx(y.Fragment,{children:this.props.children})}};const hu=({phoneNumber:e,id:t,isSensitive:n,shouldAutofocus:s,variable:a,systemLabel:r,onBlur:i,onFocus:o,onChange:c,onKeyDown:d,isDisabled:u,isEmpty:m,placeholder:h,"aria-required":p,"aria-invalid":f,"aria-describedby":g})=>{const b=y.useRef(null);return y.useLayoutEffect(()=>{var S;s&&((S=b.current)==null||S.focus())},[s]),l.jsx("div",{style:{width:"100%",flex:1,position:"relative"},children:l.jsx("input",{ref:b,className:"phone-input",name:`phone-input-${t}`,"data-sensitive":n,"data-tf-sensitive":n,disabled:u,"data-variable":a,"data-label":r,autoFocus:s?!0:void 0,id:t,type:"tel","data-type":"input",onFocus:o,onChange:S=>c(S.target.value),onBlur:i,onKeyDown:S=>d(S.key),value:e,"data-is-empty":m,placeholder:h,"aria-required":p,"aria-invalid":f,"aria-describedby":g})})},fu=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",viewBox:"0 0 256 256","data-testid":"success-icon","aria-hidden":"true",children:l.jsx("path",{d:"M128 24a104 104 0 10104 104A104.11 104.11 0 00128 24zm45.66 85.66l-56 56a8 8 0 01-11.32 0l-24-24a8 8 0 0111.32-11.32L112 148.69l50.34-50.35a8 8 0 0111.32 11.32z"})}),Or=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",x:"0",y:"0",viewBox:"0 0 40 40","data-testid":"loading-icon","aria-hidden":"true",children:[l.jsx("path",{fill:"currentColor",d:"M20.201 5.169c-8.254 0-14.946 6.692-14.946 14.946 0 8.255 6.692 14.946 14.946 14.946s14.946-6.691 14.946-14.946c-.001-8.254-6.692-14.946-14.946-14.946zm0 26.58c-6.425 0-11.634-5.208-11.634-11.634 0-6.425 5.209-11.634 11.634-11.634 6.425 0 11.633 5.209 11.633 11.634 0 6.426-5.208 11.634-11.633 11.634z",opacity:"0.3"}),l.jsx("path",{fill:"currentColor",d:"M26.013 10.047l1.654-2.866a14.855 14.855 0 00-7.466-2.012v3.312c2.119 0 4.1.576 5.812 1.566z",children:l.jsx("animateTransform",{attributeName:"transform",attributeType:"xml",dur:"0.5s",from:"0 20 20",repeatCount:"indefinite",to:"360 20 20",type:"rotate"})})]}),pu=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",viewBox:"0 0 256 256","aria-hidden":"true",children:l.jsx("path",{d:"M128 24a104 104 0 10104 104A104.11 104.11 0 00128 24zm37.66 130.34a8 8 0 01-11.32 11.32L128 139.31l-26.34 26.35a8 8 0 01-11.32-11.32L116.69 128l-26.35-26.34a8 8 0 0111.32-11.32L128 116.69l26.34-26.35a8 8 0 0111.32 11.32L139.31 128z"})}),gu=({hidden:e})=>l.jsx("div",{className:"relative",children:l.jsxs("div",{className:D("status-indicator",{hidden:e}),"aria-hidden":e,children:[l.jsx("div",{className:"icon-check-mark","aria-label":"Success",children:l.jsx(fu,{})}),l.jsx("div",{className:"icon-x-mark","aria-label":"Error",children:l.jsx(pu,{})}),l.jsx("div",{className:"icon-spinner","aria-label":"Loading",children:l.jsx(Or,{})})]})}),vu=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256","aria-hidden":"true",children:[l.jsx("rect",{width:"256",height:"256",fill:"none"}),l.jsx("line",{x1:"200",y1:"56",x2:"56",y2:"200",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),l.jsx("line",{x1:"200",y1:"200",x2:"56",y2:"56",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"})]}),yu=async(e,t,n,s,a)=>t?await new Promise(o=>{s({event:"preview.networkValidation"}),setTimeout(()=>{o({isValid:!0,isActive:!0})},2e3)}):(await de.post(`${a}/phone-number-validation`,{phoneNumber:e,countryCallingCode:n})).data,bu=async()=>(await new Promise(e=>setTimeout(e,10)),[await te(()=>import("./libphone.chunk-CVLhGutd.js").then(e=>e.i),[]),(await te(async()=>{const{default:e}=await import("./libphone.chunk-CVLhGutd.js").then(t=>t.e);return{default:e}},[])).default]);async function wu(){if(window.ResizeObserver)return window.ResizeObserver;const{ResizeObserver:e}=await te(async()=>{const{ResizeObserver:t}=await import("./resize-observer.chunk-DqyxKk7V.js");return{ResizeObserver:t}},[]);return e}const Su=(e,t)=>e||(t?"Bitte gib eine korrekte Telefonnummer an.":"Please enter a valid phone number."),ku=(e,t)=>e||(t?"Bitte eine registrierte Nummer eingeben.":"Please enter a registered number."),Eu=({defaultCountryCode:e,allowedCountryCodesMap:t,hasInputError:n,hasOTPError:s,label:a,labelType:r,errorMessage:i,required:o,sensitive:c,autofocus:d,id:u,phoneNumber:m,variable:h,systemLabel:p,dataAsync:f,systemLabelCountrySelect:g,networkValidationErrorMessage:b,withInfo:S,info:w,libphonenumber:k,libphonenumberExamples:C,onBlur:T,onChangeCountryCode:V,onChangeIsNetworkValidationTurnedOn:M,onChangePhoneNumber:_,onOtpStatusChange:N,isOTPTurnedOn:$,otpStatus:W,didValidate:ee})=>{var ve;const{client:A,constants:ie}=fe(),ne=y.useRef(null),I=y.useRef(null),X=o!==void 0,B=nu({parsedCountryCodes:t,sendLog:A==null?void 0:A.sendLog}),he="input has-prefix",se=(ve=A==null?void 0:A.language.includes("de"))!=null?ve:!1,Q=ku(b,se),oe=Su(i,se),[L,R]=y.useState(!!m),[O,le]=y.useState(e),[Y,$e]=y.useState(!1),[pe,we]=y.useState(!1),[Le,Ie]=y.useState("idle"),[nn,Ze]=y.useState("formattingError"),Be=ys($n({code:O,libphonenumber:k,allowedCountryCodes:B,clientConfig:A}));y.useEffect(()=>{le(q=>{var ye;const J=(ye=Dr({code:q,allowedCountryCodes:B,clientConfig:A}))!=null?ye:q;return V(J),J})},[A,V,B]);const it=y.useCallback((q,J)=>{if(!k)return!0;const ye=k.parseIncompletePhoneNumber(q).slice(J.length);return ye===void 0?!0:ye.length===0},[k]),Rt=y.useMemo(()=>it(m,Be),[it,m,Be]),sn=y.useMemo(()=>su(O,Be,k,C),[k,C,O,Be]);y.useEffect(()=>{V(O)},[O,V]),y.useEffect(()=>{_(m)},[m,_]),y.useEffect(()=>{if(ne.current){const q=ne.current.parentElement;q&&(q.dataset.status=Le)}},[Le]);const[an,$t]=y.useState(!1),vt=y.useCallback(q=>{if(!k)return!1;try{const J=k.parsePhoneNumberWithError(q);return(J==null?void 0:J.isPossible())&&J.isValid()}catch(J){return!1}},[k]),rn=y.useCallback(q=>{const J=Yd(q);return{shouldThrow:!vt(m),formattedNumber:J}},[vt,m]),on=y.useCallback(async()=>{var J,ye;if(!k||!f||Le==="loading")return;const q=k.parsePhoneNumberWithError(m,O);if(!rn(q).shouldThrow)try{if(Ie("loading"),$t(!0),A){A.sendLog({message:"Phone network validation request started"});const{isActive:xe,isValid:Ae}=await yu(q.number,A.isInPreviewMode,q.countryCallingCode,A.messageParent,ie.MODULES_ENDPOINT);M(xe);let Je="error";(!xe||Ae)&&(Je="success"),A.sendLog({message:"Phone network validation request fulfilled",data:{isActive:xe,isPhoneNumberValid:Ae,status:Je}}),Ie(Je),Je==="error"&&Ze("networkValidationError")}}catch(xe){Ie("success");let Ae;xe instanceof On&&typeof((ye=(J=xe.response)==null?void 0:J.data)==null?void 0:ye.message)=="string"?Ae=`ModulesError: ${xe.response.data.message}`:Ae=qd(xe),A==null||A.sendLog({message:"Phone network validation request failed",data:{error:Ae,status:"success"}})}},[k,m,O]);y.useEffect(()=>{Y||we(!1)},[Y]),y.useEffect(()=>{if(!ne.current||!k||Le==="loading")return;const q=au(m,Be);if(m!==q)return _(q);const J=Be.length;if(X&&m.length<=J)return Ie("invalid");if(!X&&Rt)return Ie("success");if(m.length>J){const ye=async()=>{await on()};try{const xe=k.parsePhoneNumberWithError(m,O),Ae=xe.getPossibleCountries();if(Ae.length&&B[Ae[0]])le(Ae[0]);else if(!B[Ae[0]])throw new ss("IMPOSSIBLE_NUMBER");const{shouldThrow:Je,formattedNumber:cn}=rn(xe);if(Je)throw new ss("IMPOSSIBLE_NUMBER");if(Ie("idle"),m!==cn)return _(cn);L?ye():Ie("idle")}catch(xe){(xe instanceof k.ParseError||xe instanceof ss)&&L?(Ze("formattingError"),Ie("error")):Ie("invalid")}}},[O,m,L,on]),y.useEffect(()=>{(Le==="idle"||Le==="success")&&Ze("formattingError")},[Le]);const[zn,Kn]=y.useState(0);y.useEffect(()=>{if(!A)return;let q;return(async()=>{var xe;if(r!=="floating-inline"&&r!=="floating")return;const J=(xe=ne.current)==null?void 0:xe.querySelector(".select-wrapper");if(!J)return;const ye=await wu();q=new ye(Ae=>{var Je;for(const cn of Ae){const oo=(Je=cn.target.offsetWidth)!=null?Je:0;Kn(oo)}}),q.observe(J)})(),()=>{q==null||q.disconnect()}});const Gn=()=>{we(!0),m===""&&_(Be)},Yn=q=>{var J,ye;we(!1),it(m,Be)&&_(""),m.length>Be.length&&R(!0),A==null||A.sendLog({message:"Input blurred",blockID:u,data:{isRequired:X,hasData:m.length>Be.length,isRunningNetworkValidation:f,isValidPhoneNumberViaLib:!!vt(m),pseudonymizedNumber:m.replace(/[0-9]/g,"0"),inputStatus:(ye=(J=I.current)==null?void 0:J.className)!=null?ye:""}}),T(q)},Jn=q=>{_(q),R(!1),$t(!1)},ln=y.useCallback(q=>{I.current&&!I.current.classList.contains("invalid")&&I.current.dataset.status!=="success"&&q==="Enter"&&(I.current.dataset.status="loading",R(!0))},[]);y.useEffect(()=>{if(e===O||!k)return;Ie("idle"),le(e);const q=ys($n({code:e,libphonenumber:k,allowedCountryCodes:B,clientConfig:A}));try{const J=k.parsePhoneNumberWithError(m,e),ye=`${q}${J.nationalNumber}`,xe=k.parsePhoneNumberWithError(ye,e);_(xe.number),R(!0)}catch(J){m!==""&&_(q)}},[A,O,e,k,_,B,m]);const yt=!!a,bt=["floating","floating-inline"].includes(r!=null?r:""),Xe=n||s,z=!!m,ue=`${u}-error`,Ee=`${u}-label`;return l.jsxs("div",{className:D("input-box show-error-instantly",{"has-value":z,"has-focus":pe,"with-floating-label":bt,"floating-label-inline":r==="floating-inline","with-dropdown-visible":Y}),ref:ne,children:[yt&&!bt&&l.jsx("label",{htmlFor:u,id:Ee,children:a}),l.jsxs("div",{children:[l.jsxs("div",{ref:I,className:D(he,{invalid:Xe,error:Xe}),"data-async":f?"true":"false","data-status":f?Le:"idle","data-exclude-async-validation":!0,role:"group","aria-describedby":Xe?ue:void 0,children:[l.jsxs("div",{className:"input-wrapper",children:[l.jsx(uu,{id:u,allowedCountryCodes:B,onCountryCodeChange:V,setErrorType:Ze,countryCode:O,libphonenumber:k,isDropdownVisible:Y,setIsDropdownVisible:$e,setIsFocused:we,systemLabel:g,isEmpty:Rt,clientConfig:A}),l.jsx(hu,{id:u,isDisabled:(f?Le==="loading":!1)||($?W!==void 0:!1),onBlur:Yn,onFocus:Gn,onChange:Jn,onKeyDown:ln,phoneNumber:m,isSensitive:c!=null?c:!1,shouldAutofocus:d!=null?d:!1,variable:h,systemLabel:p,isEmpty:Rt,placeholder:sn,"aria-required":!!o,"aria-invalid":!!Xe,"aria-describedby":Xe?ue:void 0}),yt&&bt&&l.jsx("div",{style:{left:r==="floating"&&(pe||z)?0:zn},className:"input-floating-label",children:l.jsx("label",{htmlFor:u,id:Ee,children:a})}),l.jsx(gu,{hidden:!an})]}),l.jsxs("div",{className:"error-box",id:ue,role:"alert","aria-live":"assertive",children:[l.jsx(vu,{}),l.jsx("span",{className:"text",children:s?"Please validate your phone number":Le==="error"&&nn==="networkValidationError"?Q:oe})]}),S&&l.jsx("span",{className:"label",id:`${u}-info`,children:w!=null?w:""})]}),$&&l.jsx(Kd,{id:u,isRequestingDisabled:ee?n:!0,phoneNumber:m,onOtpStatusChange:N,otpStatus:W})]})]})},xu=e=>{const{client:t}=fe(),[[n,s],a]=y.useState([void 0,void 0]);return y.useEffect(()=>{bu().then(r=>a(r)).catch(r=>{t==null||t.sendLog({message:"Failed to load libphonenumber",data:{error:`${r.name} ${r.message}`}}),console.error(r)})},[t]),l.jsx(mu,{sendLog:t==null?void 0:t.sendLog,children:l.jsx(Eu,E(v({},e),{libphonenumber:n,libphonenumberExamples:s}))})};function Iu({allowedCountryCodes:e,countryCode:t,errorMessage:n,hasAutoFocusTurnedOn:s,hasInputError:a,hasOTPError:r,id:i,info:o,isNetworkValidationTurnedOn:c,isOTPTurnedOn:d,isSensitive:u,isRequired:m,label:h,labelType:p,phoneNumber:f,networkValidationErrorMessage:g,spacingStyle:b,systemLabel:S,systemLabelCountrySelect:w,variableName:k,withInfo:C,onBlur:T,onChangeCountryCode:V,onChangeIsNetworkValidationTurnedOn:M,onChangePhoneNumber:_,onOtpStatusChange:N,otpStatus:$,didValidate:W}){return l.jsx("div",{style:b,children:l.jsx(xu,{allowedCountryCodesMap:e,autofocus:s,dataAsync:c,defaultCountryCode:t,errorMessage:n,hasInputError:a,hasOTPError:r,id:i,info:o,label:h,labelType:p,name:"phone",isOTPTurnedOn:d,networkValidationErrorMessage:g,phoneNumber:f,required:m,sensitive:u,systemLabel:S,systemLabelCountrySelect:w,type:"phone",withInfo:C,variable:k,onBlur:T,onChangeCountryCode:V,onChangeIsNetworkValidationTurnedOn:M,onChangePhoneNumber:_,onOtpStatusChange:N,otpStatus:$,didValidate:W})})}const Cu=({config:e,handleValidation:t})=>{var f,g,b,S;const{client:n,constants:s}=fe(),{state:a,setState:r}=Oe("phone",e.blockId),[i,o]=y.useState(e.isNetworkValidationTurnedOn),[c,d]=y.useState(e.isOTPTurnedOn);Pr(()=>{(a.hasInputError||a.hasOTPError)&&t()},[t,a]),y.useEffect(()=>{const w=new AbortController;return Br({config:e,client:n,modulesEndpoint:s.MODULES_ENDPOINT,abortController:w}).then(o),()=>{w.abort()}},[e,n,s.MODULES_ENDPOINT]),y.useEffect(()=>{const w=new AbortController;return Mr({config:e,client:n,modulesEndpoint:s.MODULES_ENDPOINT,abortController:w}).then(d),()=>{w.abort()}},[e,n,s.MODULES_ENDPOINT]);const u=y.useCallback(w=>{r({phoneNumber:w})},[r]),m=y.useCallback(w=>{r({countryCode:w})},[r]),h=y.useCallback(w=>{r({otpStatus:w})},[r]);function p(){t()}return l.jsx(Iu,{allowedCountryCodes:e.allowedCountryCodes,countryCode:a.countryCode,errorMessage:e.errorMessage,hasAutoFocusTurnedOn:!(n!=null&&n.isInPreviewMode)&&!!e.hasAutoFocusTurnedOn,hasInputError:a.hasInputError,hasOTPError:a.hasOTPError,id:e.blockId,info:e.info,isNetworkValidationTurnedOn:i,isOTPTurnedOn:c,isSensitive:(f=e.isSensitive)!=null?f:!1,isRequired:(g=e.isRequired)!=null?g:!1,label:e.label,labelType:e.labelType,networkValidationErrorMessage:e.networkValidationErrorMessage,phoneNumber:a.phoneNumber,spacingStyle:(b=P(e.spacingStyle))!=null?b:{},systemLabel:e.systemLabel,systemLabelCountrySelect:e.systemLabelCountrySelect,variableName:e.variableName,withInfo:(S=e.withInfo)!=null?S:!1,onBlur:p,onChangeCountryCode:m,onChangeIsNetworkValidationTurnedOn:o,onChangePhoneNumber:u,onOtpStatusChange:h,otpStatus:a.otpStatus,didValidate:a.didValidate})},Lu=(e,t)=>{var n;return{name:Fe([e.systemLabel,e.label,e.blockId]),countryCode:t.state.countryCode,phoneNumber:t.state.phoneNumber,isSensitive:(n=e.isSensitive)!=null?n:!1,otpStatus:t.state.otpStatus}},Nu=(e,t)=>{var n;return t.phoneNumber?[{id:"phone-country",label:e.systemLabelCountrySelect||`country-select-${e.blockId}`,name:`country-select-${e.blockId}`,sensitive:t.isSensitive,type:null,values:[{answer:t.countryCode,name:t.countryCode}],variable:`country-select-${e.blockId}`},{id:e.blockId,label:e.systemLabel||`phone-input-${e.blockId}`,name:`phone-input-${e.blockId}`,sensitive:t.isSensitive,type:"input",values:[{answer:t.phoneNumber,name:t.phoneNumber}],variable:(n=e.variableName)!=null?n:`phone-input-${e.blockId}`}]:[]},_u=async(e,t)=>{var o;const[n,s]=await Jd(t.client);let a=e.isNetworkValidationTurnedOn;try{a=await Br({config:e,client:t.client,modulesEndpoint:t.constants.MODULES_ENDPOINT})}catch(c){a=!1}let r=e.isOTPTurnedOn;try{r=await Mr({config:e,client:t.client,modulesEndpoint:t.constants.MODULES_ENDPOINT})}catch(c){r=!1}if(!n||!s)return H.never({message:"Can't validate phone number"});const i=(o=e.allowedCountryCodes)!=null?o:kt;return H.object({countryCode:H.string().refine(c=>Zd(c)&&i[c]).transform(c=>c),phoneNumber:H.string(),otpStatus:H.enum(["success"]).optional()}).refine(async({countryCode:c,phoneNumber:d})=>{let u;try{u=n.getCountryCallingCode(c),u=`+${u}`}catch(f){return!1}if(e.isRequired&&d.length<=u.length)return!1;if(!e.isRequired&&Xd(n,d,u))return!0;let m;try{m=n.parsePhoneNumberWithError(d,c)}catch(f){return!1}if(!d)return!1;const h=m.format("INTERNATIONAL",{nationalPrefix:!1});if(d.length>h.length||!m.isPossible()||!m.isValid())return!1;const p=m.getPossibleCountries();if(!i[p[0]])return!1;if(t!=null&&t.client&&a){t.client.sendLog({message:"Phone network validation request started"});let f=!0,g=!0;if(t.client.isInPreviewMode)t.client.messageParent({event:"preview.networkValidation"}),await new Promise(b=>setTimeout(b,2e3));else{try{const S=(await de.post(`${t.constants.MODULES_ENDPOINT}/phone-number-validation`,{countryCallingCode:m.countryCallingCode,phoneNumber:m.number})).data;f=S.isActive,g=S.isValid}catch(S){}a=f;let b="error";if((!f||g)&&(b="success"),t.client.sendLog({message:"Phone network validation request fulfilled",data:{isActive:f,isPhoneNumberValid:g,status:b}}),f&&!g)return!1}}return!0}).refine(({otpStatus:c})=>t!=null&&t.client&&r?c==="success":!0,"IS_NOT_OTP_READY")},Au=({blockState:e,result:t,reason:n})=>{var r,i,o;const s=(r=t.error)==null?void 0:r.issues.find(c=>c.message==="IS_NOT_OTP_READY"),a=(o=(i=t.error)==null?void 0:i.issues.filter(c=>c.message!=="IS_NOT_OTP_READY"))!=null?o:[];e.setState({didValidate:!0,hasInputError:a.length>0,hasOTPError:n==="response-data-collection"||e.state.hasOTPError?!!s:!1})},Tu=(e,t,n)=>{t.setState({countryCode:vs({config:e,client:n.client}),phoneNumber:"",hasInputError:!1,hasOTPError:!1,otpStatus:void 0,didValidate:!1})},Ru=({config:e,params:t,restoredData:n,blockContext:s})=>{const a=e.variableName&&t.get(e.variableName),i=(a==null?void 0:a.replace(/^\s/,"+"))||(n==null?void 0:n.phoneNumber)||"",o={phoneNumber:i,countryCode:vs({config:e,client:s.client}),hasInputError:!1,hasOTPError:!1,otpStatus:void 0,didValidate:!1};return n?[o,{phoneNumber:i,countryCode:vs({config:e,client:s.client,restoredData:n})}]:o},$u=e=>{var t;return E(v(v({},re(e)),e),{spacingStyle:ce(e),isNetworkValidationTurnedOn:Sa(e,"phone-number-validation"),isOTPTurnedOn:Sa(e,"phone-number-otp"),networkValidationErrorMessage:(t=eu(e,"phone-number-validation","validationFailure"))!=null?t:"",countryCode:e.defaultCountryCode,allowedCountryCodes:Qd(e.allowedCountryCodes),isRequired:e.required,isSensitive:e.sensitive,hasAutoFocusTurnedOn:e.autofocus,variableName:e.variable,outerClassName:e.class,outerStyle:P(e.style)})},ju=(e,t)=>{if(t.variableName)return{[t.variableName]:e.phoneNumber}},Pu=({blockState:e})=>e.state.phoneNumber,Bu=({blockState:e,value:t})=>{e.setState({phoneNumber:t})},Mu=({children:e,config:t})=>l.jsx("div",{className:D("block-content input-box phone-number-block show-error-instantly",t.outerClassName),style:t.outerStyle,id:`phone-number-block-${t.blockId}`,children:e}),Du=E(v({},ae()),{getResponseData:Lu,getSubmittableResponseData:Nu,getValidationSchema:_u,onValidate:Au,reset:Tu,getConfig:$u,getInitialState:Ru,getVariableState:ju,Container:Cu,Wrapper:Mu,getValue:Pu,setValue:Bu}),Vu=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"17",viewBox:"0 0 9 17",fill:"none",children:l.jsx("path",{d:"M7.87918 1L1.43918 7.439C0.853607 8.02475 0.853607 8.97425 1.43918 9.56L7.87918 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Ou=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"17",viewBox:"0 0 9 17",fill:"none",children:l.jsx("path",{d:"M1.12082 1L7.56082 7.439C8.14639 8.02475 8.14639 8.97425 7.56082 9.56L1.12082 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),pn={speed:200,delay:1e3,loop:!0,autoplay:!0};function Fu({speed:e=pn.speed,loop:t=pn.loop,autoplay:n=pn.autoplay,delay:s=pn.delay,wrapperStyle:a,options:r}){const[i,o]=y.useState(null),c=y.useRef(null);return y.useEffect(()=>{const d=c.current;d&&te(()=>import("./swiper.chunk-Bqz09FlK.js").then(u=>u.s),[]).then(async({Swiper:u,SwiperSlide:m})=>{const{Autoplay:h,Navigation:p,Pagination:f}=await te(async()=>{const{Autoplay:g,Navigation:b,Pagination:S}=await import("./swiper.chunk-Bqz09FlK.js").then(w=>w.i);return{Autoplay:g,Navigation:b,Pagination:S}},[]);o(l.jsx(u,E(v({},v({modules:[f,p,h],className:"swiper-container",spaceBetween:10,speed:e,loop:t,pagination:{el:d.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:d.querySelector(".swiper-button-next"),prevEl:d.querySelector(".swiper-button-prev")}},n?{autoplay:{delay:s,disableOnInteraction:!0}}:{})),{children:r==null?void 0:r.map(({id:g,images:b,image:S,label:w})=>l.jsx(m,{children:l.jsx(Ke,{images:b,filename:S,alt:w!=null?w:""})},g))})))})},[n,s,t,r,e]),l.jsx("div",{style:a,children:l.jsxs("div",{className:"swiper-container",ref:c,children:[i,l.jsx("div",{className:"swiper-button-next","data-testid":"swiper-button-next",children:l.jsx(Ou,{})}),l.jsx("div",{className:"swiper-button-prev","data-testid":"swiper-button-prev",children:l.jsx(Vu,{})}),l.jsx("div",{className:"swiper-pagination"})]})})}const Uu=({config:e})=>l.jsx(Fu,{wrapperStyle:P(e.legacySpacingStyle),options:e.options,speed:e.speed,loop:e.loop,autoplay:e.autoplay,delay:e.delay}),Wu=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),outerClassName:e.containerClass,outerStyle:P(e.style)}),Hu=({children:e,config:t})=>l.jsx("div",{className:D("block-content photo-carousel-block swiper",t.outerClassName),style:t.outerStyle,id:`photo-carousel-block-${t.blockId}`,children:e}),qu=E(v({},ae()),{getConfig:Wu,Container:Uu,Wrapper:Hu});function zu({filled:e,total:t,wrapperStyle:n,empty:s}){const a=[],r=e+(s!=null?s:0),i=t!=null?t:r;for(let o=0;o<Math.max(i,e);o++){const c=o<e;a.push({index:o,isFilled:c})}return l.jsx("div",{className:"progress-block-container",style:n,children:a.map(({index:o,isFilled:c})=>l.jsx("span",{className:D("progress-item",{filled:c})},o))})}const Ku=({config:e})=>l.jsx(zu,{wrapperStyle:P(e.legacySpacingStyle),total:e.total,filled:e.filled,empty:e.empty}),Gu=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),outerClassName:e.class,outerStyle:P(e.style)}),Yu=({children:e,config:t})=>l.jsx("div",{className:D("block-content progress-block",t.outerClassName),style:t.outerStyle,id:t.blockId,children:e}),Ju=E(v({},ae()),{getConfig:Gu,Container:Ku,Wrapper:Yu}),rs={start:0,range:{min:0,max:100},inputUpdateDelay:1e3,format:{to:e=>e.toString(),from:e=>Number(e)}};function Fr(e){return Fe([e.systemLabel,e.label,e.blockId])}const Ms=e=>lr({decimals:e.decimals,thousand:e.thousand,suffix:e.suffix,prefix:e.prefix}),Zu=e=>E(v(v({},rs),e),{range:v(v({},rs.range),e.range),format:v(v({},rs.format),Ms(e.format))}),Ft=e=>Number(e.replace(/\D/g,"")),Ur=(e,t)=>{var i,o,c,d;const n=Ms(t.format),s=n.to(t.range.max),a=n.to(t.range.min);return e===t.range.max?((i=t.maxPrefix)!=null?i:"")+s+((o=t.maxSuffix)!=null?o:""):e===t.range.min&&e!==0?((c=t.minPrefix)!=null?c:"")+a+((d=t.minSuffix)!=null?d:""):n.to(e)},Xu=(e,t,n)=>e>n?n:e<t?t:e;function Qu({options:e,handleChange:t,inputValue:n,hasFocus:s,setInputSize:a,setTooltipPosition:r}){const i=y.useRef(null),o=y.useRef(null),{inputUpdateDelay:c,range:{min:d,max:u}}=e,m=y.useCallback(f=>{const g=Ur(f,e);a(g.length+"ch"),r((f-d)/(u-d)*100)},[u,d,e,a,r]),h=y.useCallback(f=>{var b;const g=Xu(f,d,u);g!==f&&t(g.toString()),(b=o.current)==null||b.set([g]),m(g)},[m,u,d,t]),p=y.useRef(cr(f=>{h(f)},c)).current;return y.useEffect(()=>{const f=async()=>{var w;if(!i.current||i.current.classList.contains("noUi-target"))return;const g=await te(()=>import("./nouislider.chunk-Chh2SjhD.js").then(k=>k.n),[]),b=(w=g.default)!=null?w:g;(()=>{i.current&&(o.current=b.create(i.current,Zu(e)),o.current.on("update",k=>{m(Ft(k[0]))}),o.current.on("change",k=>{t(k[0])}),o.current.on("start",()=>{var k;(k=i.current)==null||k.classList.add("dragging")}),o.current.on("end",()=>{var k;(k=i.current)==null||k.classList.remove("dragging")}))})()};return o.current||f(),()=>{o.current&&(o.current.off(),o.current.destroy(),o.current=null)}},[e,t,m]),y.useEffect(()=>{var S;const f=(S=o.current)==null?void 0:S.get();if(f==null)return;const g=Ft(f),b=Ft(n);if(g!==b){if(!s){p.cancel(),h(b);return}p(b)}},[p,s,n,h]),i}function em({id:e,value:t,wrapperStyle:n,handleChange:s,handleBlur:a,dataSensitive:r,dataTfSensitive:i,dataLabel:o,withImage:c,image:d,images:u,imgStyle:m,imgClassName:h,svg:p,hideLabel:f,hideLabels:g,hideInput:b,hideNumeric:S,dataVariable:w,label:k,options:C}){const[T,V]=y.useState(!1),[M,_]=y.useState("2ch"),[N,$]=y.useState(50),W=Qu({options:C,handleChange:s,inputValue:t,hasFocus:T,setInputSize:_,setTooltipPosition:$}),ee=Ms(C.format);return l.jsxs("div",{style:n,children:[c&&l.jsx("div",{children:l.jsx(Ke,{filename:d,alt:k!=null?k:"",style:m,className:h})}),l.jsxs("div",{className:"slider-container",children:[p&&l.jsx("div",{className:"slider-svg-container",style:{width:"inherit",height:"inherit"},dangerouslySetInnerHTML:{__html:kd(p)}}),d&&l.jsx("div",{className:"slider-image-container",children:l.jsx(Ke,{filename:d,images:u,alt:k!=null?k:""})}),l.jsx("div",{className:"slider-image-container"}),l.jsxs("div",{className:"slider-wrapper",children:[l.jsxs("div",{className:"slider-header",children:[k&&!f&&l.jsx("span",{className:"slider-label label",children:k}),l.jsxs("div",{className:`slider-header-input ${b?"hide":""}`,children:[l.jsx("input",{id:`${e}-input`,name:e,value:Ur(Ft(t),C),"data-sensitive":r,"data-tf-sensitive":i,"data-variable":w,"data-label":o,"data-type":"range-slider",className:"slider-input",type:"text",onChange:A=>s(A.target.value),onFocus:()=>V(!0),onBlur:A=>{V(!1),a(A.target.value)},style:{"--slider-input-size":M}}),!S&&l.jsx("input",{id:`${e}-input-numeric`,name:`${e}-numeric`,value:Ft(t),"data-sensitive":r,"data-tf-sensitive":i,"data-variable":`${w}_num`,"data-label":`${o} [numeric]`,"data-type":"range-slider-numeric",className:"hide",type:"number",readOnly:!0})]})]}),l.jsx("div",{ref:W,className:"slider-content",id:"{{id}}-content",style:{"--slider-tooltip-left":`${N}%`,"--slider-tooltip-transform":`translateX(-${N}%)`}}),!g&&l.jsxs("div",{className:"slider-labels",children:[l.jsx("label",{children:ee.to(C.range.min)}),l.jsx("label",{children:ee.to(C.range.max)})]}),l.jsx("div",{className:"slider-tooltip-helper"})]})]})]})}const tm=({config:e})=>{var d,u;const{client:t}=fe(),{state:n,setState:s}=Oe("rangeSlider",e.blockId),a=y.useRef(n.value),r=y.useMemo(()=>E(v({},e.options),{start:Number(a.current)}),[e]),i=y.useCallback(m=>{var h;s({value:m}),(h=t==null?void 0:t.dispatchHeyflowEvent)==null||h.call(t,{eventName:"heyflow-change"})},[s,t]),o=y.useCallback(m=>{s({value:m})},[s]);return l.jsx(em,{id:e.blockId,value:n.value,handleChange:i,handleBlur:o,dataLabel:Fr(e),wrapperStyle:P(e.legacySpacingStyle),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataVariable:(d=e.variableName)!=null?d:"",svg:e.svg,image:e.image,images:e.images,imgStyle:P(`${(u=e.legacyImgStyle)!=null?u:""} margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0;`),imgClassName:e.legacyImgClass,withImage:e.withImage,hideLabel:e.hideLabel,hideLabels:e.hideLabels,hideInput:e.hideInput,hideNumeric:e.hideNumeric,label:e.label,options:r})},nm=(e,t)=>{var n;return{name:Fr(e),value:t.state.value,isSensitive:(n=e.isSensitive)!=null?n:!1}},sm=(e,t)=>{var n;return t.value?[{id:`${e.blockId}-input`,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"range-slider",values:[{answer:t.value,name:t.value}],variable:(n=e.variableName)!=null?n:e.blockId}]:[]},am=(e,t)=>{t.setState({value:""})},rm=({config:e,restoredData:t})=>{var s;const n=e.options.start?e.options.start.toString():"";return{value:(s=t==null?void 0:t.value)!=null?s:n}},im=(e,t,{purifyXML:n})=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),isSensitive:e.sensitive,legacyImgStyle:e.imgStyle,legacyImgClass:e.imgClass,variableName:e.variable,withImage:e.withImage,hideLabel:e.hideLabel,options:e.options,outerClassName:e.class,outerStyle:P(e.style),attributedOptions:Wn(e.options),svg:e.svg?n(e.svg):void 0}),om=(e,t)=>{if(t.variableName)return{[t.variableName]:e.value,[t.variableName+"_num"]:Number(e.value)}},lm=({blockState:e})=>e.state.value,cm=({blockState:e,value:t})=>{e.setState({value:t})},dm=({children:e,config:t})=>l.jsx("div",{className:D("block-content range-slider range-slider-block",t.outerClassName,{"with-image":t.withImage}),style:t.outerStyle,id:t.blockId,"data-id":t.blockId,"data-options":t.attributedOptions,"data-variable":t.variableName,children:e}),um=E(v({},ae()),{getResponseData:nm,getSubmittableResponseData:sm,reset:am,getInitialState:rm,getConfig:im,Container:tm,getVariableState:om,Wrapper:dm,getValue:lm,setValue:cm}),mm=({optionsContainerRef:e,isAnimated:t,animationTimeoutInMs:n,onAnimationEnd:s})=>{const a=y.useRef([]),r=y.useCallback(()=>{a.current.forEach(window.clearTimeout),a.current=[]},[]),i=y.useCallback((u,m)=>{const h=window.setTimeout(u,m);a.current.push(h)},[]),o=y.useCallback(u=>{u.forEach(m=>{const h=m.querySelector(".text-container"),p=m.querySelector(".graphics-container"),f=m.querySelector(".loader");h&&h.classList.add("text-container-hidden"),p&&(p.classList.remove("graphics-container-show"),p.classList.add("graphics-container-hidden")),f&&(f.style.display="block")})},[]),c=y.useCallback((u,m)=>{o(m),m.forEach((h,p)=>{const f=p+1;if(p===0){const g=h.querySelector(".loader"),b=h.querySelector(".text-container");g&&g.classList.add("loader-active"),b&&b.classList.remove("text-container-hidden")}i(()=>{const g=h.querySelector(".loader"),b=h.querySelector(".graphics-container"),S=f<m.length?u.querySelector(`#${m[f].id} .loader`):null,w=f<m.length?u.querySelector(`#${m[f].id} .text-container`):null;S&&S.classList.add("loader-active"),g&&(g.style.display="none",g.classList.remove("loader-active")),b&&(b.classList.remove("graphics-container-hidden"),b.classList.add("graphics-container-show")),w&&w.classList.remove("text-container-hidden")},n*(p+1))})},[n,i,o]),d=y.useCallback(u=>{var h;r();const m=u.querySelectorAll(".rich-list-v2-option");(m==null?void 0:m.length)!==0&&(i(()=>{s==null||s()},n*((h=m==null?void 0:m.length)!=null?h:0)),c(u,m))},[c,n,r,s,i]);y.useEffect(()=>{if(!e.current)return;const u=e.current;return t&&d(u),()=>{r()}},[t,d,r,e])};function hm({options:e,isAnimated:t,animationMode:n,columns:s,columnsMobile:a,containerClass:r,style:i,class:o,spacingStyle:c,animationTimeoutInMs:d,onAnimationEnd:u}){const m=y.useRef(null);return mm({optionsContainerRef:m,isAnimated:t,animationTimeoutInMs:d!=null?d:1e3,onAnimationEnd:u}),l.jsx("div",{style:c,children:l.jsx("div",{className:D("rich-list-v2-block",r),"data-is-animated":t,"data-animation-mode":n,children:l.jsx("div",{className:D("rich-list-v2",o),style:i,children:l.jsx("div",{ref:m,className:D("rich-list-v2-options",{[`grid-cols-${s}`]:s,[`rich-list-v2-mobile-grid-cols-${a}`]:a}),children:e==null?void 0:e.map((h,p)=>l.jsx("div",{children:l.jsxs("div",{id:h.id,"data-testid":`rich-list-option-${p}`,className:D("rich-list-v2-option",h.class),children:[l.jsx("div",{className:"loader"}),l.jsx("div",{className:D("graphics-container",{"graphics-container-hidden":t}),children:h.svg?l.jsx("div",{dangerouslySetInnerHTML:{__html:h.svg}}):h.image?l.jsx(Ke,{filename:h.image,images:h.images,alt:h.id}):h.emoji?l.jsx("div",{className:"emoji",children:h.emoji}):null}),l.jsxs("div",{className:D("text-container",t&&"text-container-hidden"),children:[l.jsx("div",{className:"label",dangerouslySetInnerHTML:{__html:st(h.label)}}),l.jsx("div",{className:"text",dangerouslySetInnerHTML:{__html:st(h.text)}})]})]})},h.id))})})})})}const fm=({config:{options:e,isAnimated:t=!1,animationTimeoutInMs:n=1e3,animationMode:s="default",columns:a,columnsMobile:r,containerClass:i,withAction:o,action:c,style:d,class:u,spacingStyle:m,destination:h,target:p,urlOmitEmptyVars:f,redirectURL:g}})=>{const{client:b}=fe(),S=y.useCallback(()=>{if(b!=null&&b.isInPreviewMode){b.messageParent({event:"loaderPreviewNavigation"});return}o&&c&&(b==null||b.requestNavigation({mode:"sync",action:c,destination:h,options:{target:p,urlOmitEmptyVars:f,redirectURL:g}}))},[b,o,c,h,p,f,g]);return l.jsx(hm,{spacingStyle:m?P(m):{},options:e,isAnimated:t,animationMode:s,columns:a,columnsMobile:r,containerClass:i,style:d?P(d):{},class:u,onAnimationEnd:S,animationTimeoutInMs:n,attributedOptions:""})},pm=(e,t,{draftToHTML:n,purifyXML:s})=>{var r,i;const a=((r=e.options)!=null?r:[]).map(o=>E(v({},o),{label:typeof o.label=="string"?s(o.label):s(n(o.label.content)),text:typeof o.text=="string"?s(o.text):s(n(o.text.content)),svg:o.svg?s(o.svg):void 0}));return E(v(v({},re(e)),e),{options:a,spacingStyle:ce(e),isAnimated:(i=e.isAnimated)!=null?i:!1,animationMode:e.animationMode,columns:e.columns&&Math.min(e.columns,a.length),columnsMobile:e.columnsMobile&&Math.min(e.columnsMobile,a.length),outerClassName:e.containerClass,attributedOptions:Wn(e)})},gm=({children:e,config:t})=>l.jsx("div",{className:D("block-content rich-list-v2-block",t.outerClassName),id:`rich-list-v2-block-${t.blockId}`,"data-is-animated":t.isAnimated,"data-animation-timeout":t.animationTimeoutInMs,"data-animation-mode":t.animationMode,"data-action":t.action,"data-options":t.attributedOptions,children:e}),vm=E(v({},ae()),{getConfig:pm,Container:fm,Wrapper:gm});function ym({content:e,wrapperStyle:t}){const n=typeof e=="string"?e==null?void 0:e.replace(/>[\n\t]+</g,"><"):"";return l.jsx("div",{className:"rich-text",style:t,dangerouslySetInnerHTML:{__html:st(n)}})}const bm=({config:e})=>l.jsx(ym,{content:e.content,wrapperStyle:P(e.legacySpacingStyle)}),wm=(e,t,{draftToHTML:n,purifyXML:s})=>{let a=e.content;return typeof a=="string"?a=n(a):a=n(JSON.stringify(a)),E(v({},re(e)),{legacySpacingStyle:ce(e),content:s(a),outerClassName:e.class})},Sm=({children:e,config:t})=>l.jsx("div",{className:D("block-content text-block",t.outerClassName),style:P(t.blockStyle),id:`text-block-${t.blockId}`,children:e}),km=E(v({},ae()),{getConfig:wm,Container:bm,Wrapper:Sm});function Em({handleChange:e,handleOptionClick:t,scaleId:n,option:s,optionIndex:a,hoveredIndex:r,handleMouseEnter:i,handleMouseLeave:o,dataLabel:c,dataSensitive:d,dataTfSensitive:u,getIconWidth:m,defaultSvg:h,selectedValue:p,isNavigationActive:f,activeIconColor:g,displayOptionLabels:b,showTooltips:S,isIconRating:w}){const{id:k,label:C,checked:T}=s,V=r!==null?a<=r:T,M=({emoji:_,icon:N,svg:$})=>_?l.jsx("div",{className:"emoji",children:_}):N?l.jsx("div",{className:"material-icons",style:{fontSize:`${m()}px`},dangerouslySetInnerHTML:{__html:N}}):l.jsx("div",{className:"scale-option-svg-container",dangerouslySetInnerHTML:{__html:$!=null?$:h}});return l.jsxs("label",{htmlFor:`${k}-option`,onMouseEnter:()=>i(a),onMouseLeave:o,className:`scale-option ${V?"active":""}`,"data-action":f?"next":null,children:[l.jsx("input",{id:`${k}-option`,name:n,value:k,onChange:e,onClick:()=>t(C!=null?C:k),type:"radio",checked:p===k,"aria-label":c,"data-type":"scale","data-label":c,"data-answer":C,"data-sensitive":d,"data-tf-sensitive":u,"data-checked":p===k}),w?l.jsx("div",{className:"icon-option-content",style:{color:V?g:void 0},children:M(s)}):l.jsx("div",{className:"scale-option-content",children:b&&C&&l.jsx("div",{className:"label",children:C})}),S&&C&&l.jsx("div",{className:"tooltip bottom","aria-describedby":C,children:C})]})}function xm({handleChange:e,handleClick:t,id:n,spacing:s,labels:a,options:r,isIconRating:i,className:o,isNavigationActive:c,displayOptionLabels:d,showTooltips:u,dataLabel:m,dataSensitive:h,dataTfSensitive:p,hideLabels:f,defaultSvg:g,activeIconColor:b,getIconWidth:S,selectedValue:w}){const[k,C]=y.useState(null),T=r.findIndex($=>$.id===w),V=$=>{const W=$.target.value;e(W)},M=$=>C($),_=()=>C(null),N=($,W)=>!w||T===-1?$.checked:W<=T;return l.jsxs("div",{style:v({},s),children:[!f&&l.jsx("div",{className:"labels-container",children:a.map(($,W)=>l.jsx("label",{children:$},`${$}-${W}`))}),l.jsx("div",{id:`scale-${n}`,className:`scale ${i?"icon-rating":""} ${o}`,children:r.map(($,W)=>l.jsx(Em,{scaleId:n,handleChange:V,handleOptionClick:t,handleMouseEnter:M,handleMouseLeave:_,getIconWidth:S,selectedValue:w,hoveredIndex:k,activeIconColor:b,defaultSvg:g,option:E(v({},$),{checked:N($,W)}),optionIndex:W,isNavigationActive:c,displayOptionLabels:d,showTooltips:u,dataLabel:m,dataSensitive:h,dataTfSensitive:p,isIconRating:i},$.id))})]})}function Wr(e){return Fe([e.systemLabel,e.labels.join(", "),e.blockId])}const Im=({config:e})=>{var c;const{client:t}=fe(),{state:n,setState:s}=Oe("scale",e.blockId),a=42,r=d=>{s({value:d})},i=d=>{var u;e.isNavigationActive&&(t==null||t.requestNavigation({mode:"sync",action:"next"})),(u=t==null?void 0:t.dispatchHeyflowEvent)==null||u.call(t,{eventName:"heyflow-input-click",payload:{customEventName:jr(d),customEventLabel:d}})},o=()=>t!=null&&t.rootElementWidth?Math.min(a,(t==null?void 0:t.rootElementWidth)/e.options.length-3):a;return l.jsx(xm,{id:e.blockId,handleChange:r,handleClick:i,dataLabel:Wr(e),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,spacing:P(e.legacySpacingStyle),labels:e.labels,options:e.options,isIconRating:e.isIconRating,className:e.legacyClass,isNavigationActive:e.isNavigationActive,displayOptionLabels:e.displayOptionLabels,showTooltips:e.showTooltips,hideLabels:e.hideLabels,defaultSvg:e.defaultSvg,activeIconColor:e.activeIconColor,getIconWidth:o,selectedValue:(c=n.value)!=null?c:""})},Cm=(e,t)=>({name:Wr(e),value:t.state.value,isSensitive:e.isSensitive}),Lm=(e,t)=>{var s;if(!t.value)return[];const n=e.options.find(a=>a.id===t.value);return n?[{id:n.id,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"scale",values:[{answer:(s=n.label)!=null?s:n.id,name:n.id}],variable:e.blockId}]:[]},Nm=(e,t)=>{t.setState({value:null})},_m=({config:e,restoredData:t})=>{var s,a;const n=e.options.toReversed().find(r=>r.checked);return{value:(a=(s=t==null?void 0:t.value)!=null?s:n==null?void 0:n.id)!=null?a:null}},Am=(e,t,{purifyXML:n})=>{var s,a,r,i;return E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),labels:(s=e.labels)!=null?s:[],options:((a=e.options)!=null?a:[]).map(o=>E(v({},o),{icon:o.icon?n(o.icon):void 0,svg:o.svg?n(o.svg):void 0})),legacyClass:e.class,isNavigationActive:e.autoRedirect,displayOptionLabels:e.displayLabel,isSensitive:(r=e.sensitive)!=null?r:!1,defaultSvg:n((i=e.svg)!=null?i:""),activeIconColor:e.activeColor,outerClassName:e.containerClass,outerStyle:P(e.style),defaultColor:e.defaultColor,isIconRating:e.iconRating})},Tm=({blockState:e})=>e.state.value,Rm=({blockState:e,value:t})=>{e.setState({value:t})},$m=({children:e,config:t})=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:D("block-content scale-block",t.outerClassName),style:t.outerStyle,id:`scale-block-${t.blockId}`,"data-id":t.blockId,children:e}),t.isIconRating&&l.jsx("style",{dangerouslySetInnerHTML:{__html:`
              ${t.defaultColor?`
                    #scale-${t.blockId}.icon-rating .scale-option i, #scale-${t.blockId}.icon-rating .scale-option svg {
                      color: ${t.defaultColor};
                      fill: currentcolor;
                    }
                `:""}

              #scale-${t.blockId}.icon-rating .scale-option.active i, #scale-${t.blockId}.icon-rating .scale-option.active svg {
                color: ${t.activeIconColor};
                fill: currentcolor;
              }
            `}})]}),jm=E(v({},ae()),{getResponseData:Cm,getSubmittableResponseData:Lm,reset:Nm,getInitialState:_m,getConfig:Am,Container:Im,Wrapper:$m,getValue:Tm,setValue:Rm});function Pm({spacingStyles:e,completed:t}){return l.jsx("div",{style:e,children:l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-bar-active",style:{width:`${t}%`}})})})}const Bm=({config:e})=>{const{client:t}=fe(),[n,s]=y.useState(0);return Bs(()=>{t&&s(Math.min(1,(t.getCurrentScreenIndex()+1)/t.getScreensLength())*100)}),l.jsx(Pm,{spacingStyles:e.spacingStyles,completed:n})},Mm=e=>{var t;return E(v({},re(e)),{spacingStyles:(t=P(ce(e)))!=null?t:{}})},Dm=({children:e,config:t})=>l.jsx("div",{className:"block-content progress-bar-block",id:`progress-bar-block-${t.blockId}`,children:e}),Vm=E(v({},ae()),{getConfig:Mm,Container:Bm,Wrapper:Dm}),Ea=()=>l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function Om({className:e,dataInitialRequired:t,dataLabel:n,dataSensitive:s,dataTfSensitive:a,dataVariable:r,dataSelected:i,handleChange:o,id:c,label:d,name:u,options:m,placeholder:h,required:p,selectStyle:f,value:g,wrapperStyle:b,clientConfig:S}){const[w,k]=y.useState(!1),[C,T]=y.useState(null),V=y.useRef(null);Vr(V,()=>{k(!1)},S);const M=N=>{if(!w){(N.key==="ArrowDown"||N.key==="Enter")&&(N.preventDefault(),k(!0),T(0));return}switch(N.key){case"ArrowDown":N.preventDefault(),T($=>$===null||$===m.length-1?0:$+1);break;case"ArrowUp":N.preventDefault(),T($=>$===null||$===0?m.length-1:$-1);break;case"Enter":case" ":N.preventDefault(),C!==null&&(o(m[C].value),k(!1));break;case"Escape":N.preventDefault(),k(!1);break;case"Tab":C!==null&&o(m[C].value),k(!1);break}},_=y.useMemo(()=>m.find(N=>N.value?N.value===g:N.label===g),[m,g]);return l.jsxs("div",{style:b,children:[d?l.jsx("label",{id:`${c}-label`,htmlFor:c,children:d}):null,l.jsxs("div",{className:"select",children:[l.jsxs("div",{className:"select-mobile",children:[l.jsxs("select",{id:c,name:u,required:p,value:g,className:e,style:f,"data-initial-required":t,"data-label":n,"data-selector":"select","data-sensitive":s,"data-tf-sensitive":a,"data-type":"select","data-variable":r,"data-selected":i,"data-is-react-input":"true",onChange:N=>o(N.currentTarget.value),children:[l.jsx("option",{disabled:!0,value:"",children:h}),m.map(N=>l.jsx("option",{value:N.value,children:N.label},N.id))]}),l.jsx("span",{className:"select-arrow select-arrow-down","aria-hidden":"true",children:l.jsx(Ea,{})})]}),l.jsxs("div",{ref:V,className:"select-desktop",role:"presentation",children:[l.jsxs("button",E(v({id:`${c}-button`,role:"combobox",name:`${u}-button`,onClick:()=>k(N=>!N),onKeyDown:M,className:"select-input","aria-haspopup":"listbox","aria-expanded":w,"aria-controls":`${c}-listbox`,"aria-activedescendant":C!==null&&w?`${c}-option-${C}`:void 0},d&&{"aria-labelledby":`${c}-label`}),{children:[(_==null?void 0:_.label)||h,l.jsx("span",{className:"select-arrow","aria-hidden":"true",children:l.jsx(Ea,{})})]})),w&&l.jsx("ul",{id:`${c}-listbox`,role:"listbox",className:"select-dropdown",children:m.map((N,$)=>l.jsx("li",{id:`${c}-option-${$}`,className:`select-option ${$===C?"highlighted":""}`,role:"option","aria-selected":g===N.value,"aria-label":N.label,tabIndex:-1,onClick:()=>{T($),o(N.value),k(!1)},children:N.label},N.id))})]})]})]})}function Hr(e){return Fe([e.systemLabel,e.label,e.placeholder,e.blockId])}function qt(e){return e.systemLabel||e.label}function Fm(e,t,n){return y.useMemo(()=>{let s=e.map(a=>({id:a.id,label:a.label,value:qt(a)}));return t&&(s=s.sort((a,r)=>a.label.localeCompare(r.label))),n&&(s=s.reverse()),s},[e,t,n])}const Um=({config:e,handleValidation:t})=>{var o,c,d;const{client:n}=fe(),{state:s,setState:a}=Oe("select",e.blockId),r=Fm(e.options,e.sortAlphabetically,e.sortReverse),i=u=>{var m;a({value:u}),t(),(m=n==null?void 0:n.dispatchHeyflowEvent)==null||m.call(n,{eventName:"heyflow-change"})};return l.jsx(Om,{className:e.legacyClass,dataInitialRequired:e.isRequired?"true":void 0,dataLabel:Hr(e),dataSensitive:e.isSensitive?"true":void 0,dataTfSensitive:e.isSensitive?"true":void 0,dataVariable:(o=e.variableName)!=null?o:"",dataSelected:(c=e.preselected)!=null?c:"",handleChange:i,id:e.blockId,label:e.label,name:e.blockId,options:r,placeholder:e.placeholder,required:e.isRequired?!0:void 0,selectStyle:P(e.legacyStyle),value:(d=s.value)!=null?d:"",wrapperStyle:P(e.legacySpacingStyle),clientConfig:n})},Wm=(e,t)=>{let n="";if(t.state.value){const s=e.options.find(a=>qt(a)===t.state.value);s?n=qt(s):(console.warn(`The options of the Select block ${e.blockId} changed after the user already selected an option.`),n=t.state.value)}return{name:Hr(e),value:n,isSensitive:e.isSensitive}},Hm=(e,t)=>{var n;return t.value?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"select",values:[{answer:t.value,name:t.value}],variable:(n=e.variableName)!=null?n:e.blockId}]:[]},qm=e=>H.object({value:H.string().refine(t=>!e.isRequired&&t===""?!0:e.options.map(qt).includes(t),"Unknown select option provided")}),zm=({result:e,element:t})=>{const n=t.querySelector('[data-selector="select"]');if(!n)throw new Error("Elements not defined");e.success?n.setCustomValidity(""):n.setCustomValidity(e.error.message)},Km=(e,t)=>{t.setState({value:""})},Gm=({config:e,params:t,restoredData:n})=>{let s;if(e.preselected){const o=e.options.find(c=>c.id===e.preselected);o&&(s=qt(o))}const a=e.variableName&&t.get(e.variableName),r=n==null?void 0:n.value,i=a||r;return i?[{value:s||""},{value:i}]:{value:s||""}},Ym=e=>{var t;return E(v({},re(e)),{label:e.label,isRequired:e.required,placeholder:(t=e.placeholder)!=null?t:"",preselected:e.selected,systemLabel:e.systemLabel,isSensitive:e.sensitive,variableName:e.variable,options:e.options,outerClassName:e.class,outerStyle:P(e.style),legacyStyle:e.selectStyle,legacyClass:e.selectClass,legacySpacingStyle:ce(e),sortAlphabetically:!!e.sortBy,sortReverse:e.sortReverse})},Jm=(e,t)=>{if(t.variableName)return{[t.variableName]:e.value}},Zm=({blockState:e,config:t})=>{var n,s;return(s=(n=t.options.find(a=>a.id===e.state.value))==null?void 0:n.label)!=null?s:null},Xm=({blockState:e,value:t})=>{e.setState({value:t})},Qm=({configState:e})=>({getOptions:()=>e.config.options,setOptions:t=>{e.setConfig({options:t})}}),eh=({children:e,config:t})=>{var n;return l.jsx("div",{className:`block-content select-block ${(n=t.outerClassName)!=null?n:""}`,style:t.outerStyle,id:`select-block-${t.blockId}`,children:e})},th=E(v({},ae()),{getResponseData:Wm,getSubmittableResponseData:Hm,getValidationSchema:qm,onValidate:zm,reset:Km,getConfig:Ym,Container:Um,getInitialState:Gm,getVariableState:Jm,Wrapper:eh,getValue:Zm,setValue:Xm,getCustomMethods:Qm});function nh({className:e,style:t,wrapperStyle:n}){return l.jsx("div",{style:n,children:l.jsx("div",{className:e,style:t})})}const sh=({config:e})=>l.jsx(nh,{className:e.legacyClass,style:P(e.legacyStyle),wrapperStyle:P(`${e.legacyWrapperHeightStyle?`height:${e.legacyWrapperHeightStyle};`:""} ${e.legacyWrapperSpacingStyle}`)}),ah=e=>E(v(v({},re(e)),e),{legacyClass:e.class,legacyStyle:e.style,legacyWrapperSpacingStyle:ce(e),legacyWrapperHeightStyle:String(e.height),outerClassName:e.containerClass,outerStyle:P(e.containerStyle)}),rh=({children:e,config:t})=>l.jsx("div",{className:D("block-content separator-block",t.outerClassName),style:t.outerStyle,id:`separator-block-${t.blockId}`,children:e}),ih=E(v({},ae()),{getConfig:ah,Container:sh,Wrapper:rh});async function oh(e,t){const n=await new Promise((f,g)=>{const b=new Image;b.onload=()=>f(b),b.onerror=S=>g(S),b.src=e}),{width:s,height:a}=n,r=document.createElement("canvas");r.width=s,r.height=a;const i=r.getContext("2d");if(!i)throw new Error("Couldn't get canvas 2d context");i.drawImage(n,0,0);const{data:o}=i.getImageData(0,0,s,a);let c=s,d=-1,u=a,m=-1;for(let f=0;f<a;f++)for(let g=0;g<s;g++)o[4*(f*s+g)+3]>0&&(c=Math.min(c,g),d=Math.max(d,g),u=Math.min(u,f),m=Math.max(m,f));if(c>=d||u>=m)return e;const h=document.createElement("canvas");h.width=d-c+1+2*t,h.height=m-u+1+2*t;const p=h.getContext("2d");if(!p)throw new Error("Couldn't get canvas 2d context");return p.drawImage(r,-c+t,-u+t),h.toDataURL()}function lh(e,t){const[n,s]=y.useState(),[a,r]=y.useState(),i=y.useCallback(async c=>new Promise((d,u)=>{if(!e)return u();if(e.isInPreviewMode)return d("preview");e.sendLog({message:"Starting file upload via signature block"}),e.uploadFile({file:c,accept:c.type,onProgress:()=>m=>{e.sendLog({message:"Succeeded uploading file via signature block",data:{fileId:m}}),d(m)},onError:m=>{e.sendLog({message:"Failed uploading file via signature block",data:{reason:m.reason}}),u(m)}})}),[e]),o=y.useCallback(async({currentData:c,signatureImageDataUrl:d})=>{var u;try{const m=await oh(d,20),p=await(await fetch(m)).arrayBuffer(),f=new File([p],"signature.png",{type:"image/png"}),g=await i(f);c.length>0?(s(m),t({isSigned:!0,uploadID:g!=null?g:""})):(s(void 0),t({isSigned:!1,uploadID:""})),r(c)}catch(m){console.error("ERROR while saving signature",m),t({isSigned:!1,uploadID:""}),e==null||e.sendLog({message:"Failed saving signature via signature block",data:{reason:typeof m=="object"?typeof m.toString=="function"?m.toString():(u=m.message)!=null?u:"Unsubmittable error":m}})}},[i,t]);return{previewImage:n,signatureData:a,saveSignature:o}}function ch(e=[]){const[t,n]=y.useState(e),s=y.useRef([]),a=y.useRef([]),r=c=>{s.current.push(t),a.current=[],n(c)},i=y.useCallback(()=>{if(s.current.length<1)return;a.current.unshift(t);const c=s.current.pop();n(c)},[t]),o=y.useCallback(()=>{if(a.current.length>0){const c=a.current.shift();s.current.push(t),n(c)}},[t]);return{currentData:t,saveCurrent:r,undo:i,redo:o}}const dh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M216 56H40M104 104v64M152 104v64M200 56v152a8 8 0 0 1-8 8H64a8 8 0 0 1-8-8V56M168 56V40a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v16"})]}),uh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M200 56 56 200M200 200 56 56"})]}),mh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M163.9 148.1h64v-64"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M32 184a96 96 0 0 1 163.9-67.9l32 32"})]}),hh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M216 72 104 184l-56-56"})]}),fh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:192,height:192,fill:"currentColor",viewBox:"0 0 256 256",children:[l.jsx("path",{fill:"none",d:"M0 0h256v256H0z"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M92.1 148.1h-64v-64"}),l.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M224 184a96 96 0 0 0-163.9-67.9l-32 32"})]});function ph(e){let t=e;!t&&navigator&&(t=navigator.language.split("-")[0].toLowerCase());function n(s,a){return t==="de"?a:s}return{sign:n("Sign","Schild"),undo:n("Undo","Rckgngig"),redo:n("Redo","Wiederherstellen"),clear:n("Clear","Klar"),close:n("Close","Schlieen"),save:n("Save","Speichern")}}const gh=({clientLanguage:e,initialData:t,onClose:n,onSave:s})=>{const[a,r]=y.useState(!1),i=y.useRef(null),o=y.useRef(null),{currentData:c,saveCurrent:d,undo:u,redo:m}=ch(t),h=ph(e),p=()=>{var k,C;const w=(C=(k=o.current)==null?void 0:k.toData())!=null?C:[];d(w.slice())},f=()=>{var w;(w=o.current)==null||w.clear(),d([])},g=y.useCallback(()=>{setTimeout(()=>{var w;(w=i.current)==null||w.classList.remove("show")},50),setTimeout(()=>{n()},300)},[n]),b=y.useCallback(async()=>{o.current&&(r(!0),await s({currentData:c,signatureImageDataUrl:o.current.toDataURL()}),r(!1),g())},[g,c,s]),S=y.useCallback(w=>{w.key==="Escape"&&(w.stopPropagation(),w.preventDefault(),g()),w.key==="Enter"&&(w.stopPropagation(),w.preventDefault(),b())},[g,b]);return y.useEffect(()=>{var w;(w=o.current)==null||w.fromData(c.slice())},[c]),y.useEffect(()=>{var w;return(w=i.current)==null||w.classList.add("show"),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}},[g]),l.jsx("div",{ref:i,className:"signature-overlay",onClick:g,onKeyDown:S,tabIndex:-1,children:l.jsxs("div",{className:"signature-popup",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"signature-toolbar signature-toolbar-top",children:[l.jsx("button",{className:"icon",title:h.close,onClick:g,disabled:a,children:l.jsx(uh,{})}),l.jsx("button",{className:"icon",title:h.clear,onClick:f,disabled:a,children:l.jsx(dh,{})}),l.jsx("span",{style:{flexGrow:1}}),l.jsx("button",{className:"icon",title:h.undo,onClick:u,disabled:a,children:l.jsx(fh,{})}),l.jsx("button",{className:"icon",title:h.redo,onClick:m,disabled:a,children:l.jsx(mh,{})}),l.jsx("span",{style:{flexGrow:1}}),l.jsx("button",{className:"icon",title:h.save,onClick:b,disabled:a,children:l.jsx(hh,{})})]}),l.jsx("div",{className:"signature-canvas-wrapper",children:l.jsx(yo,{ref:o,onEnd:p})})]})})};function vh({clientLanguage:e,blockId:t,dataLabel:n=t,wrapperStyle:s,yesAnswer:a,noAnswer:r,isRequired:i,containerClass:o,text:c,label:d,hasErrors:u,signature:m,previewImage:h,isSigned:p,uploadID:f,clientRoot:g,onSave:b}){const[S,w]=y.useState(!1),k=()=>{w(!0)},C=()=>{w(!1)},T=p?a!=null?a:"true":r!=null?r:"false",V=y.useMemo(()=>{if(typeof document!="undefined")return g?g instanceof ShadowRoot?g:g.body:document.body},[g]);return l.jsxs(l.Fragment,{children:[l.jsx("link",{rel:"stylesheet",type:"text/css",href:"https://fonts.heyflow.cloud/css?family=Caveat",media:"all"}),l.jsx("div",{className:`block-content signature-block ${o}`,style:s,children:l.jsxs("div",{className:"signature-block-body",children:[d?l.jsx("label",{children:d}):void 0,l.jsxs("div",{className:D("signature-block-content",{error:u}),"aria-invalid":u?"true":"false","data-testid":"signature-block-content",onClick:k,children:[l.jsx("input",E(v(E(v({value:T},p?{"data-signed":"true"}:void 0),{type:"hidden",className:"signed-input",name:`${t}-signed`,"data-type":"input","data-label":n}),i?{"data-required":"true"}:void 0),{hidden:!0})),l.jsx("div",{className:"signature-button-sign",children:c!=null&&c.length?c:"Sign here"}),l.jsxs("div",{className:"signature-preview-image-wrapper",children:[l.jsx("img",{className:"signature-preview-image",src:h}),l.jsx("input",E(v({type:"hidden",value:f!=null?f:"",name:`${t}-signature-file`,"data-type":"file","data-label":`${n} - Signature`},i?{"data-required":"true"}:void 0),{hidden:!0}))]})]})]})}),S&&V?bo.createPortal(l.jsx(gh,{clientLanguage:e,initialData:m,onClose:C,onSave:b}),V):void 0]})}const yh=({config:e,handleValidation:t})=>{const{client:n}=fe(),{state:s,setState:a}=Oe("signature",e.blockId,t),{saveSignature:r,signatureData:i,previewImage:o}=lh(n,a);return l.jsx(vh,{isSigned:s.isSigned,uploadID:s.uploadID,blockId:e.blockId,wrapperStyle:P(e.legacySpacingStyle),containerClass:e.containerClass,text:e.text,label:e.label,isRequired:e.isRequired,noAnswer:e.noAnswer,yesAnswer:e.yesAnswer,hasErrors:s.hasError,clientLanguage:n==null?void 0:n.language,previewImage:o,signature:i,dataLabel:e.responseLabel,onSave:r,clientRoot:n==null?void 0:n.root})},bh=(e,t)=>{var a,r;const n=(a=e.yesAnswer)!=null?a:"true",s=(r=e.noAnswer)!=null?r:"false";return{answer:t.state.isSigned?n:s,uploadID:t.state.uploadID}},wh=(e,t)=>{const n=e.responseLabel||e.blockId;return t.answer===e.noAnswer?[{id:`signed-${e.blockId}`,label:n,name:`${e.blockId}-signed`,sensitive:!1,type:"input",values:[{answer:t.answer,name:t.answer}],variable:`${e.blockId}-signed`}]:[{id:`signed-${e.blockId}`,label:n,name:`${e.blockId}-signed`,sensitive:!1,type:"input",values:[{answer:t.answer,name:t.answer}],variable:`${e.blockId}-signed`},{id:`${e.blockId}-signature`,label:`${n} - Signature`,name:`${e.blockId}-signature-file`,sensitive:!1,type:"file",values:[{answer:t.uploadID,name:t.uploadID}],variable:`${e.blockId}-signature-file`}]},Sh=e=>{var t,n;return H.object({answer:H.enum([(t=e.yesAnswer)!=null?t:"true",(n=e.noAnswer)!=null?n:"false"]),uploadID:H.string().min(e.isRequired?1:0)})},kh=({result:e,blockState:t})=>{t.setState({hasError:!e.success})},Eh=(e,t)=>{t.setState({isSigned:!1,uploadID:"",hasError:!1})},xh=()=>({isSigned:!1,uploadID:"",hasError:!1}),Ih=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),legacyStyle:e.style,responseLabel:Fe([e.systemLabel,e.label,e.text]),isRequired:e.required,outerClassName:e.containerClass}),Ch=({children:e,config:t})=>l.jsx("div",{className:D("block-content signature-block",t.outerClassName),id:`signature-block-${t.blockId}`,"data-blocktype":"signature",children:e}),Lh=E(v({},ae()),{getResponseData:bh,getSubmittableResponseData:wh,getValidationSchema:Sh,onValidate:kh,reset:Eh,getConfig:Ih,Container:yh,getInitialState:xh,Wrapper:Ch}),Nh=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[l.jsx("path",{d:"M419,256A163,163,0,1,0,256,419,163,163,0,0,0,419,256Z"}),l.jsx("path",{d:"M494,256C494,124.6,387.4,18,256,18S18,124.6,18,256,124.6,494,256,494,494,387.4,494,256Z",style:{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:"32px"}})]}),_h=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:l.jsx("path",{d:"M419,256A163,163,0,1,0,256,419,163,163,0,0,0,419,256Z"})}),Ah=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:l.jsx("path",{d:"M256,0C114.84,0,0,114.84,0,256S114.84,512,256,512,512,397.16,512,256,397.16,0,256,0ZM389.23,170.2,223.82,367.13a19.71,19.71,0,0,1-14.77,7h-.34a19.67,19.67,0,0,1-14.63-6.52l-70.89-78.77a19.69,19.69,0,1,1,28.65-27c.21.23.42.45.62.68l55.74,61.94L359.08,144.87a19.69,19.69,0,0,1,30.15,25.33Z"})});function Th({options:e,wrapperStyle:t,className:n,style:s,displayDefault:a}){return l.jsx("div",{style:t,children:l.jsx("div",{className:D("steps-list",n),style:s,children:e.map((r,i)=>l.jsx(Rh,v({index:i,displayDefault:a},r),r.id))})})}function Rh(e){const{id:t,class:n,current:s,done:a,text:r,label:i}=e,o=!!e.svg||!!e.image||!!e.emoji||e.displayDefault==="indices"||e.displayDefault==="radios";return l.jsxs("div",{id:t,className:D(n,{current:s,done:a},"steps-option"),children:[o&&l.jsx("div",{className:"graphics-wrapper",children:l.jsx("div",{className:"graphics-container",children:l.jsx($h,v({},e))})}),l.jsxs("div",{className:"text-container",children:[l.jsx("div",{className:"label",children:i}),r?l.jsx("div",{className:"text",children:r}):null]})]})}const $h=({id:e,done:t,current:n,svg:s,emoji:a,image:r,images:i,index:o,displayDefault:c})=>s?l.jsx("div",{className:"emoji",dangerouslySetInnerHTML:{__html:s}}):a?l.jsx("div",{className:"emoji",children:a}):r?l.jsx(Ke,{images:i,filename:r,alt:e}):c==="indices"?l.jsx("span",{className:"index",children:o+1}):c==="radios"?t?l.jsx(Ah,{}):n?l.jsx(Nh,{}):l.jsx(_h,{}):null,jh=({config:e})=>l.jsx(Th,{displayDefault:e.displayDefault,options:e.options,className:e.legacyClass,wrapperStyle:P(e.legacySpacingStyle),style:P(e.legacyStyle)}),Ph=(e,t,{purifyXML:n})=>{var s;return E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),legacyStyle:e.style,legacyClass:e.class,options:((s=e.options)!=null?s:[]).map(a=>E(v({},a),{svg:typeof a.svg=="string"?n(a.svg):a.svg})),outerClassName:e.containerClass})},Bh=({children:e,config:t})=>l.jsx("div",{className:D("block-content steps-block",t.outerClassName),id:`steps-block-${t.blockId}`,children:e}),Mh=E(v({},ae()),{getConfig:Ph,Container:jh,Wrapper:Bh});/* @preserve */const Dh=({config:e,buttonRef:t,client:n})=>{var c,d,u;const{navigationAction:s,submitAction:a,destination:r,redirectUrl:i,target:o}=e;n.trackButtonClick({tracking:(c=e.tracking)!=null?c:!1,eventName:(d=e.eventName)!=null?d:"",label:(u=e.submitPaymentButtonText)!=null?u:"Pay Now",id:e.blockId}),s==="submit"?n.requestNavigation({mode:"submit",button:t,action:a!=null?a:"next",destination:r,options:{redirectURL:i,target:o}}):n.requestNavigation({mode:"sync",action:s,destination:r})},Vh=async({stripe:e,paymentMethodId:t,blockId:n,stripeAccountId:s,apiEndpoint:a,flowId:r})=>{const i=await de.post(`${a}/stripe-payment/confirm`,{paymentMethodID:t,flowID:r,blockID:n,stripeAccountID:s});if(i.data.status==="succeeded")return{success:!0};if(i.data.status==="requires_action"){const{paymentIntent:o,error:c}=await e.confirmCardPayment(i.data.clientSecret);if(c)throw new Error(c.message);if((o==null?void 0:o.status)==="succeeded")return{success:!0}}return{success:!1}},Oh=async({stripe:e,stripeElements:t,prefillValues:n})=>{var i;const{error:s}=await t.submit();if(s)throw new Error(s.message);const{error:a,paymentMethod:r}=await e.createPaymentMethod({elements:t,params:n?{billing_details:n}:void 0});if(a!=null?a:!r)throw new Error((i=a==null?void 0:a.message)!=null?i:"Failed to create payment method");return r},Fh=(e,t)=>e||(t?"Jetzt bezahlen":"Pay now"),Uh=(e,t)=>e||(t?"Zahlung erfolgreich":"Payment successful"),Wh=(e,t)=>e||(t?"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.":"An error occurred. Please try again."),Hh=e=>{const{client:t,constants:n}=fe();return{handlePayment:y.useCallback(async({event:a,stripeElements:r,stripe:i,setConfirmPaymentInProgress:o,setPaymentErrorMessage:c,setPaymentSuccess:d,isDeLang:u})=>{if(a.preventDefault(),!t){console.trace("Can't use stripe payment as we're on the server");return}if(t.isInPreviewMode){t.messageParent({event:"stripePaymentBlocked"});return}if(!(!i||!r))try{o(!0),c("");const m=e.prefillBillingDetails&&e.prefillMapping?t.getPrefillValues(e.prefillMapping):void 0,h=await Oh({stripe:i,stripeElements:r,prefillValues:m}),{success:p}=await Vh({stripe:i,paymentMethodId:h.id,blockId:e.blockId,stripeAccountId:e.stripeAccountId,apiEndpoint:n.API_ENDPOINT,flowId:n.FLOW_ID});p&&(d(!0),o(!1),await Dh({buttonRef:a.target,config:e,client:t}))}catch(m){o(!1),c(Wh(m instanceof Error?m.message:void 0,u))}},[t,e,n])}},qh=()=>l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M10 15.0625C9.84467 15.0625 9.71875 15.1884 9.71875 15.3438C9.71875 15.4991 9.84467 15.625 10 15.625C10.1553 15.625 10.2812 15.4991 10.2812 15.3438C10.2812 15.1884 10.1553 15.0625 10 15.0625V15.0625",stroke:"#D0011B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 12.8125V7.1875",stroke:"#D0011B",strokeWidth:"1.5",strokeLinecap:"round"}),l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2158 2.32C10.988 1.85641 10.5165 1.56268 10 1.56268C9.48351 1.56268 9.01197 1.85641 8.78426 2.32L1.67951 16.7935C1.50564 17.1472 1.52666 17.5656 1.7351 17.9001C1.94355 18.2346 2.30989 18.4378 2.70401 18.4375H17.296C17.6901 18.4378 18.0565 18.2346 18.2649 17.9001C18.4734 17.5656 18.4944 17.1472 18.3205 16.7935L11.2158 2.32Z",stroke:"#D0011B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),zh=()=>l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"#00C853"})}),Kh=({message:e})=>l.jsxs("div",{className:"payment-message-container",children:[l.jsx(zh,{}),l.jsx("span",{children:e})]}),Gh=({message:e})=>l.jsxs("div",{className:"payment-message-container error",children:[l.jsx(qh,{}),l.jsx("span",{children:e})]});function Yh({libs:e,paymentSuccessMessage:t,submitPaymentButtonText:n,stripeLayout:s,onHandlePayment:a,spacingStyle:r,isDeLang:i}){const o=Fh(n,i),c=Uh(t,i),d=e[0].useElements(),u=e[0].useStripe(),m=e[0].PaymentElement,[h,p]=y.useState(!1),[f,g]=y.useState(""),[b,S]=y.useState(!1);return!u||!d?l.jsx(l.Fragment,{children:i?"Ldt":"Loading..."}):l.jsx("div",{style:r,children:l.jsx("div",{children:b?l.jsx(Kh,{message:c}):l.jsxs(l.Fragment,{children:[l.jsx(m,{options:{layout:s}}),f&&l.jsx(Gh,{message:f}),l.jsx("button",{className:"generic-button submit medium",style:{marginTop:"15px"},onClick:async w=>await a({event:w,stripeElements:d,setConfirmPaymentInProgress:p,setPaymentErrorMessage:g,setPaymentSuccess:S,isDeLang:i,stripe:u}),children:h?l.jsx("div",{className:"icon-spinner",children:l.jsx(Or,{})}):l.jsx("span",{className:"label",children:o})})]})})})}const xa=new RegExp(/(?:\.|,)(?!\d{1,2}$)/gm);function Jh(e,t){return t==="EUR"?e.replace(xa,"").replace(",","."):t==="USD"?e.replace(xa,"").replace(",",""):""}const Zh=(e,t)=>{try{const n=Jh(e,t);if(!n)return 0;const s=parseFloat(n);return isNaN(s)?0:Math.round(s*100)}catch(n){return 0}},Xh=({config:e})=>{var c,d,u;const{constants:t,client:n}=fe(),{handlePayment:s}=Hh(e),[a,r]=y.useState();if(y.useEffect(()=>{Promise.resolve().then(async()=>{const{Elements:m,PaymentElement:h,useElements:p,useStripe:f}=await te(async()=>{const{Elements:b,PaymentElement:S,useElements:w,useStripe:k}=await import("./stripe.chunk-B2ByysVA.js").then(C=>C.r);return{Elements:b,PaymentElement:S,useElements:w,useStripe:k}},[]),{loadStripe:g}=await te(async()=>{const{loadStripe:b}=await import("./stripe.chunk-B2ByysVA.js").then(S=>S.i);return{loadStripe:b}},[]);r([{Elements:m,PaymentElement:h,useElements:p,useStripe:f},{loadStripe:g}])})},[]),!a)return null;const[{Elements:i},{loadStripe:o}]=a;return l.jsx(i,{stripe:o(t.STRIPE_PUBLIC_KEY,{stripeAccount:e.stripeAccountId}),options:{mode:"payment",currency:e.currency.toLowerCase(),amount:Zh((c=e.amount)!=null?c:"100",e.currency),paymentMethodCreation:"manual",appearance:e.stripeAppearance,paymentMethodTypes:["card"]},children:l.jsx(Yh,{blockId:e.blockId,libs:a,spacingStyle:(d=P(e.spacingStyle))!=null?d:{},stripeLayout:e.stripeLayout,paymentSuccessMessage:e.paymentSuccessMessage,submitPaymentButtonText:e.submitPaymentButtonText,tracking:e.tracking,eventName:e.eventName,onHandlePayment:s,isDeLang:(u=n==null?void 0:n.language.includes("de"))!=null?u:!1})})},Qh=e=>E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),stripeAppearance:e.stripeAppearance,tracking:e.tracking,outerClassName:e.containerClass,outerStyle:P(e.style)}),ef=({children:e,config:t})=>l.jsx("div",{className:D("block-content payment-block",t.outerClassName),style:t.outerStyle,id:t.blockId,children:e}),tf=E(v({},ae()),{getConfig:Qh,Container:Xh,Wrapper:ef}),nf=6;function sf({borderRadius:e,columnGap:t,content:n,image:s,imageAlt:a,imagePaddingTop:r=0,images:i,inverted:o,rowGap:c,splitRatio:d=nf,style:u,wrapperStyle:m}){return l.jsx("div",{style:m,children:l.jsxs("div",{className:D("text-image-content-body",{inverted:o}),style:E(v({},u),{rowGap:c,columnGap:t}),children:[l.jsx("div",{className:"text-image-content-image",style:{width:`calc((100% - ${t}px) * ${d} / 12)`,paddingTop:r},children:l.jsx(Ke,{filename:s,images:i,alt:a!=null?a:"",style:{borderRadius:e}})}),l.jsx("div",{className:"text-image-content-text rich-text",style:{width:`calc((100% - ${t}px) * (12 - ${d}) / 12)`},children:l.jsx("span",{dangerouslySetInnerHTML:{__html:st(n)}})})]})})}const af=({config:e})=>l.jsx(sf,{wrapperStyle:P(e.legacySpacingStyle),style:P(e.legacyStyle),borderRadius:e.borderRadius,columnGap:e.columnGap,content:e.content,image:e.image,imageAlt:e.imageAlt,images:e.images,inverted:e.inverted,rowGap:e.rowGap,imagePaddingTop:e.imagePaddingTop,splitRatio:e.splitRatio}),rf=(e,t,{draftToHTML:n,purifyXML:s})=>{var a;return E(v(v({},re(e)),e),{legacySpacingStyle:ce(e),legacyStyle:e.style,content:s(n((a=e.content)!=null?a:"")),images:e.images,outerClassName:e.containerClass,outerStyle:P(e.containerStyle)})},of=({children:e,config:t})=>l.jsx("div",{className:D("block-content text-image-content-block",t.outerClassName),style:t.outerStyle,id:`text-image-content-block-${t.blockId}`,children:e}),lf=E(v({},ae()),{Container:af,getConfig:rf,Wrapper:of}),cf=y.forwardRef(({autoComplete:e,autoFocus:t,blockId:n,cols:s,dataInitialRequired:a,dataLabel:r,dataSensitive:i,dataTfSensitive:o,dataVariable:c,errorMessage:d,hasError:u,info:m,isRequired:h,label:p,placeholder:f,rows:g,spacingStyles:b,value:S,onBlur:w,onChange:k,onCut:C,onDrop:T,onKeyDown:V,onPaste:M},_)=>{const N=!!S;return l.jsxs("div",{style:b,children:[p&&l.jsx("label",{htmlFor:n,children:p}),l.jsxs("div",{className:D("textarea",{"has-value":N,validated:u!==void 0,error:u}),children:[l.jsx("textarea",{autoComplete:e,autoFocus:t,cols:s,"data-has-error":u?!0:void 0,"data-initial-required":a,"data-is-react-input":"true","data-label":r,"data-sensitive":i,"data-tf-sensitive":o,"data-type":"textarea","data-variable":c,id:n,name:n,placeholder:f,ref:_,required:h,rows:g,value:S,onBlur:w,onChange:k,onCut:C,onDrop:T,onKeyDown:V,onPaste:M}),l.jsxs("div",{className:"error-box",children:[l.jsx(Xt,{}),l.jsx("span",{className:"text",children:d})]}),m&&l.jsx("span",{className:"label",children:m})]})]})});function qr(e){return Fe([e.systemLabel,e.label,e.placeholder,e.blockId])}const df=e=>{var p;const{state:t,setState:n}=Oe("textarea",e.config.blockId),{value:s,hasError:a}=t,{client:r}=fe(),i=y.useRef(null),o=y.useRef(),c=y.useCallback((f=0,g=!0)=>{r&&i.current&&(o.current===void 0&&(o.current=i.current.offsetHeight===0?80:i.current.offsetHeight),i.current.scrollHeight===0&&f<10?setTimeout(()=>{c(f+1)},100):(i.current.style.height="auto",i.current.style.height=`${Math.max(o.current,i.current.scrollHeight+5)}px`,g&&r.resetScroll(),setTimeout(()=>{r.messageHeight()},0)))},[r]);y.useEffect(()=>{c(0,!1),setTimeout(()=>{c(0,!1)},100)},[c]);const d=y.useCallback(()=>{e.handleValidation(),r==null||r.sendHeight()},[r,e]);Pr(()=>{setTimeout(()=>{d()},0),c(0)},[c,d,t]);function u(f){n({value:f.currentTarget.value})}function m(){d(),r==null||r.sendLog({message:"Textarea blurred",blockID:e.config.blockId,data:{hasData:!!s,isEmptyString:!s.trim(),isRequired:!!e.config.isRequired,isValid:a===!1}})}function h(){setTimeout(()=>{c(0)},0)}return l.jsx(cf,{autoComplete:e.config.autoComplete,autoFocus:!!e.config.autoFocus,blockId:e.config.blockId,cols:e.config.cols,dataInitialRequired:e.config.isRequired,dataLabel:qr(e.config),dataSensitive:e.config.isSensitive,dataTfSensitive:e.config.isSensitive,dataVariable:e.config.variableName,errorMessage:e.config.errorMessage,hasError:a,info:e.config.info,isRequired:!!e.config.isRequired,label:e.config.isLabelHidden?void 0:e.config.label,placeholder:e.config.placeholder,ref:i,rows:e.config.rows,spacingStyles:(p=P(e.config.spacingStyles))!=null?p:{},value:s,onBlur:m,onChange:u,onCut:h,onDrop:h,onKeyDown:h,onPaste:h})},uf=(e,t)=>({name:qr(e),value:t.state.value,isSensitive:!!e.isSensitive}),mf=(e,t)=>{var n;return t.value?[{id:e.blockId,label:t.name,name:e.blockId,sensitive:t.isSensitive,type:"textarea",values:[{answer:t.value,name:t.value}],variable:(n=e.variableName)!=null?n:e.blockId}]:[]},hf=e=>H.object({value:H.string().min(e.isRequired?1:0)}),ff=({result:e,blockState:t})=>{t.setState({hasError:!e.success})},pf=(e,t)=>{t.setState({value:""})},gf=({restoredData:e,params:t,config:n})=>{const s=n.variableName&&t.get(n.variableName),a=e==null?void 0:e.value,r=s||a;return r?[{value:"",hasError:!1},{value:r}]:{value:"",hasError:!1}},vf=(e,t)=>{var n;return E(v(v({},re(e)),e),{spacingStyles:ce(e),isRequired:e.required,isSensitive:e.sensitive,variableName:e.variable,isLabelHidden:e.hideLabel,autoComplete:e.nativeAutocomplete,autoFocus:!((n=t.client)!=null&&n.isInPreviewMode)&&e.autofocus,cols:e.cols,outerClassName:e.class,outerStyle:P(e.style)})},yf=(e,t)=>{if(t.variableName)return{[t.variableName]:e.value}},bf=({blockState:e})=>e.state.value,wf=({blockState:e,value:t})=>{e.setState({value:t})},Sf=({children:e,config:t})=>l.jsx("div",{className:D("block-content textarea-block",t.outerClassName),style:t.outerStyle,id:`${t.blockId}-container`,children:e}),kf=E(v({},ae()),{getResponseData:uf,getSubmittableResponseData:mf,getValidationSchema:hf,onValidate:ff,reset:pf,getConfig:vf,Container:df,getInitialState:gf,getVariableState:yf,Wrapper:Sf,getValue:bf,setValue:wf});function Ef({text:e,as:t,spacingStyle:n,className:s,visibleWords:a,hiddenWords:r}){return l.jsx("div",{style:n,children:y.createElement(t,{},l.jsxs(l.Fragment,{children:[l.jsx("span",{children:e}),l.jsxs("span",{style:{marginLeft:".3em"},children:[l.jsx("span",{className:s,children:a}),l.jsx("span",{style:{visibility:"hidden"},children:r})]})]}))})}const gn=async e=>new Promise(t=>setTimeout(t,e)),xf=100,If=100,Cf=2e3,Lf=1e3,Nf=40,_f=25,Af=({config:e})=>{const[t,n]=y.useState(""),[s,a]=y.useState(""),[r,i]=y.useState(!1);return y.useEffect(()=>{async function o(){for(let c=0;;c++){const d=e.words[c%e.words.length];for(let u=0;u<=d.length;u++)n(d.slice(0,u)),a(d.slice(u)),await gn(Math.max(xf-u*10,Nf));i(!0),await gn(Cf),i(!1);for(let u=1;u<=d.length;u++)n(d.slice(0,-u)),a(d.slice(-u)),await gn(Math.max(If-u*10,_f));i(!0),await gn(Lf),i(!1)}}o()},[e.words.join("")]),l.jsx(Ef,{text:e.text,as:e.as,spacingStyle:e.spacingStyle,className:r?"typewriter-caret":"",visibleWords:t,hiddenWords:s})},Tf=e=>{var n,s,a;let t="span";return e.as&&["h1","h2","h3","h4","h5","h6"].includes(e.as)&&(t=e.as),E(v(v({},re(e)),e),{as:t,outerClassName:(n=e.containerClass)!=null?n:"",outerStyle:(s=P(e.style))!=null?s:{},spacingStyle:(a=P(ce(e)))!=null?a:{}})},Rf=({children:e,config:t})=>l.jsx("div",{className:D("block-content typewriter-block",t.outerClassName),style:t.outerStyle,id:`typewriter-block-${t.blockId}`,children:e}),$f=E(v({},ae()),{getConfig:Tf,Container:Af,Wrapper:Rf});function zr(e=10){return Math.random().toString(36).substring(2,Math.floor(e/2))+Math.random().toString(36).substring(2,Math.ceil(e/2))}const jf=()=>l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8M14 2L20 8M14 2V8H20M12 18V12M9 15L12 12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),bs=(e,t=2)=>{if(e===0)return{value:0,suffix:"Bytes"};const n=1e3,s=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return{value:parseFloat((e/Math.pow(n,r)).toFixed(s)),suffix:a[r]}};function Pf(e){if(e.status==="error")return e.error;if(e.progress===0)return"Preparing";const t=bs(e.size*e.progress,2),n=bs(e.size,2),s=`${n.value} ${n.suffix}`,a=Math.floor(e.progress*100);return`${`${t.value}${n.suffix!==t.suffix?` ${t.suffix}`:""}`} / ${s}  ${a}%`}function Bf({accept:e,className:t,dataMaxmimum:n,dataMinimum:s,displayButton:a,files:r,hasError:i,id:o,inputRef:c,isMultiple:d,isRequired:u,isSensitive:m,label:h,line1:p,line2:f,onChangeInput:g,onClickButton:b,onDragEnterButton:S,onDragLeaveButton:w,onDragOverButton:k,onDropButton:C,onDragEnterInput:T,onDragLeaveInput:V,onDragOverInput:M,onDragStartInput:_,onDropInput:N,spacingStyles:$,systemLabel:W,value:ee}){return l.jsxs("div",{style:$,children:[h&&l.jsx("label",{htmlFor:o,children:h}),l.jsx("input",{accept:e,"data-has-error":i,"data-initial-required":u,"data-maximum":n,"data-minimum":s,"data-sensitive":m,"data-tf-sensitive":m,"data-type":"upload",id:o,multiple:d,name:o,ref:c,required:u,type:"file",value:ee,onChange:g,onDragEnter:T,onDragLeave:V,onDragOver:M,onDragStart:_,onDrop:N}),l.jsxs("div",{"aria-label":"Upload",className:`upload-button ${t}`,style:{display:a?void 0:"none"},onClick:b,onDragEnter:S,onDragOver:k,onDragLeave:w,onDrop:C,children:[l.jsx("div",{className:"upload-button-icon",children:l.jsx(jf,{})}),l.jsx("div",{className:"upload-button-label",children:p}),l.jsx("div",{className:"upload-button-supports",children:f}),l.jsx("div",{className:"upload-progress-indicator"})]}),l.jsx("div",{className:"upload-elements-list",children:r.map((A,ie)=>l.jsxs("div",{className:`upload-element upload-${A.status}`,children:[l.jsx("img",{src:A.previewImage,alt:A.type}),l.jsxs("div",{className:"upload-element-inner",children:[l.jsxs("div",{className:"upload-element-content",children:[l.jsx("div",{className:"upload-element-filename",children:A.fileName}),l.jsxs("div",{"aria-label":"Remove",className:"upload-element-action upload-element-action-remove",onClick:A.remove,children:[l.jsx("i",{className:"material-icons",children:"close"}),l.jsx("div",{className:"tooltip left",children:"Remove"})]}),A.download&&l.jsxs("div",{"aria-label":"Download",className:"upload-element-action upload-element-action-download",onClick:A.download,children:[l.jsx("i",{className:"material-icons",children:"arrow_downward"}),l.jsx("div",{className:"tooltip left",children:"Download"})]}),l.jsxs("div",{"aria-label":"Cancel",className:"upload-element-action upload-element-action-cancel",onClick:A.abort,children:[l.jsx("i",{className:"material-icons",children:"close"}),l.jsx("div",{className:"tooltip left",children:"Cancel"})]})]}),l.jsx("div",{className:"upload-element-progress",children:l.jsx("div",{className:"upload-element-progress-bar",style:{width:`${A.progress*100}%`}})}),l.jsx("div",{className:"upload-element-percentage-display",children:Pf(A)})]}),A.status!=="error"&&l.jsx("input",{"data-answer":A.fileName,"data-label":`${W}-${ie+1}`,"data-restore-mime-type":A.type,"data-restore-size":A.size,"data-sensitive":m,"data-tf-sensitive":m,"data-type":"input",hidden:!0,id:`${o}-file-${ie+1}`,name:`${o}-file-${ie+1}`,type:"hidden",value:A.fileName}),A.status==="success"&&l.jsx("input",{"data-answer":A.fileUrl,"data-label":`${W}-${ie+1}_file`,"data-type":"file",hidden:!0,id:`${o}-file-${ie+1}_file`,name:`${o}-file-${ie+1}_file`,type:"hidden",value:A.fileUrl})]},A.fileId))})]})}const is={"image/*":"image","video/*":"video","audio/*":"audio","application/pdf":"pdf","application/acrobat":"pdf","application/zip":"zip","application/illustrator":"ai","application/postscript":"ai","application/ms-excel":"excel","application/vnd.ms-excel":"excel","application/vnd.openxmlformats-officedocument.spreadsheetml":"excel","application/msword":"word","application/ms-word":"word","application/vnd.ms-word":"word","application/vnd.openxmlformats-officedocument.wordprocessingml":"word","application/ms-powerpoint":"powerpoint","application/vnd.ms-powerpoint":"powerpoint","application/vnd.openxmlformats-officedocument.presentationml":"powerpoint"};function Kr(e,t){let n=Object.keys(is).find(s=>t.match(new RegExp(s)));return n&&is[n]?n=is[n]:n="file",`${e}/filetypes/${n}.svg`}const Mf=({config:e})=>{var W,ee,A,ie,ne,I;const{client:t,constants:n}=fe(),{state:s,setState:a}=Oe("upload",e.blockId),r=y.useRef(null),[i,o]=y.useState(!1),[c,d]=y.useState(!1),[u,m]=y.useState(""),h=(W=e.min)!=null?W:1,p=(ee=e.max)!=null?ee:1,f=Math.max(1,h,p),g=f>1,b=f<=s.files.length,S=s.hasError;y.useEffect(()=>{t==null||t.sendHeight()},[t,S]);async function w(X){await Promise.all(X.map(async B=>{var he;if(m(""),!b){const se=zr();a(Q=>({files:[...Q.files,{abort:()=>{},download:()=>{},fileId:se,fileName:B.name,fileUrl:"",previewImage:Kr(n.STATIC_URL,B.type),progress:0,remove:()=>{},size:B.size,status:"waiting",type:B.type}]})),t.sendLog({message:"Starting file upload via upload block",data:{fileId:se,type:B.type,size:B.size}}),await t.uploadFile({file:B,accept:(he=e.accept)!=null?he:"",onProgress:(Q,oe)=>(a(L=>({files:L.files.map(R=>{if(R.fileId!==se||["post","success"].includes(R.status))return R;let O=Q.loaded/Q.total;return(isNaN(O)||!isFinite(O))&&(O=0),E(v({},R),{abort:oe,progress:O,status:O>.999?"post":"uploading"})})})),L=>{const R=()=>{t.downloadFile(B)},O=()=>{a(le=>({files:le.files.filter(Y=>Y.fileId!==se)}))};a(le=>({files:le.files.map(Y=>Y.fileId!==se?Y:E(v({},Y),{download:R,fileUrl:L,progress:1,remove:O,status:"success"}))})),t.sendLog({message:"Succeeded uploading file via upload block",data:{fileId:se,fileUrl:L,type:B.type,size:B.size}})}),onError:Q=>{if(Q.reason==="aborted")a(oe=>({files:oe.files.filter(L=>L.fileId!==se)}));else{const oe=()=>{a(L=>({files:L.files.filter(R=>R.fileId!==se)}))};a(L=>({files:L.files.map(R=>{if(R.fileId!==se)return R;const O=E(v({},R),{status:"error",remove:oe});if(Q.reason==="file-too-large"){const Y=bs(Q.maxFileSize,2),$e=`File is too large (max. ${Y.value} ${Y.suffix})`;return t.sendLog({message:"Failed uploading file via upload block",data:{reason:$e,fileId:se,type:B.type,size:B.size}}),E(v({},O),{error:$e})}if(Q.reason==="unsupported-media-type"){const Y=`Unsupported file type ${R.type}`;return t.sendLog({message:"Failed uploading file via upload block",data:{reason:Y,fileId:se,type:B.type,size:B.size}}),E(v({},O),{error:Y})}return t.sendLog({message:"Failed uploading file via upload block",data:{reason:"Unknown error",fileId:se,type:B.type,size:B.size}}),E(v({},O),{error:"Unknown error"})})}))}}})}}))}function k(X){X.preventDefault(),X.stopPropagation()}async function C(X){var B;await w(Array.from((B=X.currentTarget.files)!=null?B:[]))}function T(){var X;(X=r.current)==null||X.click()}function V(X){k(X),X.dataTransfer&&(X.dataTransfer.effectAllowed="move")}function M(){o(!0),d(!0)}function _(){o(!1),d(!1)}function N(X){o(!0),X.dataTransfer&&(X.dataTransfer.dropEffect="copy")}async function $(X){var B;if(o(!1),t&&X.dataTransfer){const he=X.dataTransfer.files,se=he[0].type;((B=e.accept)!=null?B:"").split(",").some(oe=>{var R;if(["*",se].includes(oe.trim()))return!0;const L=(R=oe.trim().match(/(.+)\/\*$/))==null?void 0:R[1];return L?se.match(new RegExp("^"+L))!==null:!1})&&await w(Array.from(he))}}return l.jsx(Bf,{accept:e.accept,className:D({highlight:i,canDrop:c}),dataMaxmimum:e.max,dataMinimum:e.min,displayButton:!b,hasError:S,files:s.files,id:e.blockId,inputRef:r,isMultiple:g,isRequired:(A=e.isRequired)!=null?A:!1,isSensitive:(ie=e.isSensitive)!=null?ie:!1,label:e.label,line1:e.line1,line2:e.line2,spacingStyles:(ne=P(e.spacingStyles))!=null?ne:{},systemLabel:(I=e.systemLabel)!=null?I:e.line1,value:u,onChangeInput:C,onClickButton:T,onDragEnterButton:M,onDragLeaveButton:_,onDragOverButton:N,onDropButton:$,onDragEnterInput:k,onDragLeaveInput:k,onDragOverInput:k,onDragStartInput:V,onDropInput:k})},Df=(e,t)=>{var n;return{files:t.state.files.filter(s=>s.status==="success").map(s=>({fileName:s.fileName,fileUrl:s.fileUrl,size:s.size,type:s.type})),isSensitive:(n=e.isSensitive)!=null?n:!1}},Vf=(e,t)=>t.files.flatMap((n,s)=>[{id:`${e.blockId}-file-${s+1}`,label:`${e.appliedLabel}-${s+1}`,name:`${e.blockId}-file-${s+1}`,restoreAttributes:{restoreMimeType:n.type,restoreSize:n.size},sensitive:t.isSensitive,type:"input",values:[{answer:n.fileName,name:n.fileName}],variable:`${e.blockId}-file-${s+1}`},{id:`${e.blockId}-file-${s+1}_file`,label:`${e.appliedLabel}-${s+1}_file`,name:`${e.blockId}-file-${s+1}_file`,sensitive:!1,type:"file",values:[{answer:n.fileUrl,name:n.fileUrl}],variable:`${e.blockId}-file-${s+1}_file`}]),Of=e=>{var t,n;return H.object({files:H.array(H.object({fileName:H.string(),fileUrl:H.string()})).min((t=e.min)!=null?t:e.isRequired?1:0).max((n=e.max)!=null?n:1)})},Ff=({result:e,element:t,blockState:n})=>{var s,a,r;n.setState({hasError:!e.success}),(s=t.parentElement)==null||s.classList.add("validated"),e.success?(a=t.parentElement)==null||a.classList.remove("error"):(r=t.parentElement)==null||r.classList.add("error")},Uf=(e,t)=>{t.setState({files:[]})},Wf=({restoredData:e,config:t,blockContext:n})=>{const s=e==null?void 0:e.files.map(r=>{const i=zr();return{abort:()=>{},fileId:i,fileName:r.fileName,fileUrl:r.fileUrl,previewImage:Kr(n.constants.STATIC_URL,r.type),progress:1,remove:()=>{const{setState:o}=ze("upload",t.blockId);o(c=>({files:c.files.filter(d=>d.fileId!==i)}))},size:r.size,status:"success",type:r.type}});return[{files:[],hasError:!1},s?{files:s}:void 0]},Hf=(e,t,n)=>E(v(v({},re(e)),e),{spacingStyles:ce(e),accept:Ko(e.accept),isRequired:e.required,isSensitive:e.sensitive,line1:e.line1,line2:e.line2,outerClassName:e.class,outerStyle:P(e.style),appliedLabel:n.any(e.systemLabel,e.line1,e.id)}),qf=({children:e,config:t})=>l.jsx("div",{className:D("block-content upload-block",t.outerClassName),style:t.outerStyle,id:t.blockId,"data-label":t.appliedLabel,children:e}),zf=E(v({},ae()),{getResponseData:Df,getSubmittableResponseData:Vf,getValidationSchema:Of,onValidate:Ff,reset:Uf,getConfig:Hf,Container:Mf,getInitialState:Wf,Wrapper:qf}),Kf=()=>l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M9 9C9 7.34315 10.3431 6 12 6C13.6569 6 15 7.34315 15 9C15 10.6569 13.6569 12 12 12V14M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ia=y.forwardRef(({error:e,paddingBottom:t,provider:n,src:s,wrapperStyles:a},r)=>l.jsx("div",{style:a,children:l.jsx("div",{style:{paddingBottom:t,position:"relative"},children:e?l.jsx("div",{className:"video-placeholder",children:l.jsxs("span",{children:[l.jsx(Kf,{}),l.jsx("div",{children:e==="empty"?"No video source found.":"Unsupported video player or invalid URL."})]})}):l.jsx("div",{className:n==="vimeo"?"vimeo-player":"youtube-player",style:{position:"absolute",height:"100%",width:"100%"},children:n==="vimeo"?l.jsx("iframe",{allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,className:"vimeo-player",frameBorder:"0",height:"100%",ref:r,src:s,style:{position:"absolute",height:"100%",width:"100%"},title:"Heyflow x Vimeo video player",width:"100%"}):n==="youtube"?l.jsx("iframe",{allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"youtube-player",frameBorder:"0",height:"100%",ref:r,src:s,style:{position:"absolute",height:"100%",width:"100%"},title:"Heyflow x YouTube video player",width:"100%"}):null})})})),Gf=e=>{if(!e)return"";const t=Math.floor(e/60),n=e%60;return t===0?`0m${n}s`:n===0?`${t}m0s`:`${t}m${n}s`},Yf=({config:e})=>{var o,c,d,u,m,h;const t=y.useRef(null),n=(c=(o=e.source)==null?void 0:o.match(/http(?:s?):\/\/(?:www\.)?vimeo.com\/([\w_-]*)/))==null?void 0:c[1],s=(u=(d=e.source)==null?void 0:d.match(/http(?:s?):\/\/(?:www\.)?youtu(?:be\.com\/(?:watch|shorts)(?:\/|\?v=)|\.be\/)([\w_-]*)(&(amp;)?[\w?=]*)?/))==null?void 0:u[1],a=n&&e.vimeo?"vimeo":s&&e.youtube?"youtube":void 0;Bs(()=>{var p,f;(f=(p=t.current)==null?void 0:p.contentWindow)==null||f.postMessage(a==="vimeo"?'{"method":"pause"}':'{"event":"command","func":"pauseVideo","args":""}',"*")});const r=y.useMemo(()=>{var p,f,g,b,S;if(a==="vimeo"){const w=e.vimeo,k=w.start?`#t=${Gf(w.start)}`:"";return new URL(`https://player.vimeo.com/video/${n}?${new URLSearchParams([["controls",(p=w.controls)==null||p?"1":"0"],["keyboard",(f=w.keyboard)==null||f?"1":"0"],["playsinline",(g=w.playsinline)==null||g?"1":"0"],["loop",w.loop?"1":"0"],["byline",w.byline?"1":"0"],["portrait",w.portrait?"1":"0"],["title",w.title?"1":"0"]]).toString()}${k}`).toString()}if(a==="youtube"){const w=e.youtube,k=[["controls",w.controls?"1":"0"],["loop",w.loop?"1":"0"],["cc_load_policy",w.cc_load_policy?"1":"0"],["disablekb",w.disablekb?"1":"0"],["enablejsapi","1"],["playerapiid",`youtube-player-${e.blockId}`],["playsinline",w.playsinline?"1":"0"],["start",(S=(b=w.start)==null?void 0:b.toString())!=null?S:"0"]];return w.loop&&k.push(["playlist",s]),new URL(`https://www.youtube${w.privateMode?"-nocookie":""}.com/embed/${s}?${new URLSearchParams(k).toString()}`).toString()}},[e.blockId,e.vimeo,e.youtube,a,n,s]);let i;return a===void 0&&(i="unknown"),e.source||(i="empty"),i?l.jsx(Ia,{error:i,paddingBottom:`${Math.pow(e.ratio,-1)*100}%`,provider:void 0,src:void 0,wrapperStyles:(m=P(e.spacingStyles))!=null?m:{}}):l.jsx(Ia,{error:void 0,paddingBottom:`${Math.pow(e.ratio,-1)*100}%`,provider:a,ref:t,src:r,wrapperStyles:(h=P(e.spacingStyles))!=null?h:{}})},Jf=e=>{var t;return E(v(v({},re(e)),e),{spacingStyles:ce(e),ratio:(t=e.ratio)!=null?t:16/9,outerClassName:e.class,outerStyle:P(e.style)})},Zf=({children:e,config:t})=>l.jsx("div",{className:D("block-content video-block",t.outerClassName),style:t.outerStyle,id:`video-block-${t.blockId}`,children:e}),Xf=E(v({},ae()),{getConfig:Jf,Container:Yf,Wrapper:Zf}),Qf=Object.freeze(Object.defineProperty({__proto__:null,accordion:Jo,address:wl,calendly:Al,checkbox:ql,container:Yl,datePicker:fc,genericButton:wc,html:Cc,image:Rc,input:Xc,links:sd,list:ld,loader:pd,logoBar:Sd,multipleChoice:Wd,phone:Du,photoCarousel:qu,progress:Ju,rangeSlider:um,richList:vm,richText:km,scale:jm,screenProgress:Vm,select:th,separator:ih,signature:Lh,steps:Mh,stripePayment:tf,textImage:lf,textarea:kf,typewriter:$f,upload:zf,video:Xf},Symbol.toStringTag,{value:"Module"}));function at(){return Qf}function ep(e,t,n){return at()[e].getResponseData(t,n)}function tp(e,t){const s=cr(a=>{const r=Object.entries(a).reduce((i,[o,c])=>{if(!c)return i;const d=ep(c.blockName,c.config,ze(c.blockName,c.config.blockId,!0));return E(v({},i),{[o]:d})},{});t.localStorage.setItem(e,JSON.stringify(r))},300);Pe.subscribe((a,r)=>{_s(a.blocks,r.blocks)||s(a.blocks)})}function np(e,t){const n=t.localStorage.getItem(e);return n?JSON.parse(n):null}const ze=(e,t,n)=>{const{blocks:s,setBlockState:a}=Pe.getState(),r=s[t];if(!Wt(r,e))throw new Error(`Block state of ${e} with id ${t} has not been initialized`);return{state:n?v(v({},r.state),r.restoredState):r.state,setState:o=>a(e,t,o)}},Qe=(e,t)=>{const{blocks:n,setBlockConfig:s}=Pe.getState(),a=n[t];if(!Wt(a,e))throw new Error(`Block state of ${e} with id ${t} has not been initialized`);return{config:a.config,setConfig:r=>s(e,t,r)}};function Gr({blockName:e,config:t,blockContext:n,params:s,restoredData:a}){const i=at()[e].getInitialState({config:t,params:s,restoredData:a,blockContext:n});if(!i)return null;if(Array.isArray(i)){const[o,c]=i;return{blockName:e,state:o,config:t,restoredState:c}}else return{blockName:e,state:i,config:t}}const sp=({blocks:e,blockContext:t,restoreDataEnabled:n,params:s})=>{const a=`heyflow-${t.constants.FLOW_ID}-persisted`,r=n&&t.client?np(a,t.client):null,i=e.reduce((o,c)=>{const d=c.blockName,u=c.blockId;if(!u||!d)return o;const m=r==null?void 0:r[u],h=Gr({blockName:d,config:c,restoredData:m,blockContext:t,params:s});return h&&(o[u]=h),o},{});n&&t.client&&tp(a,t.client),Pe.setState({blocks:v(v({},Pe.getState().blocks),i)})},Yr=y.createContext(null);function ap({children:e,config:t,blockName:n}){const s=fe(),a=Gr({blockName:n,config:t,blockContext:s,params:new URLSearchParams("")}),r=a?{[t.blockId]:a}:{};return l.jsx(Yr.Provider,{value:{blocks:r},children:e})}function rp(){return y.useContext(Yr)}const Jr=y.forwardRef((r,a)=>{var i=r,{children:e,className:t,config:n}=i,s=un(i,["children","className","config"]);return l.jsx("div",E(v({ref:a,className:D("block",n.blockClass,t,{"preview-highlight preview-clicked":n.highlight}),style:v(v({},P(n.containerStyle)),P(n.blockStyle)),"data-blocktype":n.blockType,"data-blockid":n.blockId},s),{children:e}))});function ip({blockName:e,config:t,isUsingLegacyBuilderPreview:n}){const s=at()[e];return l.jsx(ap,{config:t,blockName:e,children:l.jsxs(Jr,{config:t,children:[!t.hasParent&&n&&l.jsx("div",{className:"block-type-indicator",children:t.blockName}),l.jsx(s.Wrapper,{config:t,children:l.jsx("div",{"data-block-id":t.blockId,"data-config":JSON.stringify(t).replace(/'/g,"&#39;"),"data-hydration-root":"true",children:l.jsx(s.Container,{config:t,params:new URLSearchParams(""),handleValidation:()=>{}})})})]})})}function op({blockName:e,config:t,params:n,Wrapper:s=({children:a})=>a}){const a=fe(),r=y.useRef(null),i=y.useMemo(()=>at()[e],[e]),[o,c]=y.useState();y.useEffect(()=>{Promise.resolve().then(async()=>{c(await i.getValidationSchema(t,a))})},[i,a,t]);const d=y.useCallback(async u=>{if(!r.current)return{success:!1};if(!o)return{success:!1};const m=ze(e,t.blockId),h=i.getResponseData(t,m),p=await o.safeParseAsync(h);return i.onValidate({result:p,element:r.current,blockState:m,reason:u}),{success:p.success}},[i,e,t,o]);return l.jsx(s,{blockId:t.blockId,isContainer:t.blockName==="container",children:l.jsx(i.Wrapper,{config:t,children:l.jsx(i.Container,{config:t,params:n,handleValidation:async()=>d("manually"),Wrapper:s})})})}function lp(e,t){const n=Ot(Pe,ms(r=>ps(r.blocks,t,e).config)),s=Ot(Pe,r=>r.setBlockConfig),a=y.useCallback(r=>{s(e,t,r)},[t,e,s]);return{config:n,setConfig:a}}const cp=H.object({value:H.union([H.string(),H.number(),H.boolean()]),label:H.string().optional()}).strict(),vn=rr((e,t)=>({data:{},set:(n,s)=>{e(a=>{let r;if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")r={value:s};else{const i=cp.safeParse(s);if(!i.success)throw new Error(`Invalid object format: ${i.error.message}`);r=i.data}return{data:E(v({},a.data),{[n]:r})}})},get:n=>{const s=t().data[n];return s==null?void 0:s.value},remove:n=>{e(s=>{const a=v({},s.data);return delete a[n],{data:a}})},getAll:()=>{const n=t().data,s={};return Object.entries(n).forEach(([a,r])=>{s[a]={value:r.value},r.label&&(s[a].label=r.label)}),s}})),Ds={set:(e,t)=>{vn.getState().set(e,t)},get:e=>vn.getState().get(e),remove:e=>{vn.getState().remove(e)},getAll:()=>vn.getState().getAll()},dp=e=>{var n;const t=at()[e.blockName];return(n=t.getVariableState)==null?void 0:n.call(t,e.state,e.config)},ws=(e=Pe.getState())=>{const{blocks:t}=e;return Object.values(t).reduce((n,s)=>{if(!s)return n;const a=dp(s);return a?v(v({},n),a):n},{})},up=e=>Pe.subscribe((t,n)=>{const s=ws(t),a=ws(n);_s(s,a)||e(s)}),mp=e=>{const t=e.offsetWidth,n=e.offsetHeight,a=e.getClientRects().length;return!!(t||n||a)};function hp(e,t,n){let s=null;const a=e.blockName,{blockId:r}=e;if(!a)throw new Error("blockName is required");const i=at()[a];let o=Promise.resolve(i.getValidationSchema(e,n));const c=async d=>{if(!mp(t))return{success:!0};const u=Qe(a,e.blockId);_s(e,u.config)||(o=Promise.resolve(i.getValidationSchema(u.config,n)));const m=await o,h=ze(a,e.blockId),p=i.getResponseData(u.config,h),f=await m.safeParseAsync(p);return i.onValidate({result:f,element:t,blockState:h,reason:d}),{success:f.success}};return{getConfig:()=>Qe(a,e.blockId).config,getResponseData:()=>i.getResponseData(Qe(a,e.blockId).config,ze(a,r)),getSubmittableResponseData:()=>{let d,u;try{d=ze(a,r,!0),u=Qe(a,r)}catch(m){if(m.message!==`Block state of ${a} with id ${r} has not been initialized`)throw m;return[]}return d===void 0?[]:i.getSubmittableResponseData(u.config,i.getResponseData(u.config,d))},validate:async()=>c("response-data-collection"),reset:()=>i.reset(Qe(a,e.blockId).config,ze(a,e.blockId),n),hydrate:()=>{if(s){console.warn(`Block ${a} ${e.blockId} already hydrated`);return}function d(){const{config:u}=lp(a,e.blockId);return l.jsx(Do,{value:n,children:l.jsx(i.Container,{config:u,params:new URLSearchParams(window.location.search),handleValidation:async()=>c("manually")})})}s=wo.hydrateRoot(t,l.jsx(d,{}))},unmount:()=>{s==null||s.unmount(),s=null},getCustomMethods:()=>i.getCustomMethods({blockState:ze(a,r),configState:Qe(a,r)}),getValue:i.getValue?()=>{if(!i.getValue)throw new Error(`block.getValue was defined before but is now undefined: ${r}`);return i.getValue({blockState:ze(a,r),config:Qe(a,e.blockId).config})}:void 0,setValue:i.setValue?d=>{if(!i.setValue)throw new Error(`block.setValue was defined before but is now undefined: ${r}`);return i.setValue({blockState:ze(a,r),config:Qe(a,e.blockId).config,value:d})}:void 0,visibility:i.getVisibilityMethods({blockContext:n,blockID:r})}}function Zr({blocks:e,blockContext:t,restoreDataEnabled:n,params:s}){return sp({blocks:e.map(r=>r.config),blockContext:t,restoreDataEnabled:n,params:s}),e.map(r=>hp(r.config,r.element,t))}const fp=Object.freeze(Object.defineProperty({__proto__:null,BlockWrapper:Jr,additionalResponseData:Ds,clientBootstrapBlocks:Zr,getBlockName:Lr,getBlocks:at,getBlocksVariableState:ws,getStyleObjectFromInlineString:P,subscribeToBlocksVariableState:up},Symbol.toStringTag,{value:"Module"}));class Se{static getBlockLookupForSection(t,n){return Object.values(this.blockLookup).filter(s=>s.blockType===t&&s.sectionId===n)}static setBlocksForSection(t,n,s){this.getBlockLookupForSection(t,n).forEach(a=>{delete this.blockLookup[a.blockId]});for(const a of s)this.blockLookup[a]={blockType:t,sectionId:n,blockId:a}}static getBlocksForSection(t,n){return this.getBlockLookupForSection(t,n).map(s=>this.blockRefs[s.blockId])}static deleteBlockReference(t){this.blockLookup[t]?(this.blockRefs[t]&&(this.blockRefs[t].unmount(),delete this.blockRefs[t]),delete this.blockLookup[t]):console.warn(`No block found with ID: ${t}`)}static setBlockRef(t,n){this.blockRefs[t]=n}static getBlockRef(t){return this.blockRefs[t]}static getBlocks(){return this.blockRefs}static getAllBlocksForSection(t){return Object.values(this.blockLookup).filter(n=>n.sectionId===t).map(n=>this.blockRefs[n.blockId])}static setBlockVisited(t){this.visitedBlockIDs.add(t)}static isBlockVisited(t){return this.visitedBlockIDs.has(t)}static getVisitedBlocks(){const t={};for(const n of this.visitedBlockIDs)t[n]=this.blockRefs[n];return t}static usesVariable(t){return Object.values(this.blockRefs).some(n=>n.getConfig().variableName===t)}}U(Se,"blockRefs",{}),U(Se,"visitedBlockIDs",new Set),U(Se,"blockLookup",{});async function me({section:e,blockType:t,selector:n,onHydrated:s}){const a=e.id;if(!a)throw new Error("Flow section without id given");await new Promise(i=>setTimeout(i,1));const r=Array.from(e.querySelectorAll(`${n} [data-hydration-root="true"]`)).map(i=>{const{blockId:o}=i.dataset;if(!o)return console.error("Failed to hydrate a block without an ID",i),K({severity:"error",message:"Failed to hydrate a block without an ID",data:{blockName:t}}),null;const c=Se.getBlockRef(o);return c?(i.dataset.hydrateStatus==="pending"||i.dataset.hydrateStatus==="hydrated"||(i.setAttribute("data-hydrate-status","pending"),c.hydrate(),s==null||s(i,c,o),i.setAttribute("data-hydrate-status","hydrated"),Se.setBlockVisited(o)),o):(console.error("Failed to hydrate a block that is not registered",i),K({severity:"error",message:"Failed to hydrate a block that is not registered",data:{blockName:t}}),null)});Se.setBlocksForSection(t,a,r.filter(i=>i!==null))}const pp=async e=>{await me({section:e,blockType:"accordion",selector:".accordion-block"})},gp=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?pp:jo;x().constants.IS_V2_VISUAL_BLOCKS_ENABLED;const vp=e=>e.constructor.name==="AsyncFunction",Xr=async(e,t,...n)=>{var a,r;const s=typeof e=="function";if(vp(e)){t.setStatus("loading");const o=await e(...n)===!1;return t.setStatus(o?"error":"success"),o&&await((a=t.asyncError)==null?void 0:a.call(t)),!o}else if(s){const o=e(...n)===!1;return o&&((r=t.syncError)==null||r.call(t)),!o}else return!0},Qr={},yp=(e,t)=>{Qr[e]=t},bp=e=>{const t=Qr[e];if(t!==void 0)return Math.round(t*100)/100},wp=e=>{const t=new FormData(e),n=[];let s,a,r;for(s=t.entries();!(a=s.next()).done&&(r=a.value);)n.push(r);return n},Sp=(e,t,n)=>e.type==="radio"?F(`input[name="${t}"]:checked`):e.type==="checkbox"?F(`input[name="${t}"][value="${n}"]`):e,kp=["range-slider","scale","icon-rating"];function Ep(e,t){for(const n of t){const s=n.getConfig().blockType,a=n.getConfig().blockId,r=n.getSubmittableResponseData();for(const i of r){if(s&&kp.includes(s)&&!Se.isBlockVisited(a)){delete e[i.name];continue}e[i.name]=i}}}function xp(e){const t=Ds.getAll();return Object.entries(t).forEach(([n,s])=>{e[n]={name:n,values:[{name:s.value.toString(),answer:s.value.toString()}],type:"input",id:`additional-${n}`,label:s.label||n,variable:n,sensitive:!1,restoreAttributes:{}}}),e}const pt=e=>{const n=wp(e).filter(([,s])=>typeof s=="string"&&s.length).reduce((s,[a,r])=>{const i=F(`[name="${a}"]`);if(!i)return s;const o=Sp(i,a,r);if(!o||typeof r=="string"&&o.hasAttribute("data-trim")&&(r=r.trim(),!r)||o.getAttribute("data-is-empty")==="true")return s;if(o.classList.contains("multiple-choice-option-input")){const g=F(`#${o.id.replace("-input","")}`);if(!(g!=null&&g.checked))return s}const c=o.getAttribute("data-label"),d=o.getAttribute("data-variable");let u=o.getAttribute("data-answer");const m=F(`#${o.id}-input`);m!=null&&m.classList.contains("multiple-choice-option-input")?u=m.value:u=u!=null?u:r;const h=[...s[a]?s[a].values:[],{name:r,answer:u}],p=o.classList.contains("multiple-choice-option-input")?"multiple-choice-input":o.getAttribute("data-type"),f=Object.entries(o.dataset).reduce((g,[b,S])=>b.startsWith("restore")?E(v({},g),{[b]:S}):g,{});return E(v({},s),{[a]:{name:a,values:h,type:p,id:o.id,label:c!=null&&c.length?c:a,variable:d!=null&&d.length?d:a,sensitive:o.getAttribute("data-sensitive")==="true",restoreAttributes:f}})},{});return Ep(n,Object.values(Se.getBlocks())),xp(n),n},ei=e=>Object.keys(e).filter(t=>e[t].values.length>0).reduce((t,n)=>E(v({},t),{[n]:e[n]}),{}),Vs=e=>Object.keys(e).map(t=>e[t]),Ip=e=>{const t=We();return t?pt(t)[e]:void 0},Ca=e=>or.filterXSS(e.trim(),{whiteList:{}}),ti=e=>typeof e=="string"?e.split(",").map(Ca):Array.isArray(e)?e.map(Ca):e,Cp=e=>Object.keys(e).filter(t=>!!e[t].variable).filter(t=>!!e[t].values.length).reduce((t,n)=>E(v({},t),{[e[n].variable]:e[n].values.map(s=>ti(s.answer))}),{}),ni=e=>Array.isArray(e)?e[e.length-1]:e,Nt=({targetVar:e,defaultValue:t,filterByElementID:n,useRawCalculationResults:s})=>{var u;const a=We();if(!a)return;const r=pt(a);if(n){const m=Object.keys(r);for(let h=0;h<m.length;h++){const p=m[h];p!==n&&delete r[p]}}const i=Cp(r),o=Object.entries(Ut.parse(window.location.search)).reduce((m,[h,p])=>E(v({},m),{[h]:[ti(ni(p))]}),{}),c=bp(e);return(u=v(v(v({},i),s&&c!==void 0?{[e]:[[c.toString()]]}:{}),o)[e])!=null?u:t?[t]:void 0},si=e=>{const t=e.getAttribute("id"),n=e.getAttribute("data-variable");if(!(!t||!n))return Nt({targetVar:n,filterByElementID:t})},La=e=>{const t=si(e);if(!t)return;const n=e.getAttribute("data-answer");n&&t.some(a=>a.some(r=>r===n))&&(e.checked=!0)},Na={},Lp=(e,t)=>{e.addEventListener("load",()=>{t()})},_t=async(e,t=Lp,n=!0,s="text/javascript",a=!1,r)=>{var i;return(i=Na[e])!=null?i:Na[e]=new Promise((o,c)=>{try{const d=Object.assign(document.createElement("script"),{src:e,async:n,type:s});if(r&&(d.id=r),t(d,o),d.addEventListener("error",()=>{c({message:`Failed to load the script ${e}`})}),a){const u=_e();if(u)return u==null?void 0:u.appendChild(d);console.error("Failed to load script in shadow root")}else document.body.appendChild(d)}catch(d){c(d)}})},Np="https://libs.heyflow.cloud/cleavejs/1.6.0/cleave-phone.i18n.js",_p=async()=>{await _t(Np)},Ap={creditCard:{type:"cleavejs",options:{creditCard:!0}},"phone-number-de":{type:"cleavejs",options:{phone:!0,phoneRegionCode:"de"}},"phone-number-us":{type:"cleavejs",options:{phone:!0,phoneRegionCode:"us"}},date:{type:"cleavejs",options:{date:!0,delimiter:".",datePattern:["d","m","Y"]}},"date-slash":{type:"cleavejs",options:{date:!0,delimiter:"/",datePattern:["d","m","Y"]}},"date-slash-reverse":{type:"cleavejs",options:{date:!0,delimiter:"/",datePattern:["Y","m","d"]}},"date-us-slash":{type:"cleavejs",options:{date:!0,delimiter:"/",datePattern:["m","d","Y"]}},"date-us-dot":{type:"cleavejs",options:{date:!0,delimiter:".",datePattern:["m","d","Y"]}},"date-us-dash":{type:"cleavejs",options:{date:!0,delimiter:"-",datePattern:["m","d","Y"]}},dateReverse:{type:"cleavejs",options:{date:!0,delimiter:"-",datePattern:["Y","m","d"]}},months:{type:"cleavejs",options:{date:!0,delimiter:"/",datePattern:["m","y"]}},"months-year":{type:"cleavejs",options:{date:!0,delimiter:"/",datePattern:["m","Y"]}},time:{type:"cleavejs",options:{time:!0,timePattern:["h","m"]}},numeral:{type:"cleavejs",options:{numeral:!0,numeralThousandsGroupStyle:"thousand"}},numeralDot:{type:"cleavejs",options:{numeral:!0,numeralDecimalMark:",",delimiter:"."}},"only-numbers":{type:"inputFilter",regExp:/^\d*$/},"only-letters":{type:"inputFilter",regExp:/^[\p{Letter}\p{Mark}]*$/u},"letters-and-numbers":{type:"inputFilter",regExp:/^[\p{Letter}\p{Mark}\p{Number}]*$/u},"zip-code-de":{type:"inputFilter",regExp:/^\d{0,5}$/,pattern:"^\\d{5,5}$"}},Tp=50,ke=e=>{var a;const t=x(),n=t.constants.FLOW_ID,s=(a=t.runtime.messageSource)!=null?a:"heyflow";parent.postMessage(JSON.stringify(v({id:n,source:s,widgetWrapperRef:Ts()},e)),"*")},Rp=e=>{const t=x(),n=e.offsetHeight,s=F("header"),a=s?Math.max(s.offsetHeight,s.clientHeight,s.scrollHeight):0,r=F("footer"),i=r?Math.max(r.offsetHeight,r.clientHeight,r.scrollHeight):0,o=t.constants.FEATURES.removeBranding?0:Tp;return n+a+i+o},Qt=e=>{if(!e)return;const t=e.offsetHeight;if(t===0)return;const n=Rp(e);t>0&&n>0&&(ke({event:"setSectionHeight",sectionHeight:t}),ke({event:"setScreenHeight",screenHeight:n}))},$p=e=>{const t=x(),n=e.map(s=>{const{sensitive:a,variable:r,label:i,id:o,values:c}=s,d=F(`#${o}`),u=d==null?void 0:d.closest("section"),m=u==null?void 0:u.getAttribute("id"),h=u==null?void 0:u.getAttribute("name"),p=c.map(({answer:f})=>f).join(", ");return{id:o,label:i,value:p,values:c,variable:r,sensitive:a,screenID:m,screenName:h}});return t.constants.FEATURES.advancedClientTracking?n:jp(n)},jp=e=>e.map(t=>({value:"Upgrade",screenID:"Upgrade",screenName:"Upgrade",values:[],id:"Upgrade",label:t.label,variable:"Upgrade",sensitive:!1})),Pp=e=>e.reduce((t,n)=>{const s=n.values.map(({answer:a})=>a).join(", ");return E(v({},t),{[n.label]:s})},{}),_n=()=>{const e=We();if(!e)return;const t=pt(e),n=Object.values(t);return{fields:$p(n),fieldsSimple:Pp(n)}},Bp=e=>{const t=x();t.constants.PUSH_DL&&(G.trace("Pushing to parent window dataLayer",e),ke({event:"dataLayerPush",payload:E(v({},e),{HEYFLOW_ID:t.constants.FLOW_ID,HEYFLOW_GA4_MEASUREMENT_ID:t.constants.GA4_MEASUREMENT_ID})}))},Ne=(e,t)=>{var s,a;if(Ce()||ft())return;G.debug(`[DataLayer] Pushing event '${e}' to dataLayer.`,t);const n=x();try{const r=E(v({},t),{event:e,source:"heyflow",trackingVersion:(s=n.constants.TRACKING_VERSION)!=null?s:0,origin:window.location.origin,pathname:window.location.pathname.replace(/\/$/,""),FLOW_ID:n.constants.FLOW_ID});window.dataLayer=(a=window.dataLayer)!=null?a:[],window.dataLayer.push(r),Bp(r)}catch(r){throw G.error("[DataLayer] Failed to push into dataLayer",r),r}},Mp=e=>{if(gt())return Dp(e);G.trace("[DataLayer] Init default dataLayer tracking"),e.addEventListener("heyflow-init",()=>{Ne("heyflow-init",{fields:[],screens:{}})}),e.addEventListener("heyflow-visit",()=>{Ne("heyflow-visit")}),e.addEventListener("heyflow-exit",()=>{Ne("heyflow-exit")}),e.addEventListener("heyflow-change",()=>{Ne("heyflow-change",v({},_n()))}),e.addEventListener("heyflow-submit",({detail:t})=>{Ne("heyflow-submit",E(v({},_n()),{screen_name:t.screenName}))}),e.addEventListener("heyflow-screen-view",({detail:t})=>{Ne("heyflow-screen-view",{screen_id:t.screenID,screen_name:t.screenName,previous_screen_id:t.previousScreenID,previous_screen_name:t.previousScreenName})}),e.addEventListener("heyflow-screen-leave",({detail:t})=>{var s;const n=(s=_n())==null?void 0:s.fields.filter(({screenName:a})=>a===t.screenName);Ne("heyflow-screen-leave",{screen_name:t.screenName,payload:n,screens:{[t.screenName]:n}})}),e.addEventListener("heyflow-button-click",({detail:t})=>{Ne("heyflow-button-click",{custom_event_name:t.customEventName,custom_event_label:t.customEventLabel})}),e.addEventListener("heyflow-input-click",({detail:t})=>{Ne("heyflow-input-click",{custom_event_name:t.customEventName,custom_event_label:t.customEventLabel})})},Dp=e=>{gt()&&(G.trace("[DataLayer] Init *legacy* dataLayer tracking"),e.addEventListener("heyflow-init",()=>{Ne("init")}),e.addEventListener("heyflow-visit",()=>{Ne("heyflow-visit")}),e.addEventListener("heyflow-exit",()=>{Ne("exit")}),e.addEventListener("heyflow-submit",()=>{Ne("submit-success")}),e.addEventListener("heyflow-screen-view",({detail:t})=>{Ne("render",{screen_id:t.screenID,screen_index:t.screenIndex,screen_name:t.screenName}),Ne("screen-view",{screen_name:t.screenName,old_screen_name:t.previousScreenName,previous_screen_name:t.previousScreenName})}),e.addEventListener("heyflow-button-click",({detail:t})=>{Ne("button-tracking",{heyflow_event_name:t.customEventName})}),e.addEventListener("heyflow-input-click",({detail:t})=>{Ne("input-tracking",{heyflow_event_name:t.customEventName,heyflow_system_label:t.customEventLabel})}))},Vp="https://assets.prd.heyflow.com/builder";var nr;const _a=(nr=x())==null?void 0:nr.constants.HEYFLOW_TRACKING_ENDPOINT;function Op(e){return Ln.sanitize(e,{USE_PROFILES:{html:!0}})}const Fp="https://libs.heyflow.cloud/mathjs/11.0.1/math.min.js",Up=async()=>(await _t(Fp),math),Wp=new RegExp("@[\\w-_]+","g"),Hp=new RegExp(/(?:\.|,)(?!\d{1,2}$)/gm),qp=new RegExp(/^(-)|[^0-9.,]+/g),Aa="formula-evaluation-error",jn="data-formula-expression",zp="data-formula-fallbackcontent",ai="data-formula-systemlabel",Ta="data-formula-numberformatoptions",ri="variable-replace",ii="formula-replace",oi="data-variable",li=e=>{Array.from(e.getElementsByClassName(ii)).filter(t=>!t.hasAttribute(jn)).forEach(t=>{var n;t.setAttribute(jn,(n=t.textContent)!=null?n:""),t.textContent=" "})},ci=e=>{Array.from(e.getElementsByClassName(ri)).forEach(Kp),Array.from(e.getElementsByClassName(ii)).forEach(Yp)},Kp=e=>{const t=e.getAttribute(oi);if(!t)return;const n=Nt({targetVar:t});e.innerHTML=Op(n?n.join(", "):`@${t}`)},Gp=(e,t,n)=>{for(const a of e.querySelectorAll(".system-label-input"))a.remove();if(!(t!=null&&t.trim()))return;const s=document.createElement("input");s.classList.add("system-label-input"),s.type="hidden",n&&(s.value=n),s.setAttribute("data-type","input"),s.setAttribute("data-label",t),s.setAttribute("id",t),s.name=t,e.appendChild(s)},di=e=>{var t;return e.hasAttribute(Ta)?JSON.parse(decodeURIComponent((t=e.getAttribute(Ta))!=null?t:"{}")):{}},Yp=async e=>{var r,i,o,c,d;const t=(r=e.getAttribute(jn))!=null?r:"",n=ui(e),s=n[n.length-1],a=(i=e.getAttribute(ai))!=null?i:void 0;try{const u=await mi(t),m=di(e);a&&yp(a,u),s.textContent=u.toLocaleString(void 0,m),(o=s.parentElement)==null||o.classList.remove(Aa)}catch(u){console.error(`Error while evaluating formula ${t}`,u);const m=(c=e.getAttribute(zp))!=null?c:"Formula could not be evaluated";s.textContent=m,(d=s.parentElement)==null||d.classList.add(Aa)}n.slice(1).forEach(u=>{if(Jp(u).forEach(m=>{var h;return(h=u.parentNode)==null?void 0:h.removeChild(m)}),u.nodeType===Node.ELEMENT_NODE){const m=u;m.classList.remove(ri),m.removeAttribute(oi)}}),Gp(e,a,s.textContent)},ui=e=>{if(e.nodeType===Node.TEXT_NODE)return[e];const t=Array.from(e.childNodes),n=[];for(let s=0;n.length===0&&s<t.length;s++){const a=ui(t[s]);if(a.length)return[e,...a]}return[]},Jp=e=>{var t,n;return Array.from((n=(t=e.parentNode)==null?void 0:t.childNodes)!=null?n:[]).filter(s=>s!==e)},Zp=e=>{var n;return((n=e.match(Wp))!=null?n:[]).sort((s,a)=>a.length-s.length).reduce((s,a)=>s.replace(new RegExp(a,"g"),Xp(a)),e)},mi=async e=>{const t=Zp(e);return(await Up()).evaluate(t.trim())};function Xp(e){const t=Nt({targetVar:e.substring(1),useRawCalculationResults:!0});return t===void 0?"0":`(${t.map(([n])=>Qp(n)).join("+")})`}function Qp(e){const t=e.replace(Hp,"").replace(qp,"").replace(",",".");return t||"0"}const eg=(e,t=",",n=!1)=>{const s="&?([\\w-]+=)?@([\\w-]+)",a=e.match(new RegExp(s,"g"));return a!=null&&a.length&&a.forEach(r=>{const i=r.match(new RegExp(s));if(!i)return;const o=Nt({targetVar:i[2]});if(!o){n&&(e=e.replace(i[0],""));return}const c=new RegExp("@"+i[2],"g");e=e.replace(c,o.map(([d])=>[encodeURIComponent(d)]).join(t))}),e},tg=async e=>{const t=F(`[${ai}="${e}"]`),n=t==null?void 0:t.getAttribute(jn);if(!t||!n)return null;const s=await mi(n),a=di(t);return s.toLocaleString(void 0,a)},Ra={},De=(e,t)=>{if(!e)return;e.dataset.status=t;const n=Ra[e.id];(t==="success"||t==="error")&&(n&&clearTimeout(n),Ra[e.id]=setTimeout(function(){delete e.dataset.status},1e3))},mt=Rs()?{nextDelay:250,minDelay:0,slowWarnTimeout:5e3,errorTimeout:3e4}:{nextDelay:500,minDelay:1500,slowWarnTimeout:5e3,errorTimeout:3e4},ng=()=>setTimeout(()=>{const e=`Slow connection discovered. Aborting in ${(mt.errorTimeout-mt.slowWarnTimeout)/1e3}s. Check your internet availability.`;console.warn(e)},mt.slowWarnTimeout),sg=(e,t)=>{const n="The server took too long to respond. Code: 50002";K({severity:"error",message:"Submit failed due to timeout",history:Z.history}),qs({code:"submit-failed-timeout",message:n}),De(t,"error"),zt(e)},Os=async(e,t)=>{var n,s,a;try{if(["loading","success"].includes((n=e.dataset.status)!=null?n:""))return;const i=x(),o=Date.now(),c=i.runtime.lastSubmitClickAtMs;if(c&&o-c<1e3){console.log("Throttling submit");return}if(i.runtime.lastSubmitClickAtMs=o,i.runtime.isSubmitted&&i.constants.ENFORCE_SINGLE_SUBMIT===!0){console.warn("Will not re-submit response: ENFORCE_SINGLE_SUBMIT is set."),De(e,"success");return}const d=typeof t.nextDelay=="number"?t.nextDelay:mt.nextDelay,u=typeof t.minDelay=="number"?t.minDelay:mt.minDelay,m=(s=t.errorScreen)!=null?s:"error",h=i.runtime.currentScreen,p=h==null?void 0:h.id;if(!p)return console.error("no screen id found");if((t.nextDelay!==0||i.runtime.isSubmitting)&&De(e,"loading"),i.runtime.isSubmitting)return;if(i.runtime.isSubmitting=!0,!(await Kt(p)).isValid){i.runtime.isSubmitting=!1,De(e,"error");return}zs("submit-attempt",{screen_id:p});const g=ng(),b=()=>{clearTimeout(g)};try{const S=We(),w=S?Vs(ei(pt(S))):null;await hi(w);const{invalidScreens:k,screensWithMissingFields:C}=await Ti();k.length&&K({message:"Flow with missing responses submitted",severity:"error",data:{invalidScreens:k,screensWithMissingFields:C},history:Z.history}),i.runtime.isSubmitted=!0,i.runtime.submittedAt=new Date;try{if(je({eventName:"heyflow-submit",payload:{screenID:p,screenName:(a=h==null?void 0:h.getAttribute("name"))!=null?a:void 0}}),K({message:"Flow submitted",history:Z.history}),b(),!w)return;ke({fields:w,event:"submit"}),await Nn(ag(o,u)),d!==0&&De(e,"success"),await Nn(d),Ge(t.nextAction,t.destination,e,E(v({},t),{noValidate:!0}))}catch(T){i.runtime.isSubmitting=!1,console.error("Error after submitting",T),K({message:"Submit failed",severity:"error",data:{error:`${T.name} ${T.message}`},history:Z.history})}}catch(S){if(S.code==="ECONNABORTED"){sg(m,e);return}i.runtime.isSubmitting=!1,qs({code:"submit-failed",message:"An unknown server error occurred. Code: 50001",error:S}),K({message:"Submit failed",severity:"error",data:{error:`${S.name} ${S.message}`},history:Z.history}),b(),De(e,"error"),await Nn(d),zt(m)}i.runtime.isSubmitting=!1}catch(r){console.error("Error in submit",r);const i=x();i.runtime.isSubmitting=!1,K({message:"Submit failed",severity:"error",data:{error:`${r.name} ${r.message}`},history:Z.history})}},ag=(e,t)=>{const n=Date.now()-e;return n<t?t-n:0},rg=e=>{const t=ea(),n=x();return E(v({fields:e},n.runtime.dev?{dev:{useSandboxTopic:!0}}:void 0),{origin:window.location.origin,fullUrl:window.location.href,referrer:window.document.referrer,variantID:n.constants.VARIANT_ID,activeTestID:n.constants.TEST_ID,screenHistory:n.getHistory(),sessionID:t})},ig=async(e,t)=>{const s=`${x().constants.API_ENDPOINT}/flow/${e}/submit`;return de.post(s,{data:rg(t),timeout:mt.errorTimeout,headers:{"Content-Type":"application/json"},withCredentials:!0})},og=async(e,t,n)=>de({method:"post",url:n,data:{fields:t,flowId:e},timeout:mt.errorTimeout,headers:{"Content-Type":"application/json"}}),hi=async(e,t=0)=>{try{if(!e)return;const n=x(),s=n.constants.FLOW_ID;switch(n.constants.RESPONSE_API){case"webhook":await og(s,e,n.constants.RESPONSE_API_URI);break;case"heyflow":default:await ig(s,e)}}catch(n){if(t<3)await new Promise(s=>{setTimeout(s,500*(t+1))}),await hi(e,t+1);else throw n}},Et=e=>{if(ft())return;const{options:t,mode:n,action:s,destination:a,element:r}=e;switch(n){case"async":Ce()?setTimeout(()=>{ke({event:"loaderPreviewNavigation"})},500):setTimeout(()=>{Ge(s,a,r,t)},e.duration);break;case"sync":Ge(s,a,r,t);break;case"submit":Os(e.button,E(v({},e.options),{nextAction:s,destination:a}));break;default:throw new Error("Invalid navigation type")}},lg=e=>{const{screenID:t}=e;Et({action:"go",destination:t,mode:"sync"})},cg=()=>{Et({action:"next",mode:"sync"})},dg={"navigate-to-screen":lg,"navigate-next":cg},et={HIDE:"hide",SHOW:"force-visible"},Ss=e=>F(`[data-blockid="${e}"]`),$a=(e,t)=>{const n=Ss(e);n&&(t?(n.classList.add(et.SHOW),n.classList.remove(et.HIDE)):(n.classList.add(et.HIDE),n.classList.remove(et.SHOW)))},Fs=e=>({show:()=>{$a(e,!0)},hide:()=>{$a(e,!1)},get:()=>{const t=Ss(e);if(!t)return;const n=t.classList.contains(et.HIDE),s=t.classList.contains(et.SHOW);if(n&&!s)return!1;if(!n&&s)return!0},clear:()=>{const t=Ss(e);t&&t.classList.remove(et.HIDE,et.SHOW)}}),ug=({blockID:e})=>Fs(e).show(),mg=({blockID:e})=>Fs(e).hide(),hg={"show-block":ug,"hide-block":mg},fg=v(v({},dg),hg);class Us{static register(t,n){this.handlers.set(t,n)}static registerMany(t){Object.entries(t).forEach(([n,s])=>{this.handlers.set(n,s)})}static getHandler(t){const n=this.handlers.get(t);if(!n)throw new Error(`No handler registered for action type: ${t}`);return n}static getAllHandlers(){const t={};return this.handlers.forEach((n,s)=>{t[s]=n}),t}}U(Us,"handlers",new Map);Us.registerMany(fg);class pg{isPredicateAnd(t){return"and"in t&&Array.isArray(t.and)}isPredicateOr(t){return"or"in t&&Array.isArray(t.or)}isStatementAnd(t){return"and"in t&&Array.isArray(t.and)}isStatementOr(t){return"or"in t&&Array.isArray(t.or)}convertPredicateToCondition(t){if(this.isPredicateAnd(t))return{all:t.and.map(n=>this.convertStatementToCondition(n))};if(this.isPredicateOr(t))return{any:t.or.map(n=>this.convertStatementToCondition(n))};throw new Error("Invalid predicate format")}convertStatementToCondition(t){return this.isStatementAnd(t)?{all:t.and.map(n=>this.convertStatementToCondition(n))}:this.isStatementOr(t)?{any:t.or.map(n=>this.convertStatementToCondition(n))}:this.convertStatementWithValueToCondition(t)}convertStatementWithValueToCondition(t){const{variable:n,value:s,method:a}=t;return{fact:n,operator:a,value:s}}convertRule(t){return t.conditionalStatements.map(n=>({conditions:this.convertPredicateToCondition(n.predicate),event:{type:n.action.type,params:n.action.params}}))}}const gg=["navigate-to-screen","navigate-next"],vg={buttonClick:"heyflow-button-click",screenView:"heyflow-screen-view",inputClick:"heyflow-input-click",submit:"heyflow-submit",visit:"heyflow-visit",init:"heyflow-init",exit:"heyflow-exit",change:"heyflow-change"},lt=class lt{constructor(){U(this,"engine");U(this,"unsubscribe",null);U(this,"getVariables",null);U(this,"isInitialized",!1);U(this,"converter");U(this,"eventHandlers",new Map);U(this,"rules",[]);U(this,"publicEventNames",["heyflow-screen-view","heyflow-screen-leave","heyflow-input-click","heyflow-submit","heyflow-visit","heyflow-init","heyflow-exit","heyflow-change","heyflow-button-click"]);this.converter=new pg}static getInstance(){return lt.instance||(lt.instance=new lt),lt.instance}async initialize(){var o;if(this.isInitialized)return;const t=(o=x().constants.RULES)!=null?o:[];if(!t.length){this.isInitialized=!0;return}const{Engine:n,Rule:s}=await te(async()=>{const{Engine:c,Rule:d}=await import("./json-rules-engine.chunk-xi7HaHyY.js").then(u=>u.i);return{Engine:c,Rule:d}},[]);this.engine=new n;const{getBlocksVariableState:a,subscribeToBlocksVariableState:r}=await te(async()=>{const{getBlocksVariableState:c,subscribeToBlocksVariableState:d}=await Promise.resolve().then(()=>fp);return{getBlocksVariableState:c,subscribeToBlocksVariableState:d}},void 0);this.getVariables=a,this.rules=t.map(c=>E(v({},c),{engineRules:this.converter.convertRule(c).map(d=>new s(d))}));const i=new Set(this.rules.flatMap(c=>c.triggers.map(d=>d.type)));this.setupEventListeners(this.publicEventNames.filter(c=>i.has(c))),i.has("immediate")&&(this.handleStateChange(this.getVariables()),this.unsubscribe=r(c=>{this.handleStateChange(c)})),this.isInitialized=!0}setupEventListeners(t){const n=Yt();t.forEach(s=>{const a=r=>{this.handleTrigger({type:s,payload:r&&"detail"in r?r.detail:void 0})};n.addEventListener(s,a),this.eventHandlers.set(s,a)})}get trigger(){return Object.entries(vg).reduce((t,[n,s])=>(t[n]=async a=>this.isInitialized?await this.handleTrigger({type:s,payload:a}):(console.warn("Rules engine is not initialized"),{triggeredRules:[]}),t),{})}findMatchingRules(t){return this.rules.filter(n=>{const s=n.triggers.filter(a=>a.type===t.type);return s.length?s.some(a=>{var r,i;switch(a.type){case"heyflow-button-click":case"heyflow-input-click":return a.blockID?t.type==="heyflow-button-click"&&a.blockID===((r=t.payload)==null?void 0:r.blockID):!0;case"heyflow-screen-view":case"heyflow-screen-leave":return a.screenID?(t.type==="heyflow-screen-view"||t.type==="heyflow-screen-leave")&&a.screenID===((i=t.payload)==null?void 0:i.screenID):!0;default:return!0}}):!1})}async handleTrigger(t){if(!this.engine)throw new Error("Engine is not initialized");if(!this.getVariables)throw new Error("getVariables is not initialized");const n=this.findMatchingRules(t);if(!n.length)return{triggeredRules:[]};this.loadRulesIntoEngine(n);const s=this.getVariables(),{events:a}=await this.engine.run(s);return await this.handleTriggeredEvents(a),{triggeredRules:n}}clearEngineRules(){this.rules.flatMap(t=>t.engineRules).forEach(t=>{var n;(n=this.engine)==null||n.removeRule(t)})}loadRulesIntoEngine(t){this.clearEngineRules(),t.flatMap(n=>n.engineRules).forEach(n=>{var s;(s=this.engine)==null||s.addRule(n)})}async handleStateChange(t){if(!this.engine)throw new Error("Engine is not initialized");const n=this.rules.filter(a=>a.triggers.some(r=>r.type==="immediate"));if(!n.length)return;this.loadRulesIntoEngine(n);const{events:s}=await this.engine.run(t);await this.handleTriggeredEvents(s)}async handleTriggeredEvents(t){for(const n of t)await this.executeAction(n)}async executeAction({type:t,params:n}){const s=Us.getHandler(t);if(!s)throw new Error(`No handler registered for action type: ${t}`);await s(n)}isBlockingAction(t){return gg.includes(t.type)}hasBlockingRuleForBlock(t,n){return this.isInitialized?this.rules.some(s=>s.triggers.some(a=>a.type===n&&"blockID"in a&&a.blockID===t&&s.conditionalStatements.some(r=>this.isBlockingAction(r.action)))):(console.warn("Rules engine is not initialized"),!1)}hasBlockingRuleForScreen(t,n){return this.isInitialized?this.rules.some(s=>s.triggers.some(a=>a.type===n&&"screenID"in a&&a.screenID===t&&s.conditionalStatements.some(r=>this.isBlockingAction(r.action)))):(console.warn("Rules engine is not initialized"),!1)}hasBlockingRuleForTriggerType(t){return this.isInitialized?this.rules.some(n=>n.triggers.some(s=>s.type===t&&!("blockID"in s)&&!("screenID"in s)&&n.conditionalStatements.some(a=>this.isBlockingAction(a.action)))):(console.warn("Rules engine is not initialized"),!1)}cleanup(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null);const t=Yt();this.publicEventNames.forEach(n=>{const s=this.eventHandlers.get(n);s&&(t.removeEventListener(n,s),this.eventHandlers.delete(n))}),this.isInitialized=!1}};U(lt,"instance");let ks=lt;const en=ks.getInstance(),yg=e=>{var t;return{id:e.id,isChecked:e.checked,priority:parseInt((t=e.getAttribute("data-priority"))!=null?t:""),destination:e.getAttribute("data-destination"),isConditional:e.hasAttribute("data-conditional")}},bg=(e,t)=>{var a;const n=(a=F(`#${e}`))==null?void 0:a.getElementsByClassName("multiple-choice-option");return n?Me(n).map(r=>r.getElementsByTagName("input")[0]):[]},wg=(e,t=!0)=>{var n;return(n=bg(e).map(yg).filter(s=>t?s.isConditional:!0).sort((s,a)=>s.priority>a.priority?-1:1).find(s=>s.isChecked))==null?void 0:n.destination},zt=(e,t=!1)=>{const n=kg(e);if(!n)return console.error("Cannot go to screen: screen name is undefined");ke({event:"goToScreen",screenId:e}),Z.goTo(n,t)},Sg=e=>{const t="section",n=be(t);if(!n.length)return ht(t);const s=[...n].filter(o=>{var c;return!["system","template"].includes((c=o.getAttribute("data-type"))!=null?c:"")}),a=s.find(o=>o.id===e);if(!a)return;const r=s.indexOf(a),i=s[r+1];if(!i){setTimeout(function(){ke({event:"lastScreenNavNext"})});return}return i.id},kg=e=>{const t="section",n=be(t);if(!n.length)return ht(t);const s=[...n].find(a=>a.getAttribute("id")===e);return s==null?void 0:s.getAttribute("name")},Eg=()=>{var e;ke({event:"goBack"}),Z.goTo((e=Z.previousScreen)!=null?e:"")},Ws=async(e,t,n,s)=>{if(s)return by(e),zt(t);(await Kt(e,n)).isValid&&(!s&&Ai(e)&&await Nn(1e3),zt(t))},xg=async(e,t,n)=>{const s=wg(e);s==="next"&&await Hs(e,t,n),await Ws(e,s!=null?s:"",t,n)},Hs=async(e,t,n)=>{const s=Sg(e);s&&await Ws(e,s,t,n)},Ig=(e,t,n,s)=>{if(!e)return console.warn("Cannot redirect: URL is undefined.");if(Ce()&&t==="_self"){ke({event:"blockedNavigation"});return}const a=eg(e,n,s);t==="button-targets_blank"&&(t="_blank"),t==="button-targets_self"&&(t="_self"),t==="button-targets_parent"&&(t="parent"),t==="parent"?ke({event:"redirect",redirectTo:a}):(window.open(a,t,"noreferrer"),ke({event:"window-open",redirectTo:a}))},ja=async(e,t,n,s)=>{await Ws(t,e,n,s)},Ge=async(e,t,n,s)=>{const a=x(),r=a.runtime.currentScreen;r.classList.add("navigated");const i=r.id;if(t===i)return;switch(e){case"evalNext":{await xg(i,n,s==null?void 0:s.noValidate);break}case"next":{await Hs(i,n,s==null?void 0:s.noValidate);break}case"closeModal":{Qi();break}case"redirect":{const{redirectURL:d,target:u,urlVarsDelimiter:m,urlOmitEmptyVars:h}=s!=null?s:{};Ig(d,u,m,h);break}case"goBack":{Eg();break}case"disabled":{console.warn("Navigation disabled");break}case"go":{if(!t)return console.error("Cannot navigate: destination is undefined.");await ja(t,i,n,s==null?void 0:s.noValidate);break}default:{if(!t)return console.error("Cannot navigate: destination is undefined.");await ja(t,i,n,s==null?void 0:s.noValidate)}}const{RESTORE_DATA:o,CONTINUE_ON_LAST_VISITED_SCREEN:c}=a.constants;o&&St()&&(uw(),c&&mw())},fi=async e=>{var t;try{const n=JSON.parse((t=e.getAttribute("data-attr"))!=null?t:"{}"),s=e.dataset.destination,a=e.dataset.action;if(!a||x().constants.IS_RULES_ENABLED&&en.hasBlockingRuleForBlock(e.id,"heyflow-input-click"))return;await Ge(a,s,e,n)}catch(n){console.error("Error on navigationHandler",n),K({severity:"error",message:"Error on navigationHandler",data:{error:`${n.name} ${n.message}`},history:Z.history})}},Cg=e=>{const t=e.getElementsByClassName("scale-block");Array.from(t).forEach(n=>{const s=n.getAttribute("data-id");s&&pi.init(s)})},Lg=e=>{const t=e.getElementsByClassName("scale-block");Array.from(t).forEach(n=>{const s=n.getAttribute("data-id"),a=F(`#scale-${s}`);a==null||a.setAttribute("data-pristine","true")})},pi={init:e=>{let t=0;const n=F(`#scale-${e}`);if((n==null?void 0:n.getAttribute("data-pristine"))!=="true")return;n.setAttribute("data-pristine","false");const s=n.children,a=n.getElementsByTagName("input");function r(){for(let d=0;d<s.length;d++)d<t?(a[d].checked=!0,s[d].classList.add("active")):(a[d].checked=!1,s[d].classList.remove("active"))}function i(){for(let d=0;d<a.length;d++)a[d].getAttribute("data-checked")&&(a[d].checked=!0);for(let d=0;d<a.length;d++)if(a[d].checked){t=d+1;break}r()}function o(d){for(let u=0;u<s.length;u++){if(!d.currentTarget)return;Array.from(s).indexOf(d.currentTarget)>=u?s[u].classList.add("active"):s[u].classList.remove("active")}}for(let d=0;d<s.length;d++)s[d].addEventListener("mouseover",o),s[d].addEventListener("change",o),s[d].addEventListener("click",async function(u){a[d].checked=!0,t=Array.from(s).indexOf(u.currentTarget)+1,je({eventName:"heyflow-change"}),await fi(s[d])});n.addEventListener("mouseout",r);function c(){const d=Math.min(42,Ct()/s.length-3);for(let u=0;u<s.length;u++){const m=s[u].getElementsByTagName("i").item(0);m&&(m.style.fontSize=d+"px")}}i(),n.classList.contains("icon-rating")&&c()}},Ng=async e=>{await me({section:e,blockType:"scale",selector:".scale-block"})},_g=e=>{Object.values(Se.getBlocksForSection("scale",e.id)).forEach(t=>{t.reset()})},Ag={init:e=>{const t=Se.getBlockRef(e);if(!t)throw new Error(`Scale block with id ${e} not found`);t.hydrate()}},Tg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Ng:Cg,Rg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?_g:Lg,gi=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Ag:pi,$g=e=>{const t=e.getElementsByTagName("select");Array.from(t).forEach(n=>{jg(n),!Ve(n)&&(n.addEventListener("change",function(){rt(n.name),$i(n)}),n.addEventListener("keydown",function(s){s.key==="Enter"&&s.preventDefault()}))})},jg=e=>{const t=si(e);t&&(t==null?void 0:t.length)>0&&(e.value=t[0])},Pg=e=>{Array.from(e.getElementsByTagName("select")).forEach(function(n){var a,r;const s=(r=parseInt((a=n.getAttribute("data-selected"))!=null?a:""))!=null?r:0;n.selectedIndex=s})},Bg=async e=>{await me({section:e,blockType:"select",selector:".select-block",onHydrated:t=>{const n=t.querySelector("select");if(!n)throw new Error("No select input in select block defined");n.addEventListener("change",()=>{rt(n.name)}),n.addEventListener("keydown",s=>{s.key==="Enter"&&s.preventDefault()})}})},Mg=e=>{Object.values(Se.getBlocksForSection("select",e.id)).forEach(t=>{t.reset()})},Dg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Bg:$g,Vg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Mg:Pg,Pa={start:0,range:{min:0,max:100},inputUpdateDelay:1e3,format:{to:e=>e.toString()}},vi=e=>{var n,s;const t=(s=Tt((n=e.getAttribute("data-options"))!=null?n:""))!=null?s:{};return E(v(v({},Pa),t),{range:v(v({},Pa.range),t.range)})},Og=e=>{const t=e.getElementsByClassName("range-slider");Array.from(t).forEach(n=>{if(Ve(n))return;const s=n.getAttribute("data-id");if(!s)return;const a=vi(n),r=n.getAttribute("data-variable"),i=r&&Nt({targetVar:r,defaultValue:a.start});if(r&&i){const c=i.filter(u=>!isNaN(Number(u))),d=c.reduce((u,m)=>u+=Number(m),0);c.length&&(a.start=d)}const o=Ye(function(){rt(s),je({eventName:"heyflow-change"})},500);dt.init(s,a,o)})},Fg=e=>{const t=e.getElementsByClassName("range-slider");Array.from(t).forEach(n=>{const s=n.getAttribute("data-id");if(!s)return;const a=vi(n);dt.reset(s,a)})},yn=e=>Number(e.replace(/\D/g,"")),dt={setInputValues:function(t,n,s){var c,d,u,m;const a=F(`#${t}-input`);if(!a)return console.warn(`No Input Element found for id: ${t} `);const r=F(`#${t}-input-numeric`);r&&(r.value=yn(n[0]).toString());const i=s.format.to(s.range.max),o=s.format.to(s.range.min);a.value=n[0]===i?((c=s.maxPrefix)!=null?c:"")+i+((d=s.maxSuffix)!=null?d:""):n[0]===o&&n[0]!=="0"?((u=s.minPrefix)!=null?u:"")+o+((m=s.minSuffix)!=null?m:""):n[0],a.style.setProperty("--slider-input-size",a.value.length+"ch")},getFormat:function(t){return lr({decimals:t.format.decimals,thousand:t.format.thousand,suffix:t.format.suffix,prefix:t.format.prefix})},init:async function(t,n,s){let a=!1;const r=F(`#${t}-content`);if(!r||r.classList.contains("noUi-target"))return;const{default:i}=await te(async()=>{const{default:d}=await import("./nouislider.chunk-Chh2SjhD.js").then(u=>u.n);return{default:d}},[]);n.format=dt.getFormat(n),i.create(r,n);const o=F(`#${t}-input`);r.noUiSlider.on("update",function(d){var b;a&&s(d[0]),a=!0,dt.setInputValues(t,d,n);const u=r.getElementsByClassName("noUi-tooltip")[0],h=(yn(d[0])-n.range.min)/(n.range.max-n.range.min)*100;u.style.left=`${h}%`,u.style.transform=`translateX(${-h}%)`;const p=Ue("head"),f=`${t}-noUi-after-fix`,g=(b=F(`#${f}`))!=null?b:document.createElement("style");g.id=f,g.innerHTML=`#${t}-content.noUi-horizontal .noUi-tooltip:after {
	left: ${h}%;
	transform: translateX(${-h}%);
}`,p==null||p.appendChild(g)}),r.noUiSlider.on("start",function(){r.classList.add("dragging")}),r.noUiSlider.on("end",function(){r.classList.remove("dragging")});const c=function(d){r.noUiSlider.set(d)};o==null||o.addEventListener("input",Ye(function(){c([yn(o.value)])},n.inputUpdateDelay)),o==null||o.addEventListener("blur",function(){c([yn(o.value)])})},reset:function(t,n){const s=F(`#${t}-content`);s==null||s.noUiSlider.set([n.start]),n.format=dt.getFormat(n),dt.setInputValues(t,[n.start.toString()],n)}},Ug=e=>Ye(()=>{rt(e.id),je({eventName:"heyflow-change"})},500),Wg=async e=>{await me({section:e,blockType:"rangeSlider",selector:".range-slider-block",onHydrated:t=>{const n=t.querySelector(".slider-input");if(!n)throw new Error("No range slider input in range slider block defined");const s=Ug(n);n.addEventListener("input",s)}})},Hg=e=>{Object.values(Se.getBlocksForSection("rangeSlider",e.id)).forEach(t=>{t.reset()})},qg={init:e=>{const t=Se.getBlockRef(e);if(!t)throw new Error(`Range slider block with id ${e} not found`);t.hydrate()}},zg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Wg:Og,Kg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?Hg:Fg,Gg=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?qg:dt,Yg=e=>{if(Fv(e),e.hasAttribute("autofocus")&&e.focus(),Ve(e))return;const n=x().runtime.currentScreen,s=Ye(()=>{var o;((o=e.parentElement)!=null&&o.classList.contains("validated")||n.classList.contains("navigated"))&&xs(e)},250),a=e.offsetHeight||80;function r({retry:o=0,shouldScroll:c=!0}){if(e.scrollHeight===0&&o<10){setTimeout(()=>r({retry:o+1,shouldScroll:c}),100);return}s();const d=window.scrollX,u=window.scrollY;e.style.height="auto",e.style.height=Math.max(a,e.scrollHeight+5)+"px",c&&window.scrollTo(d,u),setTimeout(function(){Qt(n)},0)}function i(){window.setTimeout(()=>{r({retry:0,shouldScroll:!0})},0)}e.addEventListener("change",()=>r({retry:0,shouldScroll:!0})),e.addEventListener("cut",i),e.addEventListener("paste",i),e.addEventListener("drop",i),e.addEventListener("keydown",i),e.addEventListener("blur",()=>{const o=xs(e);K({message:"Textarea blurred",blockID:e.id,data:{hasData:!!e.value,isEmptyString:!e.value.trim(),isRequired:e.required,isValid:o}})}),r({retry:0,shouldScroll:!1}),setTimeout(function(){r({retry:0,shouldScroll:!1})},100)},Jg=e=>{e.value=""},Zg=e=>{const t=F(`section[name="${e}"]`);if(!t)return console.warn(`Failed to reset screen: No screen ${e} found.`);Array.from(t.getElementsByTagName("input")).forEach(Gv),Array.from(t.getElementsByTagName("textarea")).forEach(Jg),Vg(t),Rg(t),Kg(t);const n=x();K({message:"Resetting screen",data:{resetOnBackOption:n.constants.RESET_SCREEN_ON_BACK_NAV},history:Z.history})},Xg=e=>e.map(t=>t.answer).join(", "),Qg=async(e,t)=>{const n={};for(const s of e)switch(s.origin.type){case"block":{const a=s.origin.block.id,r=t.find(i=>i.name===a||i.id===a);r&&(n[s.target.id]=Xg(r.values));break}case"calculation":{const a=await tg(s.origin.id);n[s.target.id]=a!=null?a:"";break}default:console.warn("This origin type is not supported on flow submission.")}return n},ev=()=>{const e=fr("_fbp"),t=tv();return v(v({},e&&{fbp:e}),t&&{fbc:t})},tv=()=>{const e=fr("_fbc");if(e)return e;const n=new URLSearchParams(window.location.search).get("fbclid");if(n)return`fb.1.${Date.now()}.${n}`},nv=()=>{var e,t,n,s;return!!((s=(n=(t=(e=window.fbq)==null?void 0:e.getState)==null?void 0:t.call(e))==null?void 0:n.pixels)!=null&&s[0])},sv=(e,t,n)=>{const a=v({event:e},tn()),r=(i,o,c=0,d)=>{if(!nv()){if(c>10)return G.debug("[Facebook] Not sending Facebook event because Facebook Pixel could not be found (retried 10x).");setTimeout(()=>{r(i,o,c+1,d)},100);return}if(!window.fbq)return;const m=x().integration.FB_PIXEL_SUBMIT_EVENT,h=i==="CustomEvent"||i===m,p=yi(i,o),f=h?"trackCustom":"track";return window.fbq(f,p,a,{eventID:d}),G.debug("[Facebook] Sent Facebook Pixel event.",{action:f,eventName:p,data:a,eventID:d})};r(e,t,0,n)},av=async(e,t,n)=>{var g;const s=x(),{FB_SERVER_PIXEL_ID:a,FB_SERVER_TEST_ID:r,FB_SERVER_ADDITIONAL_PARAMETERS:i,FB_TRACKING_ENDPOINT:o}=s.integration;let c;if(e===bi(s)){const b=We(),S=b&&Vs(pt(b));c=await Qg(i,S!=null?S:[])}if(!a)return G.debug("[Facebook] Not sending Facebook event because FB_SERVER_PIXEL_ID is undefined.");const d=v({event:e},tn()),u=yi(e,t),m=Math.floor(Date.now()/1e3);u==="Purchase"&&(d.currency="EUR",d.value=(g=d.value)!=null?g:0);const{fbc:h,fbp:p}=ev(),f={fbc:h,fbp:p,data:d,eventName:u,eventID:n,eventTime:m,pixelId:a,testID:r,flowID:d.flow_id,userData:c};try{return de.post(o,f).then(()=>{G.debug(`[Facebook] Successfully send Facebook event '${e}' via server-side (CAPI).`,f)})}catch(b){console.error("[Facebook] Tracking Facebook server event failed",b)}},bn=async(e,t)=>{const n=Un(),s=x();try{s.integration.FB_PIXEL_ID&&sv(e,t,n),s.integration.FB_SERVER_PIXEL_ID&&await av(e,t,n)}catch(a){G.error("[Facebook] Tracking Facebook event failed",a)}},yi=(e,t)=>e==="CustomEvent"&&t!=null?t:e,rv=e=>{G.trace("[Facebook] Init Facebook tracking"),e.addEventListener("heyflow-screen-view",async()=>{await bn("PageView")});const t=x();e.addEventListener("heyflow-submit",async()=>{const n=bi(t);await bn(n)}),e.addEventListener("heyflow-button-click",async({detail:n})=>{await bn("CustomEvent",n.customEventName)}),e.addEventListener("heyflow-input-click",async({detail:n})=>{await bn("CustomEvent",n.customEventName)})},bi=e=>{var n;const t=(n=Lt(e.integration.FB_PIXEL_SUBMIT_EVENT))!=null?n:Lt(e.integration.FB_SERVER_SUBMIT_EVENT);return!t||t===""?"CompleteRegistration":t};let Ba=!1;const iv=async e=>{const n=x().integration.HOTJAR_SITE_ID,s=6;if(!(!n||Ba))try{const{default:a}=await te(async()=>{const{default:r}=await import("./vendor.chunk-DwRjKKZr.js").then(i=>i.O);return{default:r}},[]);a.init(parseInt(n,10),s),Ba=!0,e.addEventListener("heyflow-screen-view",({detail:r})=>{a.stateChange(r.screenName||r.screenID||"unknown")})}catch(a){console.error("Failed to load Hotjar:",a)}};function At(){const e=x();return!!(e.constants.IS_V2_VISUAL_BLOCKS_ENABLED||e.constants.IS_V2_INPUT_BLOCKS_ENABLED||e.constants.IS_V2_COMPLEX_BLOCKS_ENABLED)}const ov=e=>e.replace(/^\s/,"+"),lv=(e,t)=>{e.getAttribute("data-answer")===t&&(e.value=t)},cv=(e,t)=>{e.value=t},dv=(e,t)=>{e.getAttribute("data-type")==="multiple-choice"?lv(e,t):cv(e,t)},uv=(e,t,n)=>{const s=Array.from(be(t)).filter(a=>a.dataset.isReactInput!=="true");return s.length===0?!1:(s.forEach(a=>n(a,e)),!0)},wi=(e,t)=>{const n=document.createElement("input");return n.type="text",n.name=e,n.id=e,n.value=t,n.classList.add("hide"),n},mv=(e,t)=>{const n=be(`hey-phone-number[variable="${e}"]`);return n.length===0?!1:(n.forEach(s=>{s.setAttribute("data-initialvalue",ov(t))}),!0)},hv=({name:e,value:t})=>{const n=We(),s=[{selector:`input[data-variable="${e}"]`,handler:dv},{selector:`textarea[data-variable="${e}"]`,handler:(r,i)=>{r.value=i}},{selector:`select[data-variable="${e}"]`,handler:(r,i)=>{r.value=i}}];for(const{selector:r,handler:i}of s)if(uv(t,r,i))return;if(mv(e,t)||At()&&Se.usesVariable(e))return;const a=wi(e,t);return n==null||n.appendChild(a),a},fv=async e=>{const t=`https://create.lidstatic.com/campaign/${e.toLowerCase()}.js?snippet_version=2`;await _t(t,void 0,!0)},pv=()=>{const e=We(),t=wi("leadid_token","");if(t.setAttribute("data-label","Jornaya LeadiD"),t.setAttribute("data-type","input"),e==null||e.appendChild(t),nt()){let n=document.querySelector("#leadid_token");if(n?t.value=n.value:(n=document.createElement("input"),n.type="hidden",n.name="leadid_token",n.id="leadid_token",document.body.appendChild(n)),!n.value){const s=new MutationObserver(()=>{t.value=n.value,n.value&&s.disconnect()});s.observe(n,{attributes:!0,attributeFilter:["value"]})}}},gv=e=>{const t=x(),n=t.integration.JORNAYA_VERISK_ACCOUNT_ID,s=t.integration.JORNAYA_VERISK_CAMPAIGN_ID;if(!n||!s){G.debug("[JornayaVerisk] Integration not enabled, skipping initialization");return}G.trace("[JornayaVerisk] Init tracking"),pv(),fv(s)},Ma=e=>{if(window.lintrk)try{window.lintrk("track",{conversion_id:parseInt(e)}),G.debug(`[LinkedIn] Successfully tracked LinkedIn event. Conversion ID: '${e}'`)}catch(t){G.error(`[LinkedIn] Failed to track LinkedIn event. Conversion ID: '${e}'`,t)}},vv=e=>{G.trace("[LinkedIn] Init LinkedIn tracking");const t=x();e.addEventListener("heyflow-screen-view",()=>{Ma(t.integration.LINKED_IN_SCREEN_VIEW_CONVERSION_ID)}),e.addEventListener("heyflow-submit",()=>{Ma(t.integration.LINKED_IN_SUBMIT_CONVERSION_ID)})},tt=e=>{var t;(t=window==null?void 0:window._paq)!=null&&t.push&&(window._paq.push(e),G.debug("[Matomo] Successfully tracked Matomo event.",e))},yv=e=>{if(gt())return bv(e);G.trace("[Matomo] Init Matomo tracking"),e.addEventListener("heyflow-screen-view",({detail:t})=>{tt(["trackPageView",t.screenName])}),e.addEventListener("heyflow-submit",({detail:t})=>{var n;tt(["trackEvent","submit",(n=t.screenName)!=null?n:""])}),e.addEventListener("heyflow-button-click",({detail:t})=>{var n,s;tt(["trackEvent","button-click",(n=t.customEventName)!=null?n:"",(s=t.customEventLabel)!=null?s:""])}),e.addEventListener("heyflow-input-click",({detail:t})=>{var n,s;tt(["trackEvent","input-click",(n=t.customEventName)!=null?n:"",(s=t.customEventLabel)!=null?s:""])})},bv=e=>{if(!gt())return;G.trace("[Matomo] Init Matomo *legacy* tracking");const n=x().constants.FLOW_ID;e.addEventListener("heyflow-screen-view",()=>{tt(["trackPageView",n])}),e.addEventListener("heyflow-submit",()=>{tt(["trackEvent",n,"submit-success"])}),e.addEventListener("heyflow-button-click",({detail:s})=>{var a;tt(["trackEvent",n,"button-click",(a=s.customEventName)!=null?a:""])}),e.addEventListener("heyflow-input-click",({detail:s})=>{var a;tt(["trackEvent",n,"input-click",(a=s.customEventName)!=null?a:""])})},wv=(e,t)=>{const n=`
    (function(w,d,t,r,u)
    {
        var f,n,i;
        w[u]=w[u]||[],f=function()
        {
            var o={ti:"${e}", enableAutoSpaTracking: false};
            o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")
        },
        n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function()
        {
            var s=this.readyState;
            s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)
        },
        i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)
    })
    (window,document,"script","//bat.bing.com/bat.js","uetq");
  `,s=document.createElement("script");s.textContent=n,s.async=!0;const a=_e();nt()?a==null||a.appendChild(s):document.head.appendChild(s);const r=document.createElement("script");r.textContent=`
      window.uet_report_conversion = function() {
        window.uetq = window.uetq || [];
        window.uetq.push('event', '${t}', {});
      };
    `,nt()?a==null||a.appendChild(r):document.head.appendChild(r)},Sv=(e,t,n)=>{if(!window.uetq)return G.debug("[Microsoft UET] Not sending Microsoft UET event because UET is not available.");const s=v({},tn()),a=kv(e,t),r=v(v(v({},s),n&&{event_id:n}),a!==e&&{event_category:"heyflow"});return window.uetq.push("event",a,r),G.debug("[Microsoft UET] Sent Microsoft UET event.",{eventName:a,data:r,eventID:n})},wn=(e,t)=>{const n=Un(),s=x();try{s.integration.MICROSOFT_UET_TAG_ID&&Sv(e,t,n)}catch(a){G.error("[Microsoft UET] Tracking Microsoft UET event failed",a)}},kv=(e,t)=>{const n={PageView:"page_view",CompleteRegistration:"sign_up",Lead:"generate_lead",Contact:"contact",Subscribe:"subscribe",Purchase:"purchase",AddToCart:"add_to_cart",ViewContent:"view_item",Search:"search",BeginCheckout:"begin_checkout",AddPaymentInfo:"add_payment_info"};return e==="custom"||e==="CustomEvent"?t||"custom":n[e]||e},Da=e=>{const t=Lt(e.integration.MICROSOFT_UET_EVENT_ACTION);return!t||t===""?"submit_lead_form":t},Ev=e=>{const t=x(),n=t.integration.MICROSOFT_UET_TAG_ID,s=Da(t);n&&(G.trace("[Microsoft UET] Init Microsoft UET tracking"),wv(n,s),e.addEventListener("heyflow-screen-view",()=>{wn("PageView")}),e.addEventListener("heyflow-submit",()=>{const a=Da(t);wn(a)}),e.addEventListener("heyflow-button-click",({detail:a})=>{wn("custom",a.customEventName)}),e.addEventListener("heyflow-input-click",({detail:a})=>{wn("custom",a.customEventName)}))},Sn=(e,t)=>{const n=window.ttq;n&&(n.track(e,t),G.debug(`[TikTok] Successfully tracked TikTok event '${e}'.`,t))},xv=e=>{G.trace("[TikTok] Init TikTok tracking"),e.addEventListener("heyflow-screen-view",({detail:t})=>{var n;Sn("ViewContent",{content_type:"product",content_name:t.screenName,content_id:(n=t.screenID)!=null?n:""})}),e.addEventListener("heyflow-submit",()=>{Sn("SubmitForm")}),e.addEventListener("heyflow-button-click",({detail:t})=>{var n,s;Sn("ClickButton",{content_type:"product",content_id:(n=t.customEventName)!=null?n:"",content_name:(s=t.customEventLabel)!=null?s:""})}),e.addEventListener("heyflow-input-click",({detail:t})=>{var n,s;Sn("ClickButton",{content_type:"product",content_id:(n=t.customEventName)!=null?n:"",content_name:(s=t.customEventLabel)!=null?s:""})})},Iv=e=>{const t={};for(const[n,s]of e)t[n]=s;return t},Cv=e=>{const t=new URL(e.replace(/&amp;/g,"&").replace(/&#x3D;/g,"=")),n=new URLSearchParams(t.search);return{url:t.origin+t.pathname,params:Iv(n)}},Lv=()=>{const t=x().integration.VOLUUM_CLICK_ID_PARAMETER,n=t.length?t:"vcid";return new URLSearchParams(window.location.search).get(n)},Nv=async()=>{const e=x();try{const t=e.integration.VOLUUM_POSTBACK_URL;if(!t)return G.warn("[Voluum] Cannot post event to Voluum: Postback URL is undefined.");const{url:n,params:s}=Cv(t),a=Lv();if(!a)return G.warn("[Voluum] Cannot post event to Voluum: Click ID is undefined.");G.debug(`[Voluum] Sending tracking event to ${n}.`),await de.get(n,{params:E(v({},s),{cid:a})}),G.trace("[Voluum] successfully sent event.")}catch(t){throw G.trace("[Voluum] failed to send event."),t}},_v=e=>{G.trace("[Voluum] Init tracking"),e.addEventListener("heyflow-submit",()=>{Nv()})},Av=e=>{Vv(e),Mp(e),rv(e),vv(e),yv(e),xv(e),_v(e),gv(),Ev(e),iv(e)},Tv=()=>{const e=x();G.trace("Init tracking"),G.debug(`Tracking verion: ${e.constants.TRACKING_VERSION}. Log level: ${ot}.`),Rv();const t=Yt();Av(t)},Rv=()=>{const e=Yt();e==null||e.addEventListener("change",function(){je({eventName:"heyflow-change"})}),window.addEventListener("pagehide",()=>{je({eventName:"heyflow-exit"})})},$v=e=>{var n;if(!e)return;const t=F(`section[name="${e}"]`);je({eventName:"heyflow-screen-leave",payload:{screenName:e,screenID:t==null?void 0:t.id,screenIndex:(n=t&&Rn(t))!=null?n:void 0}})},Si=(e,t,n)=>{const s=F(`section[name="${e}"]`),a=s?Rn(s):void 0,r=n?Rn(n):void 0;je({eventName:"heyflow-screen-view",payload:{screenName:t,screenID:n==null?void 0:n.id,screenIndex:r,previousScreenName:e,previousScreenID:s==null?void 0:s.id,previousScreenIndex:a}})},ki=(e,t,n,s,a)=>{if(t===n)return;const r=F(`section[name="${t}"]`),i=F("section");if(!i)return console.warn("The flow seems to be empty.");const o=i.getAttribute("name");if(!o)return console.warn("Cannot find first screen name.");if(!r)return console.warn(`404: ${t} is not a valid path. Redirect to ${o} (default).`),K({message:"Undefined target screen name",severity:"warn",data:{targetScreenName:t},history:Z.history}),qs({message:"Undefined screen name: "+t,code:"undefined-screen-name",screenName:t}),Va({targetScreenName:o,resetHistory:!0});const c=x();s==="back"&&n&&c.constants.RESET_SCREEN_ON_BACK_NAV&&Zg(n),Va({prevScreenName:n,targetScreenName:t,flowDirection:s,resetHistory:a}),!e&&Ce()&&ke({event:"setScreenID",screenID:r.id,screenIndex:Rn(r)})},Va=({prevScreenName:e,targetScreenName:t,flowDirection:n,resetHistory:s})=>{setTimeout(()=>{const a=F(`section[name="${t}"]`);K({message:"Navigating to screen",data:{targetScreenName:t,prevScreenName:e,flowDirection:n},history:Z.history}),iw(e),e&&$v(e);const r=x();Xi(t),n&&!s&&(jv(t,n),r.runtime.screenTrace.push(t)),s&&(r.runtime.screenTrace=[t],Z.history=[t]),e&&Si(e,t,a)})},jv=(e,t)=>{t==="forward"?Z.history.push(e):t==="back"&&(Z.history=$o(Z.history,e))},Pv=(e,t=!1)=>{if(!Ce()&&!ft()){const s=[...mr()].findIndex(a=>a.getAttribute("name")===e);if(!s&&s===-1)return console.warn(`the passed ScreenName ${e} is not present in this Flow`);Z.goTo(e,void 0,t)}},Bv=(e,t,n,s)=>{const a=Z.currentScreen;ki(n,e,a,t,s)},Mv=e=>{window.location.href=`#${e}`},Dv=e=>{var i,o,c;const t=(i=e==null?void 0:e.oldURL)==null?void 0:i.split("#"),n=(o=t==null?void 0:t[1])!=null?o:"",s=(c=window.location.hash.split("#")[1])!=null?c:"",a=Z.history,r=gr(a,s);ki(!1,s,n,r)};var xt=(e=>(e.virtual="virtual",e.window="window",e))(xt||{});const ct=class ct{static get previousScreen(){return this.history[this.history.length-2]}static get currentScreen(){return this.history[this.history.length-1]}static get screenAfterRouting(){return this.routerConfigByRouterMode[this.mode].screenAfterRouting()}static init(t){const n=x();if(n.constants.FEATURES.forceVirtualRouting){if(this.mode="virtual",window.location.hash){const s=window.location.href.split("#")[0];window.history.replaceState(null,"",s)}}else this.mode=t;n.runtime.screenTrace=[],this.history=[],(this.mode==="window"||Ce())&&window.addEventListener("hashchange",Dv)}static goTo(t,n=!1,s){const{routingHandler:a}=this.routerConfigByRouterMode[this.mode],r=n?"forward":gr(this.history,t);a(t,r,n,s)}};U(ct,"mode","virtual"),U(ct,"history",[]),U(ct,"routerConfigByRouterMode",{virtual:{routingHandler:Bv,screenAfterRouting:()=>ct.history[ct.history.length-2]},window:{routingHandler:Mv,screenAfterRouting:()=>document.location.hash.substring(1)}});let Z=ct;const Vt=async(e,t)=>{if(Ce()||ft())return;const n=x();if(e!=="visit"&&!n.runtime.visited)return;G.debug(`[Heyflow] Sending Heyflow tracking event '${e}'.`,t);const s=v(v({event:e},tn()),t);return _a?n.constants.DISABLE_TRACKING?G.debug("[Heyflow] Not sending Heyflow tracking event because tracking is disabled."):de.post(_a,s).catch(a=>{G.error("[Heyflow] Failed to post Heyflow tracking event",a),K({message:"Failed to post Heyflow tracking event",severity:"error",data:{error:`${a.name}: ${a.message}`}})}):G.warn("[Heyflow] Not sending Heyflow tracking event: EVENT_TRACKING_ENDPOINT is undefined.")},Vv=e=>{G.trace("[Heyflow] Init Heyflow tracking"),e.addEventListener("heyflow-screen-view",async({detail:n})=>{const{screenName:s,screenID:a,screenIndex:r}=n;Vt("render",{screen_id:a,screen_index:r,screen_name:s});const{invalidScreens:i,screensWithMissingFields:o}=await Ti(!1);i.length>0&&K({message:"Invalid previous screen detected",severity:"error",data:{invalidScreens:i,screensWithMissingFields:o},history:Z.history}),K({message:"Screen Viewed",history:Z.history})});const t=x();e.addEventListener("heyflow-visit",async({detail:n})=>{await Vt("visit"),K({message:"Flow Visited",history:Z.history}),t.runtime.visited=!0,Si(void 0,n.screenName,t.runtime.currentScreen)}),e.addEventListener("heyflow-submit",async({detail:n})=>{await Vt("submit-success",{screen_id:n.screenID})}),e.addEventListener("heyflow-exit",async()=>{await Vt("exit")})},rt=e=>{if(!gt())return;G.trace(`Tracking legacy change. Input name: ${e}.`);const t=Ip(e);Ne("update",{name:e,payload:t})},qs=async e=>{var n,s,a;G.trace("Tracking legacy error",e);const t={message:(n=e==null?void 0:e.message)!=null?n:"",code:(s=e==null?void 0:e.code)!=null?s:"",error:(a=e==null?void 0:e.error)!=null?a:"",created:new Date().getTime()};await zs("error",t)},zs=async(e,t)=>{if(gt()){G.trace(`Tracking legacy event '${e}'`,t);try{Ne(e,t),await Vt(e,t)}catch(n){console.error("Event tracking failed",n)}}},Ei=e=>Ye(()=>{rt(e.name),Jt(e)},250),xi=e=>Ye(async()=>{var a,r;const t=(a=e.parentElement)==null?void 0:a.classList.contains("validated"),s=(r=x().runtime.currentScreen)==null?void 0:r.classList.contains("navigated");(t||s)&&await Gt(e)},250),Ov=e=>{if(!e.hasAttribute("data-autocomplete"))return;const t=F(`#datalist-${e.id}`),n=F(`#${e.id}-autocomplete-list`);if(!t||!n)return;const s=e.heyflowOnAutocomplete,r=[...t.options].map(({label:o})=>({label:o})),i=(o,c)=>{const d=o.toLowerCase(),u=r.filter(m=>{var h;return(h=m.label)==null?void 0:h.toLowerCase().startsWith(d)});c(u)};Vn({input:e,fetch:s!=null?s:i,onSelect:o=>{var c;e.value=(c=o.label)!=null?c:""},click:o=>o.fetch(),className:"autocomplete-list",debounceWaitMs:200,disableAutoSelect:!0,container:n,customize:(o,c,d,u)=>{d.style.top="",d.style.left="",d.style.visibility="initial"}})},Fv=e=>{const t=e.getAttribute("data-variable"),n=t!=null&&t.length?t:e.id,s=Nt({targetVar:n});n&&s&&(e.value=s.join(", "))},Uv=["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop","focusout"];function Wv(e,t){const n=s=>{const a=s.target;a.value.match(t)!==null?(a.oldValue=a.value,a.oldSelectionStart=a.selectionStart,a.oldSelectionEnd=a.selectionEnd):Object.prototype.hasOwnProperty.call(a,"oldValue")?(a.value=a.oldValue,a.oldSelectionStart!==null&&a.oldSelectionEnd!==null&&a.setSelectionRange(a.oldSelectionStart,a.oldSelectionEnd)):a.value=""};Uv.forEach(s=>{e.addEventListener(s,n)})}const Hv=async e=>{const t=e.getAttribute("data-mask");if(!t)return;const n=Ap[t];if(n)if(n.type==="cleavejs"){const{default:s}=await te(async()=>{const{default:a}=await import("./cleave.chunk-DBIF9Tac.js").then(r=>r.a);return{default:a}},[]);n.options.phone&&await _p(),new s(e,n.options)}else n.pattern&&(e.pattern=n.pattern),Wv(e,n.regExp)},os=e=>{const t=e.closest(".input-box");if(!t||t.classList.contains("floating-label-inline")||e.closest("hey-phone-number"))return;const a=t.classList.contains("has-value")||t.classList.contains("has-focus"),r=t.querySelector(".input-floating-label"),o=Array.from(t.querySelectorAll(".input-prefix")).reduce((c,d)=>c+d.getBoundingClientRect().width,0);a?r==null||r.setAttribute("style",`left: -${o}px`):r==null||r.setAttribute("style","")},qv=e=>{const t=e.closest(".input-box");if(!t||!t.classList.contains("with-floating-label"))return;const s=t.querySelector(".input-floating-label");s==null||s.addEventListener("click",()=>{e.focus()})},Ii=(e,t)=>{e.target.value.length>0?t.classList.add("has-value"):t.classList.remove("has-value")},zv=async e=>{if(Ve(e))return;Ov(e);const t=xi(e);e.addEventListener("keydown",()=>{e.classList.contains("phone-input")||t()}),e.addEventListener("blur",()=>{e.dataset.blockType!=="date-picker"&&K({message:"Input blurred",blockID:e.id,data:{hasData:!!e.value,isEmptyString:!e.value.trim(),isRequired:e.required}}),e.type==="tel"?setTimeout(()=>{Gt(e)},100):Gt(e)});const n=Ei(e);e.addEventListener("change",n),e.addEventListener("change",()=>{os(e)}),await Hv(e),qv(e);const s=e.closest(".input-box");if(!s)return;e.addEventListener("input",r=>{Ii(r,s)});const a=e.hasAttribute("data-trim");e.addEventListener("blur",()=>{a&&(e.value=e.value.trim()),s.classList.remove("has-focus"),os(e)}),e.addEventListener("focus",()=>{s.classList.add("has-focus"),os(e)}),e.value.length>0&&s.classList.add("has-value")},Kv=e=>{Array.from(e.getElementsByTagName("input")).some(t=>{const n=t.type,s=!!t.autofocus,a=t.classList.contains("multiple-choice-option-input");if(s&&n!=="radio"&&n!=="checkbox"&&!a)return t.focus(),!0})},Gv=e=>{e.type==="radio"||e.type==="checkbox"?e.checked=!1:e.type==="file"||(e.value="")},Hn=(e,t)=>{e.dataset.status=t},Ks=async(e,t)=>{var s;const n=(s=e.heyflowOnValidate)!=null?s:e.heyflowonvalidate;return n?Xr(n,{setStatus:a=>Hn(t,a)},e.value):!0},Yv=["Arial","Verdana","Helvetica","Tahoma","Times New Roman","Georgia","Courier New"],Jv=["@font-family","@font-family-secondary"],Zv=(e,t)=>{const n=document.createElement("link");t&&(n.id=t),n.rel="stylesheet",n.type="text/css",n.href=e,n.media="all";const s=Ue("head");s==null||s.appendChild(n)},Ci=(e,t,n)=>{new Set(Yv).has(e)||n!=null&&n.includes(e)||Jv.includes(e)||Zv("https://fonts.heyflow.cloud/css?family="+e.replace(" ","+"),t)},Xv=(e,t)=>{const n=(s,a)=>s==="font-family"||s==="font-family-secondary"?`"${a}"`:a;e=Object.keys(e).reduce((s,a)=>E(v({},s),{[a]:n(a,e[a])}),{}),window.lessVars=v(v({},window.lessVars),e),Object.keys(window.lessVars).forEach(s=>{var a;(a=window.lessVars[s])!=null&&a.length||delete window.lessVars[s]}),window.less.modifyVars(window.lessVars).then(()=>{ke({event:"lessVarsModified"}),t==null||t()}).catch(s=>{throw s})},Pn=()=>{setTimeout(function(){Qt(x().runtime.currentScreen)},0)},Re=({hasError:e,element:t,visualTargetElement:n,disableVisuals:s})=>n?(n.classList.add("validated"),e?(s||n.classList.remove("error"),t.setAttribute("data-has-error","true"),setTimeout(function(){n.classList.add("error"),Pn()},0),!1):(t.removeAttribute("data-has-error"),n.classList.remove("error"),Pn(),!0)):!1,Es=()=>{const e=x();e.constants.API_ENDPOINT||console.error("API_ENDPOINT is undefined.");const t=`${e.constants.API_ENDPOINT}/v1/upload`,n=`${t}/request`,s=`${t}/complete`;return{UPLOAD_ENDPOINT:t,REQUEST_UPLOAD_URL:n,COMPLETE_UPLOAD_URL:s}};async function Qv(e,t){const n=await new Promise((f,g)=>{const b=new Image;b.onload=()=>f(b),b.onerror=S=>g(S),b.src=e}),{width:s,height:a}=n,r=document.createElement("canvas");r.width=s,r.height=a;const i=r.getContext("2d");if(!i)throw new Error("Couldn't get canvas 2d context");i.drawImage(n,0,0);const{data:o}=i.getImageData(0,0,s,a);let c=s,d=-1,u=a,m=-1;for(let f=0;f<a;f++)for(let g=0;g<s;g++)o[4*(f*s+g)+3]>0&&(c=Math.min(c,g),d=Math.max(d,g),u=Math.min(u,f),m=Math.max(m,f));if(c>=d||u>=m)return e;const h=document.createElement("canvas");h.width=d-c+1+2*t,h.height=m-u+1+2*t;const p=h.getContext("2d");if(!p)throw new Error("Couldn't get canvas 2d context");return p.drawImage(r,-c+t,-u+t),h.toDataURL()}const ey=navigator.language.split("-")[0].toLowerCase();function jt(e,t){return ey==="de"?t:e}const Pt={undo:jt("Undo","Rckgngig"),redo:jt("Redo","Wiederherstellen"),clear:jt("Clear","Klar"),close:jt("Close","Schlieen"),save:jt("Save","Speichern")},ty="https://libs.heyflow.cloud/signature-pad-4.0.6.umd.js",ny="Caveat",sy=e=>{for(const t of e.getElementsByClassName("signature-block"))ay(t)};function ay(e){var p,f;if(Ve(e))return;const t=e.id,n=!!e.getAttribute("data-required"),s=(p=e.getAttribute("data-label"))!=null?p:t,a=(f=e.getAttribute("data-yes-answer"))!=null?f:"Signed",r=e.getAttribute("data-no-answer"),i=e.querySelector(".signature-block-content");if(!i){console.error("No .signature-block-content found inside signature block");return}i.innerHTML="";const o=document.createElement("input");o.classList.add("signed-input"),o.id="signed-"+t,o.setAttribute("name",t+"-signed"),o.setAttribute("data-type","input"),r&&(o.value=r,o.setAttribute("data-no-answer",r)),n&&o.setAttribute("data-required","true"),o.hidden=!0,o.setAttribute("data-yes-answer",a),o.setAttribute("data-label",s),i.appendChild(o);const c=document.createElement("div");c.classList.add("signature-button-sign");const d=e.getAttribute("data-text");c.innerText=d!=null&&d.length?d:"Sign here",i.appendChild(c);const u=document.createElement("div");u.classList.add("signature-preview-image-wrapper"),i.appendChild(u);const m=document.createElement("img");m.classList.add("signature-preview-image"),u.appendChild(m);const h=document.createElement("input");h.type="hidden",h.name=t+"-signature",h.id=t+"-signature",h.hidden=!0,h.setAttribute("name",t+"-signature-file"),h.setAttribute("data-type","file"),h.setAttribute("data-label",s+" - Signature"),n&&h.setAttribute("data-required","true"),i.appendChild(h),i.onclick=()=>{ry(i,h,o,m)},document.getElementById("signature-font-import")||Ci(ny,"signature-font-import")}function ry(e,t,n,s){var V;const a=document.createElement("div");a.classList.add("signature-overlay");const r=_e();r?r.appendChild(a):document.body.appendChild(a),setTimeout(()=>a.classList.add("show"));const i=document.createElement("div");i.classList.add("signature-popup"),a.appendChild(i);const o=document.createElement("div");o.classList.add("signature-toolbar","signature-toolbar-top"),i.appendChild(o);const c=document.createElement("div");c.classList.add("signature-canvas-wrapper"),i.appendChild(c);const d=document.createElement("canvas");c.appendChild(d);let u;if(!document.getElementById("signature-library-script")){const M=document.createElement("script");M.id="signature-library-script",M.src=ty,document.body.appendChild(M)}function m(){if(typeof SignaturePad=="undefined"){setTimeout(m,100);return}u=new SignaturePad(d);const M=e.getAttribute("data-signature-data");if(M)try{u.fromData(JSON.parse(M))}catch(_){console.log("ERROR parsing signature JSON",_)}b=JSON.parse(JSON.stringify(u.toData())),u.addEventListener("endStroke",w)}setTimeout(m,0);function h(){a.classList.remove("show"),setTimeout(()=>{a.remove()},300),window.removeEventListener("resize",close)}a.addEventListener("click",h),i.addEventListener("click",M=>M.stopPropagation()),window.addEventListener("resize",h),a.tabIndex=-1,a.focus(),a.addEventListener("keydown",M=>{M.key==="Escape"&&(M.stopPropagation(),M.preventDefault(),h()),M.key==="Enter"&&(M.stopPropagation(),M.preventDefault(),p())});async function p(){if(!u)return h();try{const M=await Qv(u.toDataURL(),20),N=await(await fetch(M)).arrayBuffer(),$=new File([N],"signature.png",{type:"image/png"}),W=await oy($),ee=u.toData();if(ee.length>0){const A=n.getAttribute("data-yes-answer");n.value=A!=null?A:"true",n.setAttribute("data-signed","true"),n.setAttribute("error","false"),e.classList.remove("error"),t.value=W,s.src=M}else{const A=n.getAttribute("data-no-answer");n.value=A!=null?A:"false",n.removeAttribute("data-signed"),t.removeAttribute("value"),t.removeAttribute("data-answer"),s.removeAttribute("src")}e.setAttribute("data-signature-data",JSON.stringify(ee))}catch(M){console.error("ERROR while saving signature",M)}h()}function f(){u==null||u.clear(),w()}const g=[];let b=null,S=[];function w(){u&&(S=[],g.push(b),b=JSON.parse(JSON.stringify(u.toData())))}function k(){u&&(g.length<1||(S=[b,...S],b=g[g.length-1],g.length=g.length-1,u.fromData(b)))}function C(){u&&(S.length<1||(g.push(b),b=S[0],S=S.slice(1),u.fromData(b)))}Bt(o,"close",Pt.close,h),Bt(o,"delete",Pt.clear,f),Oa(o),Bt(o,"undo",Pt.undo,k),Bt(o,"redo",Pt.redo,C),Oa(o),Bt(o,"check",Pt.save,p);const T=Math.max(window.devicePixelRatio||1,1);d.width=c.offsetWidth*T,d.height=c.offsetHeight*T,d.style.width=c.offsetWidth+"px",d.style.height=c.offsetHeight+"px",(V=d.getContext("2d"))==null||V.scale(T,T)}const iy={undo:"arrow-arc-left",redo:"arrow-arc-right",check:"check",delete:"trash",close:"x"};async function Bt(e,t,n,s){const a=x(),r=document.createElement("span");r.classList.add("icon"),e.appendChild(r),r.addEventListener("click",s),r.title=n;const{data:i}=await de.get(`${a.constants.STATIC_URL}/blocks/signature/${iy[t]}.svg`);r.innerHTML=i}function Oa(e){const t=document.createElement("span");t.style.flexGrow="1",e.appendChild(t)}async function oy(e){const t=x(),n={flowID:t.constants.FLOW_ID,name:e.name,size:e.size,acceptedTypes:e.type},{REQUEST_UPLOAD_URL:s,COMPLETE_UPLOAD_URL:a}=Es(),r=await de.post(s,n),{url:i,filename:o}=r.data;await de.put(i,e,{headers:{"Content-Type":e.type}});const c={filename:o,flowID:t.constants.FLOW_ID,originalFilename:e.name,fileSize:e.size};return(await de.post(a,c)).data.id}const ly=e=>{let t=!1;for(const n of e)n.hasAttribute("data-required")&&(n.getAttribute("data-signed")||(Re({hasError:!0,element:n,visualTargetElement:n.parentElement}),t=!0));return t},cy=async e=>{await me({section:e,blockType:"signature",selector:".signature-block"})},dy=async e=>{let t=!1;for(const n of Object.values(Se.getBlocksForSection("signature",e)))(await n.validate()).success||(t=!0);return t},uy=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?cy:sy,my=async(e,t)=>x().constants.IS_V2_INPUT_BLOCKS_ENABLED?await dy(t):ly(e);async function Li({flowId:e,file:t,accept:n,onProgress:s,onError:a}){var i,o,c,d,u,m;const r=de.CancelToken.source();try{const h={flowID:e,name:t.name,size:t.size,acceptedTypes:n},p=await de.post(Es().REQUEST_UPLOAD_URL,h),{url:f,filename:g}=p.data;let b;await de.put(f,t,{cancelToken:r.token,headers:{"Content-Type":t.type},onUploadProgress:k=>{const C=k.event;C&&C.type==="progress"&&(b=s(C,()=>{r.cancel()}))}});const S={filename:g,flowID:e,originalFilename:t.name,fileSize:t.size},w=await de.post(Es().COMPLETE_UPLOAD_URL,S);if(!b)throw new Error("onSuccess was undefined");b(w.data.id)}catch(h){So(h)?a({reason:"aborted"}):((o=(i=h.response)==null?void 0:i.data)==null?void 0:o.code)==="file-too-large"?a({reason:"file-too-large",maxFileSize:(d=(c=h.response.data)==null?void 0:c.payload)!=null?d:10}):((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.code)==="unsupported-media-type"?a({reason:"unsupported-media-type"}):(console.error(h),a({reason:"unknown"}))}}function Ni(e){var a;new FileReader().readAsDataURL(e);const n=new Blob([e],{type:e.type}),s=window.URL.createObjectURL(n);if(navigator.appVersion.toString().indexOf(".NET")>0)try{window.navigator.msSaveOrOpenBlob(n,e.name)}catch(r){console.error(r,"Error downloading. Please try a different browser")}else{const r=document.createElement("a");r.href=s,r.download=e.name,(a=Ue("body"))==null||a.appendChild(r),r.click(),r.remove()}}const Fa="_file";var ut;class Ua{constructor(t,n,s){U(this,"upload");U(this,"cancelTokenSource");U(this,"file");U(this,"id");U(this,"name");U(this,"element");U(this,"sensitive");oa(this,ut);U(this,"label");U(this,"indicator");U(this,"percentageDisplay");U(this,"progress");U(this,"status");U(this,"labelHiddenInput",null);U(this,"valueHiddenInput",null);this.upload=n,this.cancelTokenSource=s,this.upload.counter++,this.element=null,this.indicator=null,this.percentageDisplay=null,this.progress=0,this.status="idle",this.file=t,this.id=this.upload.id+"-file-"+Un(),this.sensitive=this.upload.sensitive,Qn(this,ut,this.upload.counter),this.name=this.getIndexedUploadName(Xn(this,ut)),this.label=this.getIndexedUploadLabel(Xn(this,ut)),this.getFileType(),this.render()}getIndexedUploadName(t){return this.upload.id+"-file-"+t}getIndexedUploadLabel(t){return this.upload.label+"-"+t}changeFileIndex(t){Qn(this,ut,t),this.name=this.getIndexedUploadName(t),this.label=this.getIndexedUploadLabel(t),this.labelHiddenInput&&this.setInputIndexableAttributes(this.labelHiddenInput),this.valueHiddenInput&&this.setInputIndexableAttributes(this.valueHiddenInput,Fa)}setInputIndexableAttributes(t,n=""){t.name=this.name+n,t.id=this.name+n,t.setAttribute("data-label",this.label+n)}appendLabelHiddenInput(){var n;const t=document.createElement("input");this.setInputIndexableAttributes(t),t.type="hidden",t.value=this.file.name,t.hidden=!0,t.setAttribute("data-answer",this.file.name),t.setAttribute("data-type","input"),t.setAttribute("data-restore-mime-type",this.file.type),t.setAttribute("data-restore-size",this.file.size.toString()),this.sensitive&&(t.setAttribute("data-sensitive","true"),t.setAttribute("data-tf-sensitive","true")),this.labelHiddenInput=t,(n=this.element)==null||n.append(this.labelHiddenInput)}removeHiddenInput(){var t,n;(t=this.labelHiddenInput)==null||t.remove(),(n=this.valueHiddenInput)==null||n.remove()}success(t){var s;this.setStatus("success");const n=document.createElement("input");this.setInputIndexableAttributes(n,Fa),n.type="hidden",n.value=t,n.hidden=!0,n.setAttribute("data-answer",t),n.setAttribute("data-type","file"),this.valueHiddenInput=n,(s=this.element)==null||s.append(n)}render(){const t=document.createElement("div");t.classList.add("upload-element");const n=document.createElement("img");n.alt=this.file.type,n.src=Vp+"/filetypes/"+this.getFileType()+".svg",t.append(n);const s=document.createElement("div");s.classList.add("upload-element-inner");const a=document.createElement("div");a.classList.add("upload-element-content");const r=document.createElement("div");r.classList.add("upload-element-filename"),r.innerHTML=this.file.name,a.append(r);const i=document.createElement("div");i.addEventListener("click",this.remove.bind(this)),["upload-element-action","upload-element-action-remove"].forEach(function(p){i.classList.add(p)});const o='<i class="material-icons" icon="close">close</i><div class="tooltip left">Remove</div>';if(i.innerHTML+=o,a.append(i),this.file instanceof File){const p=document.createElement("div");p.addEventListener("click",this.download.bind(this)),["upload-element-action","upload-element-action-download"].forEach(function(g){p.classList.add(g)});const f='<i class="material-icons" icon="arrow_downward">arrow_downward</i><div class="tooltip left">Download</div>';p.innerHTML+=f,a.append(p)}const c=document.createElement("div");c.addEventListener("click",this.cancel.bind(this)),c.classList.add("upload-element-action","upload-element-action-cancel");const d='<i class="material-icons" icon="close">close</i><div class="tooltip left">Cancel</div>';c.innerHTML+=d,a.append(c),s.append(a);const u=document.createElement("div");u.classList.add("upload-element-progress");const m=document.createElement("div");m.classList.add("upload-element-progress-bar"),u.append(m),s.append(u);const h=document.createElement("div");h.classList.add("upload-element-percentage-display"),h.innerHTML="Preparing",s.append(h),t.append(s),this.element=t,this.indicator=m,this.percentageDisplay=h,this.appendLabelHiddenInput()}getFileType(){const t={"image/*":"image","video/*":"video","audio/*":"audio","application/pdf":"pdf","application/acrobat":"pdf","application/zip":"zip","application/illustrator":"ai","application/postscript":"ai","application/ms-excel":"excel","application/vnd.ms-excel":"excel","application/vnd.openxmlformats-officedocument.spreadsheetml":"excel","application/msword":"word","application/ms-word":"word","application/vnd.ms-word":"word","application/vnd.openxmlformats-officedocument.wordprocessingml":"word","application/ms-powerpoint":"powerpoint","application/vnd.ms-powerpoint":"powerpoint","application/vnd.openxmlformats-officedocument.presentationml":"powerpoint"},n=Object.keys(t).filter(a=>{const r=new RegExp(a);return this.file.type.match(r)!==null}),s=n[0];return n.length?t[s]:"file"}remove(){var t,n,s;this.upload.onRemoveUploadedFile(this.id),(t=this.element)==null||t.remove(),this.upload.button&&this.upload.limit>((s=(n=this.upload.fileElementsList)==null?void 0:n.childElementCount)!=null?s:0)&&(this.upload.button.style.display="block")}download(){this.file instanceof File&&Ni(this.file)}cancel(){this.cancelTokenSource.cancel()}onProgress(t){this.status==="post"||this.status==="success"||this.setProgress(t.loaded/t.total)}setProgress(t){if(!this.indicator||!this.percentageDisplay)return;this.progress=t,(isNaN(this.progress)||!isFinite(this.progress))&&(this.progress=0),this.progress>.999?this.setStatus("post"):this.setStatus("uploading"),this.indicator.style.width=this.progress*100+"%";const n=fs(this.file.size*this.progress,2),s=fs(this.file.size,2),a=n.value+(s.suffix!==n.suffix?" "+n.suffix:""),r=`${s.value} ${s.suffix}`,i=Math.floor(this.progress*100);this.percentageDisplay.innerHTML=`${a} / ${r}  ${i}%`}setStatus(t,n){var s,a;this.status=t,["upload-waiting","upload-uploading","upload-post","upload-success","upload-error"].forEach(r=>{var i;(i=this.element)==null||i.classList.remove(r)}),(s=this.element)==null||s.classList.add("upload-"+t),t==="error"&&((a=this.percentageDisplay)!=null&&a.innerHTML)&&(this.percentageDisplay.innerHTML=n!=null?n:"Unknown error")}}ut=new WeakMap;const hy=()=>{const e=be(".upload-block");Array.from(e).forEach(t=>{if(Ve(t))return;const n=new py(t);document.dispatchEvent(new CustomEvent("upload-block-initialized",{detail:{id:t.id,uploadInstance:n}}))})},fy=(e,t)=>{if(e==="*"||e===t)return!0;const a=e.match(/(.+)\/\*$/),r=a==null?void 0:a[1];return r?t.match(new RegExp("^"+r))!==null:!1};class py{constructor(t){U(this,"counter");U(this,"element");U(this,"id");U(this,"label");U(this,"fileElementsList");U(this,"filesUploaded");U(this,"button");U(this,"input");U(this,"indicator");U(this,"limit");U(this,"sensitive");U(this,"uploaded");var i,o,c,d,u,m;this.counter=0,this.label="",this.fileElementsList=null,this.filesUploaded=[],this.button=null,this.input=null,this.indicator=null,this.limit=1,this.sensitive=!1,this.uploaded=[],this.element=t,this.id=this.element.id,this.label=(i=this.element.getAttribute("data-label"))!=null?i:"",this.fileElementsList=this.element.getElementsByClassName("upload-elements-list")[0],this.button=this.element.getElementsByClassName("upload-button")[0],this.input=this.element.querySelector('input[type="file"]'),this.indicator=this.element.getElementsByClassName("upload-progress-indicator")[0];const n=(o=this.input)==null?void 0:o.getAttribute("data-minimum"),s=(c=this.input)==null?void 0:c.getAttribute("data-maximum"),a=Number(n)||1,r=Number(s)||1;this.limit=Math.max(1,a,r),this.sensitive=(u=(d=this.input)==null?void 0:d.hasAttribute("data-sensitive"))!=null?u:!1,this.uploaded=[],this.initButton(),(m=this.input)==null||m.addEventListener("change",this.onChange.bind(this))}initButton(){var n,s,a,r,i,o;(n=this.button)==null||n.addEventListener("click",()=>{var c;(c=this.input)==null||c.click()}),["dragenter","dragover","dragleave","drop"].forEach(c=>{var d;(d=this.input)==null||d.addEventListener(c,t,!1)});function t(c){c.preventDefault(),c.stopPropagation()}["dragenter","dragover"].forEach(c=>{var d;(d=this.button)==null||d.addEventListener(c,()=>{var u;(u=this.button)==null||u.classList.add("highlight")},!1)}),["dragleave","drop"].forEach(c=>{var d;(d=this.button)==null||d.addEventListener(c,()=>{var u;(u=this.button)==null||u.classList.remove("highlight")},!1)}),(s=this.input)==null||s.addEventListener("dragstart",function(c){c.dataTransfer&&(c.dataTransfer.effectAllowed="move")},!1),(a=this.button)==null||a.addEventListener("dragenter",()=>{var c;(c=this.button)==null||c.classList.add("canDrop")},!1),(r=this.button)==null||r.addEventListener("dragleave",()=>{var c;(c=this.button)==null||c.classList.remove("canDrop")},!1),(i=this.button)==null||i.addEventListener("dragover",function(c){c.dataTransfer&&(c.dataTransfer.dropEffect="copy")}.bind(this),!1),(o=this.button)==null||o.addEventListener("drop",async c=>{var f,g;const d=c.dataTransfer,u=d==null?void 0:d.files;if(!u)return;const m=(f=this.input)==null?void 0:f.accept.split(","),h=(g=u==null?void 0:u[0])==null?void 0:g.type;m!=null&&m.map(b=>b.trim()).some(b=>fy(b,h))&&await this.uploadMany(u)},!1)}async onChange(){var t;await this.uploadMany((t=this.input)==null?void 0:t.files)}async uploadMany(t){t!=null&&t.length&&await Promise.all([...t].map(async n=>this.upload(n)))}async upload(t){var o,c,d;if(!this.input||(this.input.value="",this.getIsLimitReached()))return;const n=new FormData,a=x().constants.FLOW_ID;n.append("flowID",a),n.append("file",t);const r=de.CancelToken.source(),i=new Ua(t,this,r);i.element&&((o=this.fileElementsList)==null||o.append(i.element),this.filesUploaded.push(i),i.setStatus("waiting"),this.adaptUploadButtonToLimit(),await Li({flowId:a,file:t,accept:(d=(c=this.input)==null?void 0:c.accept)!=null?d:"",onProgress:u=>(i.onProgress(u),m=>{i.setProgress(1),i.success(m),this.input&&Bi(this.input,!0)}),onError:u=>{if(u.reason==="aborted"){i.remove();return}else if(u.reason==="file-too-large"){const{value:m,suffix:h}=fs(u.maxFileSize,2);i.setStatus("error",`File is too large (max. ${m} ${h})`),i.removeHiddenInput();return}else if(u.reason==="unsupported-media-type"){i.setStatus("error",`Unsupported file type ${t.type}`),i.removeHiddenInput();return}i.removeHiddenInput(),i.setStatus("error")}}))}restore(t){var a;if(!this.input||(this.input.value="",this.getIsLimitReached()))return;const n=de.CancelToken.source(),s=new Ua(t,this,n);s.element&&((a=this.fileElementsList)==null||a.append(s.element),this.filesUploaded.push(s),s.setStatus("waiting"),this.adaptUploadButtonToLimit(),s.setProgress(1),s.success(t.ref))}onRemoveUploadedFile(t){this.filesUploaded=this.filesUploaded.filter(n=>n.id!=t),this.counter=0;for(const n of this.filesUploaded)this.counter++,n.changeFileIndex(this.counter)}adaptUploadButtonToLimit(){if(this.getIsLimitReached()){if(!this.button)return;this.button.style.display="none"}}getIsLimitReached(){var t,n;return this.limit<=((n=(t=this.fileElementsList)==null?void 0:t.childElementCount)!=null?n:0)}}let kn=null;function gy(){function e(){return[...be(".upload-uploading, .upload-waiting, .upload-post")]}kn&&clearInterval(kn),kn=setTimeout(()=>{kn=null;for(const t of e())t.classList.remove("shake-shake-shake")},1e3);for(const t of e())t.classList.add("shake-shake-shake");return!!e().length}const vy=async e=>{await me({section:e,blockType:"upload",selector:".upload-block"})},yy=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?vy:hy,by=e=>{const t=F(`#${e}`);if(!t)return;const n=t.querySelectorAll('[data-initial-required="true"]');n.length&&n.forEach(s=>{s.removeAttribute("required"),s.removeAttribute("data-required");const a=s.closest(".input");a&&a.classList.remove("error")})},_i=(e,t)=>{const n=Array.from(e.querySelectorAll('[data-async="true"]:not([data-exclude-async-validation])'));return Me(n)},Ai=e=>{const t=F(`#${e}`);if(!t)return;const{textInputs:n,phoneInputs:s}=ta(t,!0);return!!_i(t).length||[...n,...s].some(r=>{var i,o;return((o=(i=r.heyflowOnValidate)!=null?i:r.heyflowonvalidate)==null?void 0:o.constructor.name)==="AsyncFunction"})},Ti=async(e=!0)=>{const t=e?Z.history:Z.history.slice(0,-1),n=be("section"),a=Array.from(n).filter(d=>{var u;return t.includes((u=d.getAttribute("name"))!=null?u:"")}).map(d=>d.id),r=await Promise.all(a.map(async d=>Kt(d,void 0,!1,!0))),i=d=>!d.hasValue&&(d.required||d.dataRequired),o=[],c=[];return r.forEach(d=>{var m,h;d.isValid||o.push(E(v({},d),{inputs:(m=d.inputs)==null?void 0:m.filter(p=>p.dataHasError)}));const u=(h=d.inputs)==null?void 0:h.filter(i);u!=null&&u.length&&c.push(E(v({},d),{inputs:u}))}),{invalidScreens:o,screensWithMissingFields:c}};async function En(e,t){let n=!0;for(const s of Object.values(Se.getBlocksForSection(e,t)))(await s.validate()).success||(n=!1);return!n}const Kt=async(e,t,n=!0,s)=>{var W;const a=F(`#${e}`);if(!a)return console.warn("Screen element is undefined"),{screenId:e,isValid:!1};const r=x(),i=a.id,o=(W=a.getAttribute("name"))!=null?W:void 0,c=ta(a,n,s),d=_i(a),u=Ai(e);u&&De(t,"loading");const m=ky(c.selects),h=Ly(c.textInputs),p=Ny(c.addressInputs),f=xy(c.checkboxes,a),g=Ey(c.fileInputs),b=my(c.signatures,i),S=Ay(c.datePickers),w=gy(),k=wy(d);let C=Promise.resolve(!1),T=Promise.resolve(!1),V=Promise.resolve(!1),M=Promise.resolve(!1),_=Promise.resolve(!1);if(r.constants.IS_V2_COMPLEX_BLOCKS_ENABLED&&i?C=En("phone",i):C=_y(c.phoneInputs),r.constants.IS_V2_INPUT_BLOCKS_ENABLED&&i?(T=En("textarea",i),V=En("upload",i),M=En("multipleChoice",i)):(T=Promise.resolve(Sy(c.textareas)),_=Promise.resolve(Iy(c.radios,a))),(await Promise.all([T,m,h,p,f,_,g,b,S,C,w,k,V,M])).some(ee=>ee)){Pn(),u&&De(t,"error");const ee=vw(c);return{screenId:e,screenName:o,inputs:ee,isValid:!1}}return u&&De(t,"success"),{screenId:e,screenName:o,isValid:!0}},Ri=async e=>new Promise(t=>{var s;const n=(s=e.dataset.status)!=null?s:"idle";if(["success","idle"].includes(n))return t(!0);if(["error","invalid"].includes(n))return t(!1);setTimeout(async()=>{t(await Ri(e))},100)}),wy=async e=>(await Promise.all(e.map(Ri))).some(n=>!n),Sy=e=>e.map(n=>!xs(n)).some(n=>n),xs=e=>{var o;const t=e.hasAttribute("required"),s=e.value.trim().length===0;if(!t)return!0;const a=(o=e.closest(".textarea"))!=null?o:e.parentElement;if(!a)return console.warn("Cannot validate Textarea: parent element is undefined."),!1;const r=t&&s,i=Zt()===e;return Re({hasError:r,element:e,visualTargetElement:a,disableVisuals:i}),!r},ky=e=>e.map(n=>!$i(n)).some(n=>n),$i=e=>{const t=e.required,n=e.value.length>0,s=t&&!n;return Re({hasError:s,element:e,visualTargetElement:e.closest(".select")}),!s},Ey=e=>e.map(n=>!Bi(n)).some(n=>n),xy=(e,t)=>e.map(s=>{var a;return["simple-checkbox","simple-checkbox-v2"].includes((a=s.getAttribute("data-type"))!=null?a:"")?!Cy(s):!ji(s,t)}).some(s=>s),Iy=(e,t)=>e.map(s=>!ji(s,t)).some(s=>s),Cy=e=>{var i;if(!["simple-checkbox","simple-checkbox-v2"].includes((i=e.getAttribute("data-type"))!=null?i:""))return console.warn("Cannot validate checkbox: is not simple checkbox."),!1;const n=e.required,s=e.checked,a=n&&!s,r=e.closest(".simple-checkbox");return r?(Re({hasError:a,element:e,visualTargetElement:r}),!a):(console.warn("Cannot validate simple checkbox: no parent element"),!1)},ji=(e,t)=>{const n=e.required,s=Array.from(t.getElementsByTagName("input")).filter(d=>d.name===e.name),a=Array.from(s).some(d=>d.checked),r=e.getAttribute("data-relatedtext"),i=e.getAttribute("data-iscustom")&&e.checked;let o=n&&!a;if(i){const d=t.querySelector(`[data-related-element=${e.id}]`);o=!r,d&&Re({hasError:o,element:e,visualTargetElement:d})}const c=pr(e,"multiple-choice-block");if(c!==null&&c.getAttribute("data-multiselect")!==null){const u=c.getAttribute("data-minimum-selections"),m=c.getAttribute("data-maximum-selections"),h=Array.from(s).map(p=>p.checked?1:0).reduce((p,f)=>p+f,0);if(u){const p=parseInt(u);h<p&&(o=!0)}if(m){const p=parseInt(m);h>p&&(o=!0)}}return o&&s.forEach(d=>{var m;const u=(m=d.parentElement)==null?void 0:m.parentElement;if(!u)return console.warn("Cannot validate input group: no parent element"),o;Re({hasError:o,element:d,visualTargetElement:u})}),!o},Gt=async e=>{var m;const t=e.required,n=e.value.trim(),s=e.getAttribute("pattern"),a=s?new RegExp(s):void 0,r=a==null?void 0:a.test(n),i=!!(n.length&&s&&!r),o=!!t&&!n.length,c=(m=e.closest(".input"))!=null?m:e.parentElement,d=!!(c!=null&&c.classList.contains("invalid"));if(!c)return console.warn("Cannot validate text input: no parent element"),!1;const u=Zt()===e;try{const h=await Ks(e,c),p=o||i||d||!h;return Re({hasError:p,element:e,visualTargetElement:c,disableVisuals:u}),!p}catch(h){return console.error(h),Hn(c,"error"),Re({hasError:!0,element:e,visualTargetElement:c,disableVisuals:u}),!1}},Ly=async e=>(await Promise.all(e.map(Gt))).some(n=>!n),Gs=async e=>{var w;const t=e.required,n=e.hasAttribute("data-full-address-required"),s=e.hasAttribute("data-autocomplete"),a=e.value.trim(),r=e.getAttribute("pattern"),i=r?new RegExp(r):void 0,o=i==null?void 0:i.test(a),c=!!(a.length&&r&&!o),d=!!t&&!a.length,u=(w=e.closest(".input"))!=null?w:e.parentElement,m=!!(u!=null&&u.classList.contains("invalid"));if(!u)return console.warn("Cannot validate address input: no parent element"),!1;const h=Zt()===e,p=e.closest(".address-block"),g=p==null?void 0:p.querySelector(`#${e.id}-house`);if(!g)return console.warn("Cannot validate address input: no address block or house number element"),!1;const b=(g==null?void 0:g.value.length)>0,S=s&&n&&a.length!==0&&!b;try{const k=await Ks(e,u),C=d||c||m||!k||S;return Re({hasError:C,element:e,visualTargetElement:u,disableVisuals:h}),!C}catch(k){return console.error(k),Hn(u,"error"),Re({hasError:!0,element:e,visualTargetElement:u,disableVisuals:h}),!1}},Ny=async e=>(await Promise.all(e.map(Gs))).some(n=>!n),Pi=async e=>{var i;const n=!!e.required&&e.dataset.isEmpty==="true",s=(i=e.closest(".input"))!=null?i:e.parentElement,a=!!(s!=null&&s.classList.contains("invalid"));if(!s)return console.warn("Cannot validate text input: no parent element"),!1;const r=Zt()===e;try{const o=await Ks(e,s),c=n||a||!o;return Re({hasError:c,element:e,visualTargetElement:s,disableVisuals:r}),!c}catch(o){return console.error(o),Hn(s,"error"),Re({hasError:!0,element:e,visualTargetElement:s,disableVisuals:r}),!1}},_y=async e=>(await Promise.all(e.map(Pi))).some(n=>!n),Bi=(e,t)=>{var h,p,f;const n=e.hasAttribute("required"),s=e.getAttribute("data-minimum"),a=Number(s&&parseInt(s))||1,r=(h=e.parentElement)==null?void 0:h.getElementsByTagName("input"),i=new RegExp(`^${e.name}-file-\\w*_file$`),o=(p=r&&Array.from(r).filter(g=>g.name.match(i)))!=null?p:[],c=!o||o.length===0,d=c||a>o.length,u=n&&(c||d),m=(f=e.parentElement)==null?void 0:f.parentElement;return m?(Re({hasError:u,element:e,visualTargetElement:m,disableVisuals:t}),!u):(console.warn("Cannot validate file input: No parent element"),!1)};function Ys(e){const t=e.hasAttribute("data-required"),n=e.value.length>0,s=t&&!n;return Re({hasError:s,element:e,visualTargetElement:e.closest(".input")}),s}const Ay=e=>{let t=!1;for(const n of e)Ys(n)&&!t&&(t=!0);return t},Ty=e=>Ye(async()=>{var a,r;const t=(a=e.parentElement)==null?void 0:a.classList.contains("validated"),s=(r=x().runtime.currentScreen)==null?void 0:r.classList.contains("navigated");(t||s)&&await Gs(e)},250),Mi=()=>x().constants.GOOGLE_MAPS_PLACES_API_KEY,Ry=async(e,t)=>{var n,s,a;return await de.post("https://places.googleapis.com/v1/places:autocomplete",{input:e.value,languageCode:(n=e.getAttribute("data-autocomplete-language"))!=null?n:"en",includedRegionCodes:(a=(s=e.getAttribute("data-allowed-countries"))==null?void 0:s.split(","))!=null?a:void 0},{headers:{"Content-Type":"application/json","X-Goog-Api-Key":t}})},$y=async(e,t)=>{const{data:n}=await de.get(`https://places.googleapis.com/v1/places/${e}`,{headers:{"Content-Type":"application/json","X-Goog-Api-Key":t,"X-Goog-FieldMask":"location,types,addressComponents"}});return n},Js="address-component",Di="latitude",Vi="longitude",Oi={country:"country",state:"administrative_area_level_1",city:"locality",zip:"postal_code",street:"route",house:"street_number",state_code:"administrative_area_level_1"},jy=(e,t)=>{var s,a;const n=e.find(r=>r.types.includes(Oi[t]));return t==="state_code"?(s=n==null?void 0:n.shortText)!=null?s:"":(a=n==null?void 0:n.longText)!=null?a:""},Py=(e,t,n)=>{be(`.${n.id}-${Js}`).forEach(a=>{switch(a.id){case`${n.id}-${Di}`:a.value=e.lat.toString();break;case`${n.id}-${Vi}`:a.value=e.lng.toString();break;default:a.value=jy(t,a.id.replace(`${n.id}-`,""))}})},By=(e,t)=>{[...Object.keys(Oi),Di,Vi].forEach(s=>{const a=document.createElement("input");a.type="hidden",a.setAttribute("data-type","input"),a.classList.add(`${t.id}-${Js}`),a.id=`${t.id}-${s}`,a.name=`${t.id}-${s}`,a.setAttribute("data-label",`${t.getAttribute("data-label")||t.name} [${s}]`),a.setAttribute("data-variable",`${t.getAttribute("data-variable")||t.name}_${s}`),t.hasAttribute("data-sensitive")&&(a.setAttribute("data-sensitive","true"),a.setAttribute("data-tf-sensitive","true")),e.appendChild(a)})},My=e=>{be(`.${e.id}-${Js}`).forEach(n=>{n.value=""})},Fi=async e=>{const n=`https://maps.googleapis.com/maps/api/js?${new URLSearchParams({v:"weekly",key:e,libraries:"maps,marker",callback:"onGoogleMapsScriptLoaded",loading:"async"}).toString()}`;await _t(n,(s,a)=>{window.onGoogleMapsScriptLoaded=()=>{a()}})};function Wa(e){return e.includes("building")||e.includes("establishment")?18:e.includes("premise")?17:e.includes("street_address")?16:e.includes("route")?15:e.includes("postal_code")||e.includes("neighborhood")?14:e.includes("sublocality")?13:e.includes("locality")?11:e.includes("administrative_area_level_2")?9:e.includes("administrative_area_level_1")?7:e.includes("country")?4:16}const Dy=async(e,t,n,s,a,r)=>{await Fi(r);const i=t.getAttribute("data-map-type");let o=e._googleMapInstance,c=e._googleMapMarker;!o||!c?(o=new google.maps.Map(n,{zoom:Wa(a),center:s,mapId:`Map-${e.id}`,mapTypeId:i,disableDefaultUI:!0,keyboardShortcuts:!1,gestureHandling:"none"}),c=new google.maps.marker.AdvancedMarkerElement({map:o,position:s}),e._googleMapInstance=o,e._googleMapMarker=c):(o.setCenter(s),o.setZoom(Wa(a)),c.position=s),n==null||n.classList.add("address-input-map--show")},Vy=300,Oy=(e,t)=>{if(!e.hasAttribute("data-autocomplete"))return;const n=e.hasAttribute("data-show-map"),s=t.querySelector(".address-input-map"),a=F(`#${e.id}-autocomplete-list`);if(!a||!s){console.warn("Autocomplete container or map element not found");return}const r=Mi();Vn({input:e,fetch:async(d,u)=>{try{if(!e.value.length)return;const{data:m}=await Ry(e,r);if(!m.suggestions)return;const h=m.suggestions.map(({placePrediction:p})=>({label:p.text.text,value:p.placeId}));u(h)}catch(m){throw Ce()&&ke({event:"preview.googlePlacesAPIBlocked"}),console.error("Error while getting autocomplete succestions from Google Places API: ",m),new Error(m)}},onSelect:async(d,u)=>{const m=d.value;u.value=d.label;try{const{location:h,types:p,addressComponents:f}=await $y(m,r),g={lat:h.latitude,lng:h.longitude};Py(g,f,e),n&&await Dy(t,e,s,g,p,r)}catch(h){throw console.error("Error while displaying the map: ",h),new Error(h)}},click:d=>d.fetch(),keyup:()=>{My(e),e.value.length||s==null||s.classList.remove("address-input-map--show")},className:`autocomplete-list ${!n&&"powered-by-google"}`,debounceWaitMs:Vy,disableAutoSelect:!0,container:a,customize:(d,u,m,h)=>{m.style.top="",m.style.left="",m.style.visibility="initial"}})},Fy=e=>{if(Ve(e))return;const t=Ty(e);e.addEventListener("keydown",()=>void t());const n=e.closest(".input-box");if(!n)return;By(n,e),e.addEventListener("input",a=>Ii(a,n)),e.addEventListener("blur",()=>Wy(n,e)),e.addEventListener("focus",()=>Uy(n));const s=Mi();s?(Fi(s),Oy(e,n)):console.warn("Google Maps Places API key is missing"),e.value.length>0&&n.classList.add("has-value")},Uy=e=>{e.classList.add("has-focus"),Ui(e)},Wy=(e,t)=>{e.classList.remove("has-focus"),Ui(e),Gs(t)},Ui=e=>{if(e.classList.contains("floating-label-inline"))return;const n=e.classList.contains("has-value")||e.classList.contains("has-focus"),s=e.querySelector(".input-floating-label"),r=Array.from(e.querySelectorAll(".input-prefix")).reduce((i,o)=>i+o.getBoundingClientRect().width,0);n?s==null||s.setAttribute("style",`left: -${r}px`):s==null||s.setAttribute("style","")},Hy=e=>Ye(()=>{rt(e.name),Jt(e)},250),qy=e=>Ye(async()=>{var a,r;const t=(a=e.parentElement)==null?void 0:a.classList.contains("validated"),s=(r=x().runtime.currentScreen)==null?void 0:r.classList.contains("navigated");(t||s)&&await Gt(e)},250),zy=async e=>{await me({section:e,blockType:"address",selector:".address-block",onHydrated:t=>{const n=t.querySelector("input");if(!n)throw new Error("No input in address block defined");const s=qy(n);n.addEventListener("keydown",s);const a=Hy(n);n.addEventListener("change",a)}})},Wi=async(e,t,n,s)=>{var i;const a=x(),r=Tt(s);Zs(r);try{if(!await Ky(e))return;if(!a.constants.FEATURES.disablePreventHeadlessSubmits){const c=a.runtime.currentScreen,d=c.getAttribute("data-footer")==="footer",u=e.closest("footer");if(!d&&u)return;const m=e.closest("header");if(!(c.getAttribute("data-header")==="header")&&m)return;const p=e.closest("section");if(p&&p!==c)return}if(a.constants.IS_RULES_ENABLED&&en.hasBlockingRuleForBlock(e.id,"heyflow-button-click"))return;t==="submit"?((i=a.runtime.currentScreen)==null||i.classList.add("navigated"),K({message:"Submit button clicked"}),await Os(e,r)):await Ge(t,n,e,r)}catch(o){console.error("Error on button click",o),De(e,"error")}},Zs=e=>{var n;if(!(e!=null&&e.tracking)||ft())return;const t=(n=Lt(e.eventName))!=null?n:e.id;je({eventName:"heyflow-button-click",payload:{customEventName:t,customEventLabel:e.label,blockID:e.id}})},Ky=async e=>{var n;const t=(n=e.heyflowOnClick)!=null?n:e.heyflowonclick;return t?Xr(t,{setStatus:s=>De(e,s),syncError:()=>De(e,"error")}):!0},Xs=e=>{Tn(e.getAttribute("data-button-initialized"))||(e.setAttribute("data-button-initialized","true"),e.addEventListener("click",async()=>{const n=e.getAttribute("data-destination"),s=e.getAttribute("data-action"),a=e.getAttribute("data-attr");if(!s||!a){console.log("Error: destination, action or attr is not defined");return}await Wi(e,s,n!=null?n:void 0,a)}))},Gy=e=>{for(const t of e.querySelectorAll('[data-type="generic-button"]'))Xs(t)},Hi=e=>{for(const t of e.querySelectorAll('[data-type="legacy-button"]'))Xs(t)},qn=e=>Object.entries(e).reduce((t,[n,s])=>{var i,o,c,d;if(!s)return t;if(typeof s=="object"&&!("id"in s))return E(v({},t),{[n]:qn(s)});const{id:a}=s,r=(d=(c=(i=F(`#${a}`))==null?void 0:i.value)!=null?c:(o=F(`#${a}`))==null?void 0:o.dataset.value)!=null?d:"";return E(v({},t),{[n]:r})},{}),Yy=(e,t)=>{e.data.event==="calendly.event_scheduled"&&t()},Jy=(e,t)=>{e&&window.addEventListener("message",n=>{Yy(n,t)})},Zy=()=>{const e=window.location.search,t=new URLSearchParams(e);return["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].reduce((a,r)=>{const i=t.get(r);return i?E(v({},a),{[r]:i}):a},{})},Xy="https://assets.calendly.com/assets/external/widget.js",Qy=!!window.Calendly,Ha="https://calendly.com/",eb=e=>e.includes(Ha)?e:`${Ha}${e}`,tb=async e=>{var f;if(Ve(e))return;if(!Qy)try{await _t(Xy)}catch(g){console.error("error while injecting calendly script",g);return}if(e.querySelector("iframe")!==null)return;const{Calendly:t}=window,n=e.getAttribute("data-calendly"),{calendarName:s="",triggerRouting:a=!1,prefillMapping:r,destination:i,navigationAction:o="next",target:c,redirectURL:d}=(f=Tt(n))!=null?f:{},u=r?qn(r):void 0,m=Zy(),h=eb(s),p=()=>void Ge(o,i,void 0,{target:c,redirectURL:d});t.initInlineWidget({url:h,parentElement:e,prefill:u,utm:m,resize:!1}),Jy(a,p)},nb=e=>{for(const t of e.querySelectorAll(".calendly"))tb(t)},sb=async e=>{await me({section:e,blockType:"calendly",selector:".calendly-block"})},ab=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?sb:nb,rb={weekdays:{shorthand:["So","Mo","Di","Mi","Do","Fr","Sa"],longhand:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},months:{shorthand:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],longhand:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},weekAbbreviation:"KW",rangeSeparator:" bis ",scrollTitle:"Zum ndern scrollen",toggleTitle:"Zum Umschalten klicken",time_24hr:!0},ib=async()=>await te(()=>import("./flatpickr.chunk-B5M-wKWU.js").then(e=>e.i),[]),ob="hey-flatpickr-script",lb="https://libs.heyflow.cloud/flatpickr.min.js",cb="https://libs.heyflow.cloud/flatpickr.min.css";function db(e,t){let n;try{n=e.parseDate(t.value)}catch(s){n=void 0}return{blockID:t.id,data:{hasData:!!t.value,isValidDate:n!==void 0,isRequired:t.dataset.required==="true"}}}const ub=e=>{for(const t of e.getElementsByClassName("date-picker-block"))mb(t)};function mb(e){const t=document.createElement("link");t.href=cb,t.rel="stylesheet";const n=_e();nt()?n==null||n.appendChild(t):document.head.appendChild(t),_t(lb,void 0,!1,"text/javascript",nt(),ob),t.onload=async()=>{await ib().then(s=>{var d,u,m,h;const a=s.default;if(Ve(e))return;const r=e.querySelector(".date-picker-block-content input");if(!r)return;const i=JSON.parse((d=e.getAttribute("data-attributes"))!=null?d:"{}"),o={onClose:()=>{e.classList.remove("is-calendar-open"),Bn(e)},onOpen:()=>{e.classList.add("is-calendar-open"),Bn(e)}};o.locale=E(v({},document.documentElement.lang==="de"?rb:{}),{firstDayOfWeek:i.startWeekOnMonday?1:0}),i.range&&(o.mode="range"),i.workdaysOnly&&(o.enable=[p=>p.getDay()>=1&&p.getDay()<=5]),i.fromToday&&(o.minDate="today"),i.tillToday&&(o.maxDate="today"),nt()&&(o.static=!0),o.dateFormat=((u=i.dateFormat)!=null?u:"YYYY-MM-DD").replace(/YYYY/g,"Y").replace(/MM/g,"m").replace(/DD/g,"d"),r.addEventListener("change",p=>{hb(p,e),r.value!==""&&Ys(r),K(v({message:"Date picker changed"},db(a,r)))}),r.addEventListener("blur",()=>za(e)),r.addEventListener("focus",()=>qa(e));const c=a(r,o);(m=c.mobileInput)==null||m.addEventListener("blur",()=>za(e)),(h=c.mobileInput)==null||h.addEventListener("focus",()=>qa(e))}).catch(s=>{console.error(s)})}}const hb=(e,t)=>{e.target.value.length>0?t.classList.add("has-value"):t.classList.remove("has-value")},qa=e=>{e.classList.add("has-focus"),Bn(e)},za=e=>{e.classList.remove("has-focus"),Bn(e)},Bn=e=>{if(e.classList.contains("floating-label-inline"))return;const n=e.classList.contains("has-value")||e.classList.contains("has-focus")||e.classList.contains("is-calendar-open"),s=e.querySelector(".input-floating-label"),r=Array.from(e.querySelectorAll(".input-prefix")).reduce((i,o)=>i+o.getBoundingClientRect().width,0);n?s==null||s.setAttribute("style",`left: -${r}px`):s==null||s.setAttribute("style","")},fb=async e=>{await me({section:e,blockType:"datePicker",selector:".date-picker-block",onHydrated:t=>{const n=t.querySelector(".date-picker-input");if(!n)throw new Error("No date picker input in date picker block defined");n.addEventListener("change",()=>{rt(n.name),n.value!==""&&Ys(n)})}})},pb=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?fb:ub,gb=async e=>{await me({section:e,blockType:"genericButton",selector:".generic-button-block",onHydrated:t=>{const n=t.querySelector('[data-type="generic-button"]');if(!n)throw new Error("Inner button element not found. Legacy handlers were not attached");Xs(n)}})},Is=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?gb:Gy;async function qi(e){await me({section:e,blockType:"image",selector:".image-block"})}const vb=async e=>{await me({section:e,blockType:"input",selector:".input-block",onHydrated:t=>{const n=t.querySelector("input");if(!n)throw new Error("No input in input block defined");const s=xi(n);n.addEventListener("keydown",s);const a=Ei(n);n.addEventListener("change",a)}})},yb=async e=>{await me({section:e,blockType:"logoBar",selector:".logo-bar-block"})},bb=140,wb=e=>{if(!e)return;Array.from(e.getElementsByClassName("multiple-choice-block")).forEach(n=>{const s=n.getElementsByClassName("multiple-choice")[0];s.classList.contains("mc-grid")&&s.offsetWidth>0&&Sb(n,s,e)})},Sb=(e,t,n)=>{var _,N,$,W,ee,A,ie;const s=x(),a=s.constants.STYLES,r=Rs()?screen.width:Ct(),i=a["mc-picture-option-base-width"],o=parseInt((N=(_=i.toString().match(/^(\d+)px$/))==null?void 0:_[1])!=null?N:""),c=(A=(ee=parseInt((W=($=a["mc-option-base-width"].toString().match(/^(\d+)px$/))==null?void 0:$[1])!=null?W:""))!=null?ee:s.runtime.mcOptionWidth)!=null?A:bb,d=t.children[0],u=(ie=d.getElementsByClassName("option-content")[0])==null?void 0:ie.classList.contains("picture"),m=e.className.match(/inner-.+/),h={"inner-narrow":"width-narrow","inner-mid":"width-mid","inner-wide":"width-wide","inner-mobile":"width-mobile"},p=m==null?void 0:m[0],f=a[h[p]],g=Math.min(r,f?parseInt(f.toString().slice(0,-2)):r),b=o,S=u?o:c,w=20,k=u?Math.min(g,r-w)/b*b:g,C=Math.min(5,Math.floor(k/S)),T=Math.ceil(d.childElementCount/C),V=Math.ceil(d.childElementCount/T),M=S*V;if(u){const ne=parseInt(a["width-narrow"].toString().slice(0,-2)),I=parseInt(a["mc-picture-option-space-between"].toString().slice(0,-2)),X=V===1?r-w:Math.min(360,ne),B=Math.max(X,M);if(d.style.width=B+I+"px",n.tagName!=="SECTION")return;const he=Array.from(n.children).filter(function(Q){return Q.tagName==="DIV"&&Q.classList.contains("block")}),se=e.getAttribute("data-align-siblings");for(let Q=0;Q<he.length;Q++){const oe=he[Q],L=oe.getAttribute("data-blocktype"),R=oe.getElementsByClassName("block-content")[0];L&&!(["headline","text-block","multiple-choice"].indexOf(L)>-1)&&(se!="false"?(R.style.maxWidth=B+20+"px",R.classList.contains("inner-wide")&&(R.style.paddingLeft="10px",R.style.paddingRight="10px")):R.style.removeProperty("max-width"))}}for(let ne=0;ne<d.children.length;ne++){const I=d.children[ne];I.style.flex="0 0 "+100/V+"%",I.style.maxWidth=100/V+"%"}},kb=e=>{const t=x();if(Ve(e))return;const n=F(`[data-related-element="${e.id}"]`);if(e.addEventListener("click",async()=>{K({message:"Multiple choice clicked",blockID:e.id});const s=e.closest(".multiple-choice");if(!s)return;const a=s.querySelectorAll(".multiple-choice-option"),r=s.querySelectorAll("[data-related-element]");for(const i of[...a,...r])i.classList.remove("error");t.constants.IS_RULES_ENABLED&&en.hasBlockingRuleForBlock(e.id,"heyflow-button-click")||await fi(e)}),n){const s=e.closest(".multiple-choice"),a=s==null?void 0:s.querySelectorAll(".multiple-choice-option");e.setAttribute("data-iscustom","true"),n.addEventListener("input",()=>{const r=n.value.trim(),i=e.checked&&r==="";a&&a.forEach(o=>Re({hasError:i,element:o,visualTargetElement:o})),Re({hasError:i,element:e,visualTargetElement:n}),e.setAttribute("data-relatedtext",r)})}else return},Eb=e=>{for(const t of e.querySelectorAll('[data-type="multiple-choice"]'))kb(t)},xb=async e=>{await me({section:e,blockType:"multipleChoice",selector:".multiple-choice-block"})},Qs=wb,Ib=x().constants.IS_V2_INPUT_BLOCKS_ENABLED?xb:Eb,zi=e=>Ye(()=>{rt(e.name),Jt(e)},250),Ki=e=>{const t=e.closest(".input-box");if(!t||!t.classList.contains("with-floating-label"))return;const s=t.querySelector(".input-floating-label");s==null||s.addEventListener("click",()=>{e.focus()})},Gi=(e,t)=>{e.target.value.length>0?t.classList.add("has-value"):t.classList.remove("has-value")};function Yi(e){return e.dataset.isEmpty==="true"}const Cb=e=>{if(Ve(e))return;e.addEventListener("blur",()=>{setTimeout(()=>{Pi(e)},100)});const t=zi(e);e.addEventListener("change",t),Ki(e);const n=e.closest(".input-box");if(!n)return;e.addEventListener("input",a=>{Gi(a,n)});const s=e.hasAttribute("data-trim");e.addEventListener("blur",()=>{s&&(e.value=e.value.trim()),n.classList.remove("has-focus")}),e.addEventListener("focus",()=>{n.classList.add("has-focus")}),Yi(e)||n.classList.add("has-value")},Lb=async e=>{await me({section:e,blockType:"phone",selector:".phone-number-block",onHydrated:(t,n,s)=>{const a=t.querySelector(`input#${s}`);if(!a)throw new Error("No phone input in phone block defined");const r=zi(a);a.addEventListener("change",r),Ki(a);const i=a.closest(".input-box");if(!i)return;a.addEventListener("input",c=>{Gi(c,i)});const o=a.hasAttribute("data-trim");a.addEventListener("blur",()=>{o&&(a.value=a.value.trim())}),Yi(a)||i.classList.add("has-value")}})},Nb=async e=>{await me({section:e,blockType:"photoCarousel",selector:".photo-carousel-block"})},_b=async()=>await te(()=>import("./swiper.chunk-Bqz09FlK.js").then(e=>e.a),[]),Ab=e=>{Ji.init(e)},Ka={speed:200,delay:1e3},Ji={init:e=>{const t=e.querySelectorAll(".photo-carousel-block");Array.from(t).forEach(n=>{var u,m;const s=n.getAttribute("data-id"),a=n.getAttribute("data-loop")==="true",r=n.getAttribute("data-autoplay")==="true",i=(u=Number(n.getAttribute("data-speed")))!=null?u:Ka.speed,o=(m=Number(n.getAttribute("data-delay")))!=null?m:Ka.delay,c=n.querySelector(".swiper-container");if(!s||!c)return;const d={speed:i,delay:o,loop:a,autoplay:r};Ji.initSwiper(c,d)})},initSwiper:async(e,t)=>{await _b().then(n=>{const s=n.default;new s(e,E(v({spaceBetween:10,speed:t.speed,loop:t.loop},t.autoplay?{autoplay:{delay:t.delay,disableOnInteraction:!0}}:{}),{pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")}}))}).catch(console.error)}},Tb=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?Nb:Ab,Rb=e=>{const t=F(".progress-bar-active");if(!t)return;const n=be("section");if(!n)return console.warn("no screens found in flow");const s=Array.from(n).filter(a=>a.getAttribute("data-type")==="user").length;t.style.width=Math.min(1,(e+1)/s)*100+"%"},Zi=async e=>{await me({section:e,blockType:"screenProgress",selector:".progress-bar-block"})},$b=async e=>{await me({section:e,blockType:"progress",selector:".progress-block"})},jb=1e3,Mt={},An={},Pb=e=>{const t=e.getElementsByClassName("rich-list-v2-block");Array.from(t).forEach(n=>{if(An[n.id]){An[n.id].setOptions(n);return}An[n.id]=new Bb(n)})};class Bb{constructor(t){U(this,"list");U(this,"id","");U(this,"animationTimeoutInMs",1e3);U(this,"options",{});U(this,"action","next");this.list=t;const n=this.list.getAttribute("id");if(!n)return;this.id=n,this.setOptions(t),this.list.getAttribute("data-is-animated")==="true"&&this.startAnimation()}setOptions(t){var s,a,r;this.animationTimeoutInMs=parseInt((s=t.getAttribute("data-animation-timeout"))!=null?s:"1000"),this.action=(a=t.getAttribute("data-action"))!=null?a:"next";const n=t.getAttribute("data-options");n&&(this.options=(r=Tt(n))!=null?r:{})}startAnimation(){this.clearCachedTimeouts();const n=x().runtime.currentScreen.id,s=F(`#${this.id}`);if(!s)return;const a=s.querySelectorAll(".rich-list-v2-option");a.length!==0&&(this.setAndCacheTimeout(()=>{this.onAnimationEnd(n)},this.animationTimeoutInMs*a.length),this.animateItems(a))}animateItems(t){t.forEach((n,s)=>{var d,u;const a=n.querySelector(".loader"),r=n.querySelector(".graphics-container"),i=n.querySelector(".text-container"),o=(d=t[s+1])==null?void 0:d.querySelector(".text-container"),c=(u=t[s+1])==null?void 0:u.querySelector(".loader");s===0&&(a&&(a.classList.add("loader-active"),a.style.display="block"),i&&i.classList.remove("text-container-hidden")),this.setAndCacheTimeout(()=>{c==null||c.classList.add("loader-active"),a&&(a.style.display="none",a==null||a.classList.remove("loader-active")),r==null||r.classList.remove("graphics-container-hidden"),r==null||r.classList.add("graphics-container-show"),o==null||o.classList.remove("text-container-hidden")},this.animationTimeoutInMs*(s+1))})}onAnimationEnd(t){const s=x().runtime.currentScreen.id;if(!(t!==s||this.options.isAnimated===!1||ft()||!this.options.withAction)){if(Ce()){this.setAndCacheTimeout(()=>{ke({event:"loaderPreviewNavigation"})},500);return}this.setAndCacheTimeout(()=>{Ge(this.action,this.options.destination,void 0,this.options)},jb)}}setAndCacheTimeout(t,n){const s=window.setTimeout(t,n);Mt[this.id]?Mt[this.id].push(s):Mt[this.id]=[s]}clearCachedTimeouts(){var n;((n=Mt[this.id])!=null?n:[]).forEach(s=>{clearTimeout(s)}),Mt[this.id]=[]}}const Mb=async e=>{await me({section:e,blockType:"richList",selector:".rich-list-v2-block"})},Db=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?Mb:Pb,Vb=async e=>{await me({section:e,blockType:"richText",selector:".text-block"})},Ob=async e=>{await me({section:e,blockType:"checkbox",selector:".simple-checkbox-block"})},Fb=async e=>{await me({section:e,blockType:"steps",selector:".steps-block"})},Ub=async e=>{await me({section:e,blockType:"stripePayment",selector:".payment-block"})},Wb=async e=>{await me({section:e,blockType:"textImage",selector:".text-image-content-block"})},Hb=async e=>{await me({section:e,blockType:"textarea",selector:".textarea-block"})},qb=async e=>{await me({section:e,blockType:"typewriter",selector:".typewriter-block"})},zb=async e=>{await me({section:e,blockType:"video",selector:".video-block"})},Kb=e=>{const t=e.getElementsByClassName("youtube-player");return Array.from(t)},Gb=e=>{var t;(t=e.contentWindow)==null||t.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")},Yb=e=>{Kb(e).forEach(Gb)},Jb=e=>{const t=e.getElementsByClassName("vimeo-player");return Array.from(t)},Zb=e=>{var t;(t=e.contentWindow)==null||t.postMessage('{"method":"pause"}',"*")},Xb=e=>{Jb(e).forEach(Zb)},Qb=e=>{Xb(e),Yb(e)},ew=async e=>{await me({section:e,blockType:"html",selector:".html-block"})};function tw(e,t){const n=_e();(n!=null?n:window).addEventListener(e,t)}function nw(e,t){const n=_e();(n!=null?n:window).removeEventListener(e,t)}const Ga=(e,t)=>{const n=x(),s=F(t);(s?Array.from(s.children):[]).forEach(o=>o.style.display="none");const r=e.getAttribute(`data-${t}`),i=F(`#template-${r}`);return r&&s&&i&&(i.style.display="block"),s&&(n.constants.IS_V2_VISUAL_BLOCKS_ENABLED?i!=null&&i.id&&(Is(i),Zi(i),qi(i)):Is(s),Hi(s),li(s),ci(s)),i},sw=e=>{const t=F("section.visible");t&&(t.classList.remove("visible"),t.classList.add("hidden")),e.classList.remove("hidden"),e.classList.add("visible")},Cs=e=>[...mr()].find(n=>n.getAttribute("name")===e),Xi=e=>{var f,g,b,S,w;if(!e)return console.warn("Cannot render screen: screenName is undefined");const t=F(`section[name="${e}"]`);if(!t)return console.warn(`Cannot render screen ${e} screen was not found in dom`);const n=Array.from((g=(f=t.parentElement)==null?void 0:f.children)!=null?g:[]).indexOf(t),s=t.id,a=x();a.runtime.currentScreen=t,li(t),ci(t),sw(t);const r=Ga(t,"header"),i=(r==null?void 0:r.getAttribute("data-behaviour"))==="static",o=((b=Cs(e))==null?void 0:b.id)===e;dw(i,o),Ga(t,"footer"),At()||Rb(n),!a.constants.IS_V2_COMPLEX_BLOCKS_ENABLED&&!a.constants.IS_V2_INPUT_BLOCKS_ENABLED&&Qs(t),Ce()||setTimeout(function(){Kv(t)},100);try{(w=(S=window.Client)==null?void 0:S.onRender)==null||w.call(S,s)}catch(k){console.error("There is an error in your 'render' function:",k)}const{textareas:c,textInputs:d,radios:u,checkboxes:m,phoneInputs:h,addressInputs:p}=ta(t);u.forEach(La),m.forEach(La),a.constants.IS_V2_INPUT_BLOCKS_ENABLED||(u.forEach(Jt),c.forEach(Yg),m.forEach(Jt),d.forEach(zv)),a.constants.IS_V2_COMPLEX_BLOCKS_ENABLED||(p.forEach(Fy),h.forEach(Cb)),rw(t),Qt(t),ow()},aw=e=>{const t=e.querySelectorAll("[data-initial-required]"),n=["date-picker","signature"];t.forEach(s=>{var r;n.includes((r=s.dataset.blocktype)!=null?r:"")?s.dataset.required="true":s.required=!0})},rw=e=>{const t=x();e.querySelector("[data-no-validate]")&&aw(e),Dg(e),zg(e),Sw(e),Tg(e),yy(e),gp(e),uy(e),Ib(e),Is(e),ab(e),Db(e),pb(e),Tb(e),Hi(e),t.constants.IS_V2_VISUAL_BLOCKS_ENABLED?($b(e),Fb(e),zb(e),qi(e),yb(e),Wb(e),Vb(e),Zi(e),qb(e)):br(),t.constants.IS_V2_INPUT_BLOCKS_ENABLED&&(Hb(e),Ob(e),vb(e),Ub(e)),t.constants.IS_V2_COMPLEX_BLOCKS_ENABLED&&(zy(e),Lb(e),ew(e))},iw=e=>{const t=x(),n=F(`section[name="${e}"]`);n&&(t.constants.IS_V2_VISUAL_BLOCKS_ENABLED||Qb(n))},ow=()=>{nw("keydown",Ja),setTimeout(()=>{tw("keydown",Ja)},50)};function xn(e){if(e)return E(v({getValue:e.getValue?()=>{if(!e.getValue)throw new Error(`block.getValue was defined before but is now undefined: ${e.getConfig().blockId}`);return e.getValue()}:void 0,setValue:e.setValue?t=>{if(!e.setValue)throw new Error(`block.setValue was defined before but is now undefined: ${e.getConfig().blockId}`);e.setValue(t)}:void 0,validate:async()=>e.validate(),reset:()=>e.reset()},e.getCustomMethods()),{visibility:e.visibility})}function lw(){const e=x();return{v1:{additionalResponseData:Ds,getBlocks:()=>Object.values(Se.getBlocks()).map(xn),getBlockByID:t=>xn(Se.getBlockRef(t)),getBlocksByScreenID:t=>Se.getAllBlocksForSection(t).map(xn),getBlocksByScreenName:t=>{var s;const n=(s=Cs(t))==null?void 0:s.id;if(n)return Se.getAllBlocksForSection(n).map(xn)},getCurrentScreenID:()=>e.runtime.currentScreen.id,getCurrentScreenName:()=>e.runtime.currentScreen.getAttribute("name"),getFlowRoot:()=>{var t;return(t=_e())!=null?t:document},validateScreenByID:async t=>{const{isValid:n}=await Kt(t);return{success:n}},validateScreenByName:async t=>{var a;const n=(a=Cs(t))==null?void 0:a.id;if(!n)throw new Error(`No screen with name ${t} found`);const{isValid:s}=await Kt(n);return{success:s}},navigation:{goNext:()=>Et({mode:"sync",action:"next"}),goBack:()=>Et({mode:"sync",action:"goBack"}),goToScreen:t=>Et({mode:"sync",action:"go",destination:t})}}}}const gt=()=>{const e=x();return!e.constants.TRACKING_VERSION||e.constants.TRACKING_VERSION<100},Yt=We;var sr,ar;const ot=(ar=(sr=x().runtime.trackingLogLevel)!=null?sr:St()&&window.localStorage.getItem("heyflowTrackingLogLevel"))!=null?ar:30,G={fatal:ot<70?console.error:wt,error:ot<60?console.error:wt,warn:ot<50?console.warn:wt,info:ot<40?console.info:wt,debug:ot<30?console.debug:wt,trace:ot<20?console.trace:wt},ea=()=>{const e=x();return e.runtime.sessionId||(e.runtime.sessionId=Un()),e.runtime.sessionId},cw=()=>{const e=x();if(!e.runtime.parentLocation||e.runtime.parentLocation==="app-preview")return;const{host:t,pathname:n,origin:s,title:a,mode:r,hash:i,release:o}=e.runtime.parentLocation;return{host:t,path:n,origin:s,title:a,mode:r,hash:i,release:o}},tn=()=>{var t,n;const e=x();return{flow_id:e.constants.FLOW_ID,host:window.location.host,path:window.location.pathname,origin:window.location.origin,title:document.title,hash:window.location.hash,referrer:document.referrer,screen_width:Ct(),screen_height:ur(),parent:cw(),screen_id:(t=e.runtime.currentScreen)==null?void 0:t.id,session_id:ea(),ab_test_id:e.constants.TEST_ID,ab_variant_id:e.constants.VARIANT_ID,is_embedded:nt(),widget_version:(n=e.constants.WIDGET_VERSION)!=null?n:"unknown"}},je=({eventName:e,payload:t})=>{const n=x(),s=Yt(),r=["heyflow-change","heyflow-submit"].includes(e)?_n():void 0,i=n.runtime.currentScreen,o=i==null?void 0:i.getAttribute("name"),c=v(v(v(v({flowID:n.constants.FLOW_ID},o?{screenName:o}:void 0),r?v({},r):void 0),t),n.constants.IS_CUSTOM_JS_ENABLED?{flowAPI:lw()}:{}),d=new CustomEvent(e,{detail:c});G.debug(`Dispatch event '${e}'.`,c),s.dispatchEvent(d),window.dispatchEvent(d)},Jt=e=>{var i;const t=Tn(e.getAttribute("data-tracking-listener")),n=Tn(e.getAttribute("data-tracking"));if(t===!0||n!==!0)return;e.setAttribute("data-tracking-listener","true");const s=Lt(e.getAttribute("data-event-name")),a=Lt(e.getAttribute("data-answer")),r=e.id;if(gt()){const o=e.getAttribute("data-label"),c=s!=null?s:r;if(!c)return;e.addEventListener("click",()=>{je({eventName:"heyflow-input-click",payload:{customEventName:c,customEventLabel:o!=null?o:""}})})}else{const o=(i=Ro(s!=null?s:a))!=null?i:r,c=a;e.addEventListener("click",()=>{je({eventName:"heyflow-input-click",payload:{customEventName:o,customEventLabel:c}})})}},K=async({message:e,severity:t,responseID:n,blockID:s,data:a,history:r})=>{var p,f;if(Ce())return;const i=x(),{currentScreen:o,screenTrace:c}=i.runtime,d=ea(),u=i.constants.CUSTOM_CODE_KEYWORDS,m=i.constants.HAS_CUSTOM_CODE,h=v(v(v({message:e,severity:t,screenID:(p=o==null?void 0:o.id)!=null?p:"unknown",screenName:(f=o==null?void 0:o.getAttribute("name"))!=null?f:"unknown",sessionID:d,history:r,screenTrace:c,isEmbedded:nt(),startOnFirstScreen:i.constants.FORCE_START,userAgent:window.navigator.userAgent,hostname:window.location.hostname,pathname:window.location.pathname,flowVersion:Bo,hasCustomCode:m,clientTimestamp:new Date().toISOString(),customCodeKeywords:u!=null?u:[]},n?{responseID:n}:{}),s?{blockID:s}:{}),a?{data:a}:{});await de.post(`${i.constants.API_ENDPOINT}/flow/${i.constants.FLOW_ID}/logs`,h,{headers:{"X-Heyflow-Session-ID":d}}).catch(g=>{console.error("Error sending log:",g)})},Ya=e=>{var r;const n=(r=x().constants.STYLES)==null?void 0:r["screen-scroll-behavior"];if(n==="none")return;const s={top:0,left:0,behavior:n!=null?n:"smooth"};window.scrollTo(s);const a=Fn();a&&(e||a.scrollTo(s),a.scrollTop=0)},dw=(e,t)=>{var r;const s=_e(),a=x();((r=a.runtime.parentLocation)!=null?r:s)||setTimeout(()=>{const i=a.runtime.initTs;i&&i+500<Date.now()?Ya():t&&e&&Ya(!0)},0)},uw=()=>{const e=We();if(!e){const s="Could not store answers. No Form Element was found";return K({message:"Restore Data - Error storing answers",severity:"error",data:{error:s},history:Z.history}),console.warn(s)}const t=JSON.stringify(pt(e)),n=x();window.localStorage.setItem(`heyflow-${n.constants.FLOW_ID}-preserved`,t),K({message:"Restore Data - Saved answers",history:Z.history})},mw=()=>{const e=x();window.localStorage.setItem(`heyflow-${e.constants.FLOW_ID}-last-visited-screen`,Z.screenAfterRouting)},Tt=e=>{if(!e)return;function t(n){const s=document.createElement("textarea");return s.innerHTML=n,s.value}return JSON.parse(e,(n,s)=>typeof s=="string"?t(s):s)},Qi=e=>{const t=We();if(!t)return;const n=Vs(ei(pt(t)));ke({key:e,fields:n,event:"closeModal"})},hw=()=>{be('img[loading="lazy"]').forEach(t=>{t.setAttribute("loading","eager")})},fw=()=>{const e=".material-icons",t=be(e);if(!t.length)return ht(e);t.forEach(n=>{const s=n.getAttribute("icon");s&&(n.innerText=s)})},pw=()=>{var r,i;const t=x().runtime.currentScreen,n=o=>{var u;const c=o.querySelector("[data-attr]");return c?JSON.parse((u=c.getAttribute("data-attr"))!=null?u:"{}").action!="goBack":!0},s=Me(t==null?void 0:t.getElementsByClassName("button-block")).filter(n),a=Me(t==null?void 0:t.getElementsByClassName("generic-button-block")).filter(n);if(!(!s.length&&!a.length))try{s.length&&!a.length?(r=s.slice(-1)[0].getElementsByTagName("a")[0])==null||r.click():a.length&&((i=a.slice(-1)[0].getElementsByTagName("button")[0])==null||i.click())}catch(o){console.error("Cannot clickLastButton",o)}},Ja=e=>{const t=Zt();if(e.key==="Enter"){const n=(t==null?void 0:t.tagName)==="TEXTAREA",s=(t==null?void 0:t.tagName)==="INPUT"&&((t==null?void 0:t.classList.contains("awesomplete"))||(t==null?void 0:t.getAttribute("data-autocomplete"))==="true"),a=(t==null?void 0:t.tagName)==="BUTTON";if(!a&&!n&&e.preventDefault(),(n||s||a)&&!e.metaKey)return;t.className.includes("swiper")||pw()}else e.key==="Escape"&&Qi("Esc")},gw=()=>{const e=Ue("body");["dragenter","dragover"].forEach(t=>{e==null||e.addEventListener(t,n=>{n.preventDefault(),n.stopPropagation(),e.classList.add("dragging")},!1)}),["dragleave","drop"].forEach(t=>{e==null||e.addEventListener(t,n=>{n.preventDefault(),n.stopPropagation(),e.classList.remove("dragging")},!1)})},ls=(e,t)=>Array.from(e.querySelectorAll(`input[type="${t}"]`)),ta=(e,t,n)=>{const s=Array.from(e.getElementsByTagName("textarea")),a=Array.from(e.getElementsByTagName("select")),r=["text","tel","email","number","url","time","date","datetime-local","password"],o=Array.from(e.getElementsByTagName("input")).filter(g=>r.includes(g.type)&&!g.classList.contains("phone-input")&&!g.classList.contains("multiple-choice-option-input")&&!g.classList.contains("address-input")&&(g.dataset.isReactInput!=="true"||!!g.closest(".input-box"))),c=ls(e,"checkbox"),d=ls(e,"radio"),u=ls(e,"file"),m=Array.from(e.querySelectorAll("input.signed-input")),h=Array.from(e.querySelectorAll("input.date-picker-input")),p=Array.from(e.querySelectorAll("input.phone-input")),f=Array.from(e.querySelectorAll("input.address-input"));return t?{textareas:Me(s),selects:Me(a),textInputs:Me(o),checkboxes:Me(c),radios:Me(d),fileInputs:Me(u),datePickers:No(h),signatures:_o(m),phoneInputs:Me(p),addressInputs:Me(f)}:n?{textareas:He(s),selects:He(a),textInputs:He(o),checkboxes:He(c),radios:He(d),fileInputs:He(u),signatures:He(m),datePickers:He(h),phoneInputs:He(p),addressInputs:He(f)}:{textareas:s,selects:a,textInputs:o,checkboxes:c,radios:d,fileInputs:u,signatures:m,datePickers:h,phoneInputs:p,addressInputs:f}},vw=e=>Object.entries(e).reduce((t,[,n])=>{if(n.length){const s=n.map(({id:a,value:r,required:i,dataset:o})=>({id:a,hasValue:!!r,required:i,dataHasError:o.hasError==="true",dataRequired:o.required,dataInitialRequired:o.initialRequired}));return t.concat(s)}return t},[]),yw=async(e,t)=>{const{DotLottie:n}=await te(async()=>{const{DotLottie:r}=await import("./lottie.chunk-ofuysGLL.js").then(i=>i.a);return{DotLottie:r}},[]);n.setWasmUrl(`${x().constants.STATIC_URL}/lottie/dotlottie-player.wasm`);const s=e.querySelector(`#lottie-loader-canvas-${t}`);if(!s)throw new Error("Lottie canvas not found");const a=e.getAttribute("data-src");if(!a)throw new Error("Lottie src not found");new n({autoplay:!0,loop:!0,canvas:s,src:a})},Za=(e=1e3)=>{setTimeout(()=>{Hs(x().runtime.currentScreen.id)},e)},qe={cachedTimeouts:[],init:function(e,t,n,s){qe.start(e);const a=x(),r=a.runtime.currentScreen.id;qe.setAndCacheTimeout(function(){qe.cachedTimeouts.length>0&&qe.clearCachedTimeouts();const i=a.runtime.currentScreen.id;r===i&&qe.success(e,function(){if(!s.disabled&&!ft()){if(Ce()){setTimeout(()=>{ke({event:"loaderPreviewNavigation"})},500);return}setTimeout(()=>{Ge(n,s.destination,void 0,s)},1e3)}})},t)},start:function(e){const t=x(),n=F(`#${e}`);n&&(t.runtime.circleLoaderElem=n,n.classList.remove("circle-loader-load-success"),n.classList.remove("circle-loader-load-error"))},success:function(e,t){const n=F(`#${e}`);if(n){const s=x();s.runtime.circleLoaderElem=n,n.classList.add("circle-loader-load-success")}t?t():Za()},error:function(e){const t=F(`#${e}`);if(!t)return;const n=x();n.runtime.circleLoaderElem=t,t.classList.add("circle-loader-load-error"),Za()},setAndCacheTimeout(e,t){const n=setTimeout(e,t);qe.cachedTimeouts.push(n)},clearCachedTimeouts(){qe.cachedTimeouts.forEach(e=>{clearTimeout(e)}),qe.cachedTimeouts=[]}},bw=async e=>{const t=e.getElementsByClassName("loader-block");await Promise.all(Array.from(t).map(async n=>{var d,u;const s=n.getAttribute("data-id");if(!s)return;const a=n.getAttribute("data-options"),r=Tt(a);if(!r)return;const i=parseInt((d=n.getAttribute("data-timeout"))!=null?d:""),o=(u=n.getAttribute("data-action"))!=null?u:"next";n.getAttribute("data-lottie")==="true"&&await yw(n,s),qe.init(s,i,o,r)}))},ww=async e=>{await me({section:e,blockType:"loader",selector:".loader-block"})},Sw=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?ww:bw,kw=x().constants.IS_V2_VISUAL_BLOCKS_ENABLED?void 0:qe,Xa=e=>{const t=Ue("head"),n=document.createElement("style");t==null||t.appendChild(n),n.type="text/css",n.appendChild(document.createTextNode(e))},Ew=()=>{var e;Io||(Rs()?(document.documentElement.style.width="1px",document.documentElement.style.minWidth="100%"):Co()&&Xa(".emoji { transform: scale(0.85); }"),Ao()&&(Xa(".input-decorator i { line-height: 1.25; }"+"button.generic-button .label, button.generic-button .line2 { overflow: hidden; }"),/Version\/(13|12|11|10)/.test(navigator.userAgent)&&((e=Ue("body"))==null||e.classList.add("no-gap-support"))))},xw=(e,t)=>{const n=Ut.parse(e);return t?v(v({},n),Ut.parse(t)):n},eo=e=>{const t=x(),n=xw(window.location.search,e),s={};if(t.constants.PASS_QS===!0&&t.constants.PASS_QS_RX){const a=new RegExp(t.constants.PASS_QS_RX,"i");Object.entries(n).forEach(([r,i])=>{const o=r.substr(0);if(o.match(a)){const c=ni(i);typeof c=="string"&&(s[o]=c)}})}return s},Iw=e=>{Object.entries(e).forEach(([t,n])=>{hv({name:t,value:n})})},Cw={getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.error("Error getting item from localStorage",t),null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(n){console.error("Error setting item in localStorage",n)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(t){console.error("Error removing item from localStorage",t)}}},Lw=async({phoneNumber:e})=>{if(Ce())return{submitCode:async()=>new Promise(r=>{setTimeout(()=>{r({isValid:!0})},2e3)})};const t=x(),n=`${t.constants.MODULES_URL}/flow/${t.constants.FLOW_ID}/module/phone-number-otp`,s=await de.post(`${n}/send`,{phoneNumber:e});return{submitCode:async r=>(await de.post(`${n}/verify`,{verificationID:s.data.id,otp:r})).data}};let cs;const Qa={navigation:"heyflow-screen-view",resize:"resize"};function Nw(){var e;if(!cs){const t=x();cs={constants:{ASSETS_URL:t.constants.ASSETS_URL,FLOWS_ASSETS_BUCKET_BASEURL:t.constants.FLOWS_ASSETS_BUCKET_BASEURL,FLOW_ID:t.constants.FLOW_ID,MODULES_ENDPOINT:`${t.constants.MODULES_URL}/usage/${t.constants.FLOW_ID}`,API_ENDPOINT:t.constants.API_ENDPOINT,STRIPE_PUBLIC_KEY:t.constants.STRIPE_PUBLIC_KEY,STATIC_URL:t.constants.STATIC_URL,LEGACY_BUILDER_PREVIEW:t.constants.ENV==="PREVIEW",STYLES:t.constants.STYLES},client:{googleMapsApiKey:t.constants.GOOGLE_MAPS_PLACES_API_KEY,downloadFile:Ni,isInPreviewMode:Ce(),language:navigator.language,messageHeight:()=>Qt(t.runtime.currentScreen),messageParent:ke,getPrefillValues:qn,resetScroll:()=>window.scrollTo(window.scrollX,window.scrollY),trackButtonClick:Zs,requestNavigation:Et,root:(e=_e())!=null?e:document,rootElementWidth:Ct(),dispatchHeyflowEvent:je,sendHeight:Pn,sendLog:K,uploadFile:async({file:s,accept:a,onProgress:r,onError:i})=>await Li({flowId:t.constants.FLOW_ID,file:s,accept:a,onProgress:r,onError:i}),getCurrentScreenId:()=>t.runtime.currentScreen.id,addEventListener:(s,a)=>{window.addEventListener(Qa[s],a)},removeEventListener:(s,a)=>{window.removeEventListener(Qa[s],a)},requestSmsValidationCode:Lw,localStorage:Cw,getCurrentScreenIndex:()=>Array.from(be('section[data-type="user"]')).findIndex(s=>s.classList.contains("visible")),getScreensLength:()=>be('section[data-type="user"]').length,getScrollableContentWrapper:hr,getScrollableContent:()=>_e()?F("article"):document,getHeaderOffsetHeight:()=>{var s;return(s=F("header"))==null?void 0:s.offsetHeight},hasHeader:()=>{var s;return((s=F("#template-header"))==null?void 0:s.style.display)==="block"},visibility:Fs}}}return cs}const na=({content:e=Ue("body"),params:t=new URLSearchParams(eo())}={})=>{if(!At())return;const n=x();Zr({blocks:Array.from(e.querySelectorAll('[data-hydration-root="true"]')).map(a=>{var r;try{return{config:JSON.parse((r=a.dataset.config)!=null?r:"{}"),element:a}}catch(i){throw K({severity:"error",message:"Parsing block config failed",blockID:a.dataset.blockId,data:{error:i.message}}),i}}),blockContext:Nw(),restoreDataEnabled:n.constants.RESTORE_DATA,params:t}).forEach(a=>{Se.setBlockRef(a.getConfig().blockId,a)})},_w=["button","generic-button","elements","elements-v2"],Aw=e=>_w.includes(e),Tw=e=>{const t=e.closest("header"),n=e.closest("footer");return t?"header":n?"footer":"main"},Rw=e=>{const t=no(e);if(t==="scale"&&(e!=null&&e.closest("label"))||t==="multiple-choice"&&(e!=null&&e.closest("label")))return!0;const n=e==null?void 0:e.closest("[data-action]");return!!(Aw(t)&&n)},$w=e=>{var n;if(no(e)==="rich-list-v2"){const s=e.querySelector(".block-content"),a=s==null?void 0:s.id;if(!s||!a)return;s.getAttribute("data-is-animated")==="true"&&((n=An[a])==null||n.startAnimation())}},to=e=>{var t,n;return Array.from((n=(t=e.parentElement)==null?void 0:t.children)!=null?n:[]).indexOf(e)},Mn=e=>{var t;return(t=e==null?void 0:e.closest(".block"))!=null?t:null},no=e=>{var t,n;return(n=(t=Mn(e))==null?void 0:t.getAttribute("data-blocktype"))!=null?n:""},jw=e=>e==null?void 0:e.closest("section"),Pw=e=>{const t=jw(e);return t?to(t):-1},Bw=e=>{const t=[];let n=Mn(e);for(;n;)t.unshift(to(n)),n=Mn(n.parentElement);return t},Mw=e=>{const t=Mn(e);if(!t||(be(".block").forEach(i=>i.classList.remove("preview-clicked","preview-highlight")),t.classList.add("preview-clicked"),Rw(e)))return;const n=Tw(t),s=n==="main"?"screens":"templates";let a=-1;if(n==="main"?a=Pw(t):n==="header"?a=0:n==="footer"&&(a=1),a===-1)return;const r=Bw(t).join("/");ke({event:"navigateBuilder",view:s,screenIndex:a,blockPath:r})},so=e=>{e&&$w(e)},Dw=()=>{var a;const e=Ue("body");(a=e==null?void 0:e.classList)==null||a.add("app-preview"),e==null||e.addEventListener("click",r=>{Mw(r.target)});const t=x();t.runtime.parentLocation="app-preview",t.runtime.messageSource="preview";const n=".block",s=be(n);if(!s.length)return ht(n);[...s].filter(r=>!r.closest('[data-type="nested-blocks"]')).forEach(so)},Vw=(e,t)=>e==="screens"?"section":t===0?"header":"footer",Ow=(e,t,n)=>{const s=Vw(n,e),a=be(s);a.length||ht(s);const r=n==="screens"?a[e]:a[0],i=n==="screens"?"section":'[data-type="template-blocks-container"]';return r.querySelectorAll(`${i} > .block`)[t]},Fw=e=>Array.from(e).filter(t=>t.tagName==="DIV"&&t.classList.contains("block")),Uw=(e,t,n)=>{const s=Ow(e,t,n);qw(s),na({content:s}),so(s)},Ww=(e,t,n)=>{const s="section",a=be(s);if(!a.length)return ht(s);if(e==="templates")return;const r=a[t],i=Fw(r.children);if(!(i!=null&&i.length))return;i.forEach(c=>c.classList.remove("preview-highlight")),i.filter((c,d)=>d!==n).forEach(c=>c.classList.remove("preview-clicked"));const o=i[n];o&&(o.classList.add("preview-highlight"),Hw(o))},Hw=e=>{const t=e.getBoundingClientRect(),n=0,s=8,a=ur()-t.bottom,r=t.y-n-s,i=Fn();if(!i)return;const o=i.scrollTop;(r<0||a<0)&&i.scrollTo({top:r<0?o+r:o-a,behavior:"smooth"})},qw=e=>{if(!At())return;const{blockid:t}=e.dataset;t&&Se.deleteBlockReference(t)},zw={initBlockByIndex:Uw,highlightBlock:Ww,loadFont:Ci,initPreview:Dw};function Kw(){const e=x();if(!e.constants.RESTORE_DATA)return;if(!St()){K({message:"Restore Data - Error retrieving answers",severity:"error",data:{error:"Restore data: local storage is not available"},history:Z.history});return}const t=window.localStorage.getItem(`heyflow-${e.constants.FLOW_ID}-preserved`);if(!t)return;const n=JSON.parse(t);if(n)return n}function Gw(e,t){return e?t.every(n=>e[n]!==void 0):!1}function Yw(e){return e instanceof CustomEvent}const Jw=()=>{const e=Kw();if(!e)return;const t=[],n=At();Object.keys(e).forEach(s=>{var r,i,o;const a=e[s];if(a.values.length){if(!a.id)return console.log("no id present on element");if(!(n&&Se.getBlockRef(a.name)))switch(a.type){case"input":{if(a.id.startsWith("upload-")||a.id.startsWith("phone-"))return;const c=F(`#${a.id}`);if(!c)return;c.value=a.values[0].answer,a.name.includes("phone-input")&&(c==null||c.setAttribute("data-initialvalue",c.value)),(r=F(`#${a.id}-container`))==null||r.classList.add("has-value"),t.push({id:a.id,name:a.name});break}case"textarea":{const c=F(`#${a.id}`);if(!c)return;c.value=a.values[0].answer,t.push({id:a.id,name:a.name});break}case"scale":{const c=F(`#${a.id}`);if(!c)return;const d=`input[name="${a.name}"]`,u=be(d);if(!u.length)return ht(d);const m=[...u].indexOf(c);u.forEach((h,p)=>{m>=0&&p<=m?h.setAttribute("data-checked","checked"):h.removeAttribute("data-checked")}),(i=F(`#scale-${a.name}`))==null||i.setAttribute("data-pristine","true"),gi.init(a.name),t.push({id:a.id,name:a.name});break}case"multiple-choice":{a.values.forEach(function(c){const d=F(`#${c.name}`);d&&(d.checked=!0)}),t.push({id:a.id,name:a.name});break}case"range-slider":{const c=F(`#${a.name}`);if(!c)return;const d=(o=c.getAttribute("data-options"))==null?void 0:o.replace(/"start":(\d)+/,'"start":"'+a.values[0].name+'"');if(!d)return;c.setAttribute("data-options",d),t.push({id:a.id,name:a.name});break}case"simple-checkbox":case"simple-checkbox-v2":{const c=F(`#${a.id}`);if(!c)return console.warn(`No Checkbox Element found for ${a.id}`);c.checked=!0,t.push({id:a.id,name:a.name});break}case"select":{const c=F(`#${a.id}`);if(!c)return console.warn(`No Select Element found for ${a.id}`);c.value=a.values[0].name,t.push({id:a.id,name:a.name});break}case"file":{const c=a.id.split("_file")[0],d=c.split("-file-")[0],u=a,m=e[c];if(!F(`#${d}`))return console.warn(`No upload block found for ${d}`);document.addEventListener("upload-block-initialized",p=>{if(Yw(p)){const{id:f,uploadInstance:g}=p.detail;f===d&&Gw(m.restoreAttributes,["restoreMimeType","restoreSize"])&&g.restore({name:m.values[0].answer,ref:u.values[0].answer,type:m.restoreAttributes.restoreMimeType,size:m.restoreAttributes.restoreSize})}}),t.push({id:c,name:u.name.slice(0,5*-1)});break}default:K({message:"Restore Data - Error retrieving answers",severity:"error",data:{error:"undefined type to restore",blockId:a.id,blockName:a.name},history:Z.history}),console.warn("undefined type to restore")}}}),K({message:"Restore Data - Retrieved answers",data:{inputRestored:t},history:Z.history})},Zw=()=>{const e=x();K({message:"Handling initial routing",data:{mode:Z.mode.toString(),initialHash:window.location.hash,isForceStartOnFirstScreenEnabled:e.constants.FORCE_START}});const t=!window.location.hash.length;Z.goTo(Qw()),t||Xw()},Xw=()=>{(Z.mode===xt.window||Ce())&&window.dispatchEvent(new HashChangeEvent("hashchange"))},Qw=()=>{var r,i;const e=F("section");e||console.warn("No screens found");const t=x(),n=(r=e==null?void 0:e.getAttribute("name"))!=null?r:"start",{FORCE_START:s,CONTINUE_ON_LAST_VISITED_SCREEN:a}=t.constants;return s?n:Z.mode===xt.window&&window.location.hash.length?window.location.hash.slice(1):a&&(i=window.localStorage.getItem(`heyflow-${t.constants.FLOW_ID}-last-visited-screen`))!=null?i:n},eS=()=>{const e=x();Qs(e.runtime.currentScreen)},Ls=()=>{Zw()},tS=async e=>{var n,s;Tv(),Ew();const t=eo(e.urlParams);if(At()){const a=x();na({params:new URLSearchParams(Ut.stringify(t))}),a.constants.IS_RULES_ENABLED&&await en.initialize()}nS({urlParams:t}),Ls(),setTimeout(()=>{je({eventName:"heyflow-init"})},100);try{(s=(n=window.Client)==null?void 0:n.init)==null||s.call(n)}catch(a){console.error("There is an error in your 'init' function:",a)}hw()},nS=e=>{const t=x();t.runtime.initTs=Date.now(),Ut.parse(window.location.search).debug==="true"&&Ue("body").classList.add("debug"),window.addEventListener("pageshow",async i=>{await K({message:"Page Show Event",data:{persisted:i.persisted},history:Z.history}),i.persisted&&t.constants.FORCE_START&&Ls()}),window.addEventListener("heyflow-modal-element:open",i=>{const{detail:o}=i;K({message:"Modal Open Event",data:{modalId:o.modalId},history:Z.history}),t.constants.FORCE_START&&Ls()}),fw(),Jw(),Iw(e.urlParams),sS();const s=Ue("body"),a=new IntersectionObserver(i=>{i.forEach(o=>{if(o.isIntersecting){if(t.runtime.visited)return;je({eventName:"heyflow-visit"}),a.unobserve(o.target)}})});a.observe(s),ke({event:"getLocation"}),ke({event:"hasLoaded"}),!t.constants.IS_V2_COMPLEX_BLOCKS_ENABLED&&!t.constants.IS_V2_INPUT_BLOCKS_ENABLED&&Qs(t.runtime.currentScreen),Sr.check(),gw();const r=We();r==null||r.addEventListener("submit",i=>{i.preventDefault()})},sS=()=>{window.addEventListener("message",async e=>{var a,r,i;if(((a=e.data)==null?void 0:a.type)==="PING"||!To(e.data))return;const t=x(),n=t.runtime.currentScreen,s=JSON.parse(e.data);if(!(s.id!==t.constants.FLOW_ID||s.source==="heyflow")){if(!n)return console.log("no currentScreen defined");switch(s.event){case"setParentLocation":{const o=E(v({},s.location),{title:s.title,mode:s.mode,release:s.release});t.runtime.parentLocation=o,await zs("embedded",{});break}case"getScreenHeight":{Qt(n);break}case"goTo":zt(s.to,!0);break;case"dataLayerPush":if(s.source==="heyflow")return;if(window.dataLayer=(r=window.dataLayer)!=null?r:[],!s.payload)return console.warn("dataLayerPush payload is empty");s.payload.source=(i=s.source)!=null?i:"external",window.dataLayer.push(s.payload);break}}})};function aS(){return[...Z.history]}const rS={buttonClick:Wi,modifyLessVars:Xv,render:Xi,bootstrapBlocks:na,navigation:{navigate:Ge},loader:kw,slider:Gg,scale:gi,cookies:Sr,preview:zw,flowQuery:F,setAlternativeInitialScreen:Pv,getHistory:aS,initAccordionByID:yr,initAvatars:br},ao=()=>{const e=x();return E(v({},rS),{constants:e.constants,integration:e.integration,runtime:e.runtime})};if(!x().runtime.silent){const e=n=>{n.isTrusted&&(Ce()?ds(xt.virtual):ds(xt.window))};document.addEventListener("DOMContentLoaded",e),document.addEventListener("finishedInjection",n=>{var r,i;const s=(r=n.detail)==null?void 0:r.embedReference,a=Ts();s===a&&(window.heyflow[s].runtime.initTs||(window.heyflow[s]=ao()),ds(xt.virtual,{urlParams:(i=n.detail)==null?void 0:i.urlParams}),document.removeEventListener("DOMContentLoaded",e))});const t=x();!t.constants.IS_V2_COMPLEX_BLOCKS_ENABLED&&!t.constants.IS_V2_INPUT_BLOCKS_ENABLED&&(window.onresize=eS)}const ds=(e,t={})=>{Z.init(e),tS(t)};class iS{constructor(t){U(this,"config");U(this,"isInitialized",!1);this.config=v({sampleRate:1},t)}async init(){var t;if(!(this.isInitialized||!this.config.enabled)&&!(Math.random()>((t=this.config.sampleRate)!=null?t:1)))try{const{onCLS:n,onFID:s,onFCP:a,onLCP:r,onTTFB:i}=await te(async()=>{const{onCLS:o,onFID:c,onFCP:d,onLCP:u,onTTFB:m}=await import("./vendor.chunk-DwRjKKZr.js").then(h=>h.Q);return{onCLS:o,onFID:c,onFCP:d,onLCP:u,onTTFB:m}},[]);n(this.handleMetric.bind(this)),s(this.handleMetric.bind(this)),a(this.handleMetric.bind(this)),r(this.handleMetric.bind(this)),i(this.handleMetric.bind(this)),this.isInitialized=!0,console.debug("[Performance Metrics] Initialized successfully")}catch(n){console.warn("[Performance Metrics] Failed to initialize:",n)}}handleMetric(t){if(!this.config.enabled)return;const n=tn(),s={metric:t.name,value:t.value,rating:t.rating,delta:t.delta,id:t.id,navigationType:t.navigationType,flow_id:n.flow_id,session_id:n.session_id,timestamp:Date.now()};this.sendMetric(s)}sendMetric(t){const n=this.config.analyticsEndpoint,s=JSON.stringify({type:"performance_metric",data:t,userAgent:navigator.userAgent,hostname:window.location.hostname,pathname:window.location.pathname});try{if(!navigator.sendBeacon){console.warn("[Performance Metrics] sendBeacon not available");return}navigator.sendBeacon(n,s)?console.debug("[Performance Metrics] Successfully sent metric"):console.warn("[Performance Metrics] Failed to send metric via sendBeacon")}catch(a){console.warn("[Performance Metrics] Error sending metric:",a)}}}const oS=e=>{var i;if(Ce())return;const t=x(),s={enabled:(i=t.constants.IS_PERFORMANCE_METRICS_ENABLED)!=null?i:!1,sampleRate:1,analyticsEndpoint:`${t.constants.API_ENDPOINT}/flow/${t.constants.FLOW_ID}/performance`},a=v(v({},s),e);console.debug("[Performance Metrics] Initializing with config:",a);const r=new iS(a);return r.init(),r},lS=(e,t)=>Object.entries(t).reduce((n,[s,a])=>a?`${n} ${s}`:n,e);function cS(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unknown error"}function dS(e){return e instanceof On?`AxiosError: ${e.message}`:cS(e)}const uS=()=>j("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[j("path",{d:"M10 15.0625C9.84467 15.0625 9.71875 15.1884 9.71875 15.3438C9.71875 15.4991 9.84467 15.625 10 15.625C10.1553 15.625 10.2812 15.4991 10.2812 15.3438C10.2812 15.1884 10.1553 15.0625 10 15.0625V15.0625",stroke:"#D0011B","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),j("path",{d:"M10 12.8125V7.1875",stroke:"#D0011B","stroke-width":"1.5","stroke-linecap":"round"}),j("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.2158 2.32C10.988 1.85641 10.5165 1.56268 10 1.56268C9.48351 1.56268 9.01197 1.85641 8.78426 2.32L1.67951 16.7935C1.50564 17.1472 1.52666 17.5656 1.7351 17.9001C1.94355 18.2346 2.30989 18.4378 2.70401 18.4375H17.296C17.6901 18.4378 18.0565 18.2346 18.2649 17.9001C18.4734 17.5656 18.4944 17.1472 18.3205 16.7935L11.2158 2.32Z",stroke:"#D0011B","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]),mS=()=>j("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[j("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z",stroke:"#30AB66","stroke-linecap":"round","stroke-linejoin":"round"}),j("path",{d:"M4 9.33038L5.42917 11.6848C5.53916 11.8755 5.72175 11.9928 5.91938 11.9997C6.11701 12.0065 6.30531 11.9021 6.42492 11.7194L11 5",stroke:"#30AB66","stroke-linecap":"round","stroke-linejoin":"round"})]),hS=()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},[j("rect",{width:"256",height:"256",fill:"none"}),j("line",{x1:"200",y1:"56",x2:"56",y2:"200",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"24"}),j("line",{x1:"200",y1:"200",x2:"56",y2:"56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"24"})]),fS=()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",viewBox:"0 0 256 256"},[j("path",{d:"M128 24a104 104 0 10104 104A104.11 104.11 0 00128 24zm45.66 85.66l-56 56a8 8 0 01-11.32 0l-24-24a8 8 0 0111.32-11.32L112 148.69l50.34-50.35a8 8 0 0111.32 11.32z"})]),ro=()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",x:"0",y:"0",viewBox:"0 0 40 40"},[j("path",{fill:"currentColor",d:"M20.201 5.169c-8.254 0-14.946 6.692-14.946 14.946 0 8.255 6.692 14.946 14.946 14.946s14.946-6.691 14.946-14.946c-.001-8.254-6.692-14.946-14.946-14.946zm0 26.58c-6.425 0-11.634-5.208-11.634-11.634 0-6.425 5.209-11.634 11.634-11.634 6.425 0 11.633 5.209 11.633 11.634 0 6.426-5.208 11.634-11.633 11.634z",opacity:"0.3"}),j("path",{fill:"currentColor",d:"M26.013 10.047l1.654-2.866a14.855 14.855 0 00-7.466-2.012v3.312c2.119 0 4.1.576 5.812 1.566z"},[j("animateTransform",{attributeName:"transform",attributeType:"xml",dur:"0.5s",from:"0 20 20",repeatCount:"indefinite",to:"360 20 20",type:"rotate"})])]),pS=()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",viewBox:"0 0 256 256"},[j("path",{d:"M128 24a104 104 0 10104 104A104.11 104.11 0 00128 24zm37.66 130.34a8 8 0 01-11.32 11.32L128 139.31l-26.34 26.35a8 8 0 01-11.32-11.32L116.69 128l-26.35-26.34a8 8 0 0111.32-11.32L128 116.69l26.34-26.35a8 8 0 0111.32 11.32L139.31 128z"})]),gS=(e,t)=>{const[n,s]=ge("");return Te(()=>{var o;if(!e)return;const a=(o=e.dataset[t])!=null?o:"";s(a);const r=c=>{for(const d of c)d.attributeName===t&&s(a)},i=new MutationObserver(r);return i.observe(e,{attributes:!0}),()=>{i.disconnect()}},[e]),n};class us extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype),this.name="ImpossiblePhoneNumberError"}}const vS=e=>e.format("INTERNATIONAL",{nationalPrefix:!1}),Ns=e=>`+${e}`,er="49",yS=()=>{const e=navigator.language.split("-");return(e.length>1?e[1]:e[0]).toUpperCase()},io=({code:e,allowedCountryCodes:t})=>{if(t.length===0){K({message:"Phone block: empty allowed country code list",data:{countryCode:e,allowedCountryCodes:t}});return}const n=yS();return e&&t.includes(e)?e:t.includes(n)?(K({message:"Phone block: invalid country code, fallback to browser language",data:{countryCode:e,allowedCountryCodes:t}}),n):(K({message:"Phone block: invalid country code, fallback to first language",data:{countryCode:e,allowedCountryCodes:t}}),t[0])},Dn=({code:e,libphonenumber:t,allowedCountryCodes:n})=>{const s=io({code:e,allowedCountryCodes:n});if(!s)return er;try{return t.getCountryCallingCode(s)}catch(a){return K({message:"Phone block: invalid country code",severity:"error",data:{countryCode:e}}),er}},bS=({unparsedCountryCodes:e,libphonenumber:t})=>{const n=t.getCountries();if(!e)return n;try{const s=JSON.parse(e.toString()),a=n.filter(r=>s.includes(r));return a.length===0?(K({message:"Phone block: empty country code list",data:{countryCodes:e}}),n):a}catch(s){return K({message:"Phone block: country code list parsing error",severity:"error",data:{countryCodes:e,error:s}}),n}};function wS(e,t,n,s){if(!n||!s)return"";const a=n.getExampleNumber(e,s);if(!a)return"";const r=a.formatInternational().slice(t.length).replace(/[0-9]/g,"0");return`${t}${r}`}function SS(e,t){let n=e;const s=n.substring(0,2);s==="00"&&(n=n.replace(s,"+"));const a=n.lastIndexOf(t);return a===-1?n.trim().length>t.length&&!n.startsWith("+")?`${t}${n}`:n:n.slice(a)}const kS=(e,t)=>{const n=Dt(s=>{const a=s.composedPath()[0];e.current&&!e.current.contains(a)&&t()},[e,t]);Te(()=>(document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}),[n])},ES=65,xS=127462,IS=xS-ES;async function CS(){if(typeof Intl.DisplayNames!="function")try{await Promise.all([te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.p),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.a),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.d),[]),te(()=>import("./formatjs.chunk-BfyFTdTF.js").then(e=>e.e),[])])}catch(e){console.log("Something went wrong loading the @formatjs-intl-displaynames polyfill",e)}}function LS(){return new Intl.DisplayNames([navigator.language],{type:"region"})}function NS(e,t,n){return t.map(s=>({countryCode:s,countryName:n.of(s),countryCallingCode:Dn({code:s,libphonenumber:e,allowedCountryCodes:t}),get searchIndex(){return`+${this.countryCallingCode}${this.countryName}`}}))}const _S=({allowedCountryCodes:e,countryCode:t,setErrorType:n,setIsDropdownVisible:s,setIsFocused:a,isDropdownVisible:r,libphonenumber:i,id:o,systemLabel:c,onCountryCodeChange:d,isEmpty:u})=>{const m=It(null),[h,p]=ge(""),[f,g]=ge(null),[b,S]=ge([]),[w,k]=ge(b);Te(()=>{(async()=>{await CS();const _=LS(),N=NS(i,e,_);g(_),S(N),k(N)})().catch(_=>{console.error("Something went wrong initializing the CountrySelect",_),K({message:"Block crashed",severity:"error",data:{error:`CountrySelect crashed: ${_.name} ${_.message}`}})})},[i,e]),kS(m,()=>{s(!1)});const C=_=>{const{value:N}=_.target;p(N);const $=b.filter(W=>W.searchIndex.toLowerCase().includes(N.toLowerCase()));k(N.length?$:b)},T=()=>{n("formattingError"),s(!r),a(!r)},V=_=>{var $;const N=($=_.target.closest("[data-value]"))==null?void 0:$.getAttribute("data-value");N||console.warn("Country code wasn't selected, using the default value"),d(t&&N),s(!1)},M=It(null);return dr(()=>{var _;r&&((_=M.current)==null||_.focus())},[r]),j("div",{ref:m},[j("div",{class:"select-wrapper"},[j("select",{className:"select-native",onChange:_=>{const{value:N}=_.target;d(N)},id:"phone-country",name:`country-select-${o}`,"data-label":c,value:t,label:In(t),"data-is-empty":u},[e.map(_=>{var N;return j("option",{value:_},[`${In(_)} ${(N=f==null?void 0:f.of(_))!=null?N:""} ${Ns(Dn({code:_,libphonenumber:i,allowedCountryCodes:e}))}`])})]),j("button",{className:`select-custom input-decorator input-prefix ${r?"isActive":""}`,"aria-hidden":"true",onClick:T},[In(t)])]),j("div",{className:`select-custom-options ${r?"select-custom-options_is_visible":""}`},[j("div",{className:"select-custom-search-box"},[j("input",{ref:M,className:"select-custom-search",type:"text",placeholder:"Search",value:h,onKeyUp:C})]),w.map(_=>j("button",{class:"select-custom-option","data-value":_.countryCode,onClick:V},[`${In(_.countryCode)} ${_.countryName} `,j("span",{class:"country-calling-code"},[`+${_.countryCallingCode}`])]))])])},In=e=>{const t=e.toUpperCase().split("").map(n=>IS+n.charCodeAt(0));return String.fromCodePoint(...t)},AS=({children:e,componentName:t})=>(ko(n=>{K({message:"Block crashed",severity:"error",data:{error:`${t} crashed: ${n.name} ${n.message}`}})}),j(Eo,{},[e])),TS=({phoneNumber:e,id:t,isSensitive:n,shouldAutofocus:s,variable:a,systemLabel:r,onFocus:i,onChange:o,onInput:c,onKeyDown:d,status:u,isEmpty:m,placeholder:h})=>{const p=It(null);return dr(()=>{var f;s&&((f=p.current)==null||f.focus())},[s]),j("div",{style:{width:"100%",flex:1,position:"relative"}},[j("input",{ref:p,className:"phone-input",name:`phone-input-${t}`,"data-sensitive":n,"data-tf-sensitive":n,disabled:u==="loading","data-variable":a,"data-label":r,autofocus:s,id:t,type:"tel","data-type":"input",onFocus:i,onChange:f=>o(f.target.value),onBlur:f=>o(f.target.value,f.type),onInput:f=>c(f.target.value),onKeyDown:f=>d(f.key),value:e,"data-is-empty":m,placeholder:h})])},RS=({hidden:e})=>j("div",{class:"relative"},[j("div",{class:`status-indicator ${e?"hidden":""}`},[j("div",{class:"icon-check-mark"},[j(fS,{})]),j("div",{class:"icon-x-mark"},[j(pS,{})]),j("div",{class:"icon-spinner"},[j(ro,{})])])]);function $S(){const e=x(),t=new AbortController;return[async()=>de.get(`${e.constants.MODULES_URL}/usage/${e.constants.FLOW_ID}/phone-number-validation`,{signal:t.signal}),t.abort]}const jS=async(e,t,n)=>{if(t)return await new Promise(i=>{ke({event:"preview.networkValidation"}),setTimeout(()=>{i({isValid:!0,isActive:!0})},2e3)});const s=x();return(await de.post(`${s.constants.MODULES_URL}/usage/${s.constants.FLOW_ID}/phone-number-validation`,{phoneNumber:e,countryCallingCode:n})).data},PS=async()=>[await te(()=>import("./libphone.chunk-CVLhGutd.js").then(e=>e.i),[]),(await te(async()=>{const{default:e}=await import("./libphone.chunk-CVLhGutd.js").then(t=>t.e);return{default:e}},[])).default];async function BS(){if(window.ResizeObserver)return window.ResizeObserver;const{ResizeObserver:e}=await te(async()=>{const{ResizeObserver:t}=await import("./resize-observer.chunk-DqyxKk7V.js");return{ResizeObserver:t}},[]);return e}const MS=(e,t)=>e||(t?"Bitte gib eine korrekte Telefonnummer an.":"Please enter a valid phone number."),DS=(e,t)=>e||(t?"Bitte eine registrierte Nummer eingeben.":"Please enter a registered number."),VS=({defaultCountryCode:e,allowedCountryCodes:t,label:n,labelType:s,errorMessage:a,required:r,sensitive:i,autofocus:o,id:c,variable:d,systemLabel:u,dataStatus:m,dataAsync:h,systemLabelCountrySelect:p,networkValidationErrorMessage:f,withInfo:g,info:b,libphonenumber:S,libphonenumberExamples:w})=>{var bt,Xe;const k=It(null),C=It(null),T=r!==void 0;let V;try{V=!!JSON.parse(`${h}`)}catch(z){}const M=i?JSON.parse(`${i}`):void 0,_=o?JSON.parse(`${o}`):void 0,N=bS({unparsedCountryCodes:t,libphonenumber:S}),$="input has-prefix",W=window.navigator.language.includes("de"),ee=DS(f,W),A=MS(a,W),[ie,ne]=ge(!1),[I,X]=ge((bt=io({code:e,allowedCountryCodes:N}))!=null?bt:e),[B,he]=ge(""),[se,Q]=ge(!1),[oe,L]=ge(!1),[R,O]=ge(m),[le,Y]=ge("formattingError"),[$e,pe]=ge($),[we,Le]=ge(void 0),Ie=Ns(Dn({code:I,libphonenumber:S,allowedCountryCodes:N})),nn=Dt((z,ue)=>{const Ee=S.parseIncompletePhoneNumber(z).slice(ue.length);return Ee===void 0?!0:Ee.length===0},[S]),Ze=la(()=>nn(B,Ie),[S,B,Ie]),Be=la(()=>wS(I,Ie,S,w),[S,w,I,Ie]),it=gS((Xe=k.current)==null?void 0:Xe.parentElement,"initialvalue");Te(()=>{it&&(he(it),ne(!0))},[it]),Te(()=>{if(k.current){const z=k.current.parentElement;z&&(z.dataset.status=R)}},[R]);const[Rt,sn]=ge(!1);Te(()=>{if(Ce()){Le(V);return}if(!V)return;const[z,ue]=$S();return z().then(Ee=>Le(Ee.data)),()=>{ue()}},[V]);const an=Dt(async()=>{var ue,Ee;if(!we||R==="loading")return;const z=S.parsePhoneNumberWithError(B,I);if(!$t(z).shouldThrow)try{O("loading"),sn(!0),K({message:"Phone network validation request started"});const{isActive:ve,isValid:q}=await jS(z.number,Ce(),z.countryCallingCode);Le(ve);let J="error";(!ve||q)&&(J="success"),K({message:"Phone network validation request fulfilled",data:{isActive:ve,isPhoneNumberValid:q,status:J}}),O(J),J==="error"&&Y("networkValidationError")}catch(ve){O("success");let q;ve instanceof On&&typeof((Ee=(ue=ve.response)==null?void 0:ue.data)==null?void 0:Ee.message)=="string"?q=`ModulesError: ${ve.response.data.message}`:q=dS(ve),K({message:"Phone network validation request failed",severity:"error",data:{error:q,status:"success"}})}},[S,B,I]);Te(()=>{se||L(!1)},[se]);const $t=Dt(z=>{const ue=vS(z);return{shouldThrow:!vt(B),formattedNumber:ue}},[B]);Te(()=>{var Ee,ve;if(R==="loading")return;const z=SS(B,Ie);if(B!==z)return he(z);const ue=Ie.length;if(T&&B.length<=ue)return O("invalid");if(!T&&Ze)return O("success");if(B.length>ue){const q=async()=>{await an()};try{const J=S.parsePhoneNumberWithError(B,I),ye=J.getPossibleCountries();if(ye.length&&(!N||N!=null&&N.includes(ye[0])))X(ye[0]);else if(N&&!N.includes(ye[0]))throw new us("IMPOSSIBLE_NUMBER");const{shouldThrow:xe,formattedNumber:Ae}=$t(J);if(xe)throw new us("IMPOSSIBLE_NUMBER");if(O("idle"),B!==Ae)return he(Ae);ie?q():O("idle")}catch(J){(J instanceof S.ParseError||J instanceof us)&&ie?(Y("formattingError"),O("error")):O("invalid")}}(ve=(Ee=k.current)==null?void 0:Ee.parentElement)==null||ve.setAttribute("data-value",B)},[I,B,ie,an]),Te(()=>{(R==="idle"||R==="success")&&(Y("formattingError"),pe($)),R==="error"&&pe(`${$} error invalid`),R==="invalid"&&pe(`${$} invalid`),R==="loading"&&pe($)},[R]);const vt=z=>{try{const ue=S.parsePhoneNumberWithError(z);return(ue==null?void 0:ue.isPossible())&&ue.isValid()}catch(ue){return!1}},[rn,on]=ge(0);Te(()=>{let z;return(async()=>{var ve;if(s!=="floating-inline")return;const ue=(ve=k.current)==null?void 0:ve.querySelector(".select-wrapper");if(!ue)return;const Ee=await BS();z=new Ee(q=>{var J;for(const ye of q){const Ae=(J=ye.target.offsetWidth)!=null?J:0;on(Ae)}}),z.observe(ue)})(),()=>{z==null||z.disconnect()}});const zn=()=>{L(!0),B===""&&he(Ie)},Kn=z=>{he(z),ne(!1),sn(!1)},Gn=(z,ue)=>{var Ee,ve;L(!1),he(z),ue==="blur"&&(nn(z,Ie)&&he(""),K({message:"Input blurred",blockID:c,data:{isRequired:T,hasData:z.length>Ie.length,isRunningNetworkValidation:!!we,isValidPhoneNumberViaLib:!!vt(z),pseudonymizedNumber:z.replace(/[0-9]/g,"0"),inputStatus:(ve=(Ee=C.current)==null?void 0:Ee.className)!=null?ve:""}})),z.length>Ie.length&&ne(!0)},Yn=Dt(z=>{C.current&&!C.current.classList.contains("invalid")&&C.current.dataset.status!=="success"&&z==="Enter"&&(C.current.dataset.status="loading",ne(!0))},[]),Jn=z=>{if(z===I)return;O("idle"),X(z);const ue=Ns(Dn({code:z,libphonenumber:S,allowedCountryCodes:N}));try{const Ee=S.parsePhoneNumberWithError(B,z),ve=`${ue}${Ee.nationalNumber}`,q=S.parsePhoneNumberWithError(ve,z);he(q.number),ne(!0)}catch(Ee){he(ve=>ve===""?ve:ue)}},ln=!!n,yt=["floating","floating-inline"].includes(s!=null?s:"");return j("div",{class:lS("input-box show-error-instantly",{"has-value":!!B,"has-focus":oe,"with-floating-label":yt,"floating-label-inline":s==="floating-inline","with-dropdown-visible":se}),ref:k},[ln&&!yt&&j("label",{htmlFor:c},[n]),j("div",{},[j("div",{ref:C,className:$e,"data-async":we?"true":"false","data-status":we?R:"idle"},[j("div",{class:"input-wrapper"},[j(_S,{id:c,allowedCountryCodes:N,onCountryCodeChange:Jn,setErrorType:Y,countryCode:I,libphonenumber:S,isDropdownVisible:se,setIsDropdownVisible:Q,setIsFocused:L,systemLabel:p,isEmpty:Ze}),j(TS,{id:c,status:we?R:"idle",onFocus:zn,onChange:Gn,onInput:Kn,onKeyDown:Yn,phoneNumber:B,isSensitive:M,shouldAutofocus:_,variable:d,systemLabel:u,isEmpty:Ze,placeholder:Be}),ln&&yt&&j("div",{style:{left:rn},class:"input-floating-label"},[j("label",{htmlFor:c},[n])]),j(RS,{hidden:!Rt})]),j("div",{class:"error-box"},[j(hS,{}),j("span",{class:"text"},[R==="error"&&le==="networkValidationError"?ee:A])]),g&&j("span",{class:"label"},[b!=null?b:""])])])])},OS=e=>{const[[t,n],s]=ge([void 0,void 0]);return Te(()=>{PS().then(a=>s(a)).catch(a=>{K({message:"Failed to load libphonenumber",severity:"error",data:{error:`${a.name} ${a.message}`}}),console.error(a)})},[]),t?j(AS,{componentName:"PhoneNumberBlock"},[j(VS,E(v({},e),{libphonenumber:t,libphonenumberExamples:n}))]):null},tr=async(e,t,n,s,a,r)=>{const i=Tt(e==null?void 0:e.getAttribute("data-attr"));Zs(i),!(x().constants.IS_RULES_ENABLED&&en.hasBlockingRuleForBlock(i.id,"heyflow-button-click"))&&(t==="submit"&&e?await Os(e,{nextAction:r!=null?r:"next",destination:n,redirectURL:s,target:a}):await Ge(t,n,void 0,{redirectURL:s,target:a}))},FS=({message:e})=>j("div",{class:"payment-message-container"},[j(mS,{}),j("span",{},[e])]),US=({message:e})=>j("div",{class:"payment-message-container error"},[j(uS,{}),j("span",{},[e])]),WS=async()=>await te(()=>import("./stripe.chunk-B2ByysVA.js").then(e=>e.i),[]),HS=({blockId:e,currency:t,destination:n,navigationAction:s,paymentSuccessMessage:a,redirectUrl:r,stripeAccountId:i,stripeAppearance:o,stripeLayout:c,submitPaymentButtonText:d,submitAction:u,target:m,tracking:h,eventName:p,prefillMapping:f})=>{const g=Ce(),[b,S]=ge(),[w,k]=ge(),[C,T]=ge(),[V,M]=ge(!0),[_,N]=ge(!1),[$,W]=ge(),[ee,A]=ge(!1),ie=window.navigator.language.includes("de"),ne=It(null),I=d!=null?d:ie?"Jetzt bezahlen":"Pay now",X=a!=null?a:ie?"Zahlung erfolgreich":"Payment successful",B=ie?"Ldt":"Loading...";Te(()=>{(async()=>{try{if(!i||!C)return;const L=x(),R=await C.loadStripe(`${L.constants.STRIPE_PUBLIC_KEY}`,{stripeAccount:i});R&&S(R)}catch(L){console.error(L)}})()},[i,C]);const he=JSON.parse(o);Te(()=>{b&&k(b.elements({appearance:he,mode:"payment",currency:t.toLowerCase(),paymentMethodCreation:"manual",amount:100}))},[b]),Te(()=>{if(w){const oe={layout:c},L=w.create("payment",oe);L==null||L.mount(`#payment-element-${e}`),L.once("ready",()=>{M(!1)})}},[w]),Te(()=>{WS().then(oe=>T(oe)).catch(console.error)},[]);const se=async(oe,{clientSecret:L,status:R})=>{if(R==="succeeded"&&(N(!0),A(!1),W(void 0),await tr(ne.current,s,n,r,m,u)),R==="requires_action"){const{paymentIntent:O,error:le}=await oe.confirmCardPayment(L);if(le){W(le),A(!1);return}if(O&&O.status==="succeeded"){N(!0),A(!1),await tr(ne.current,s,n,r,m,u);return}return}},Q=async oe=>{var L,R;if(oe.preventDefault(),g){ke({event:"stripePaymentBlocked"});return}if(b&&w){A(!0);const{error:O}=await w.submit();if(O){A(!1),W(O);return}const le=f?qn(JSON.parse(f)):{},{error:Y,paymentMethod:$e}=await b.createPaymentMethod(v({elements:w},le?{params:{billing_details:le}}:{}));if(Y||!$e){A(!1),W(Y);return}try{const pe=x(),we=await de.post(`${pe.constants.API_ENDPOINT}/stripe-payment/confirm`,{paymentMethodID:$e.id,flowID:pe.constants.FLOW_ID,blockID:e,stripeAccountID:i});se(b,we.data)}catch(pe){A(!1),W({message:(R=(L=pe==null?void 0:pe.response)==null?void 0:L.data)!=null?R:"Unknown error",type:"card_error"}),console.error(pe)}}};return C?j("div",{},[_?j(FS,{message:X}):j("form",{id:"payment-form"},[j("div",{id:"link-authentication-element"}),j("div",{id:`payment-element-${e}`}),$&&j(US,{message:$.message}),V?B:j("button",{ref:ne,className:"generic-button submit medium",id:"submit",style:{color:"white",marginTop:"15px"},onClick:Q,"data-attr":h==="true"?JSON.stringify({tracking:!!h,eventName:p,id:e,label:I}):""},[ee?j("div",{class:"icon-spinner"},[j(ro,{})]):j("span",{id:"button-text"},[I])]),j("div",{id:"payment-message",class:"hidden"})])]):null},Cn=async e=>new Promise(t=>setTimeout(t,e)),qS=100,zS=100,KS=2e3,GS=1e3,YS=40,JS=25,ZS=["h1","h2","h3","h4","h5","h6"],XS=e=>{},QS=s=>{var a=s,{text:e,words:t}=a,n=un(a,["text","words"]);const r=JSON.parse(t),[i,o]=ge(""),[c,d]=ge(""),[u,m]=ge(!1),h=async f=>{for(let g=0;g<=f.length;g++)o(f.slice(0,g)),d(f.slice(g)),await Cn(Math.max(qS-g*10,YS));m(!0),await Cn(KS),m(!1);for(let g=1;g<=f.length;g++)o(f.slice(0,-g)),d(f.slice(-g)),await Cn(Math.max(zS-g*10,JS))};Te(()=>{async function f(){for(let g=0;;g++)await h(r[g%r.length]),m(!0),await Cn(GS),m(!1)}XS(f())},[]);const p=n.as&&[...ZS,"span"].includes(n.as)?n.as:"span";return j(p,{},[j("span",{},[e]),j("span",{style:{marginLeft:".3em"}},[j("span",{className:u?"typewriter-caret":void 0},[i]),j("span",{style:{visibility:"hidden"}},[c])])])};try{es(QS,"hey-typewriter",["words, text, as"]),es(OS,"hey-phone-number"),es(HS,"hey-stripe-payment")}catch(e){console.log("skipping registration of custom element because it was already defined")}oS();window.heyflow[As()]=ao();
